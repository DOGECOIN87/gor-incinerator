var Na=Object.defineProperty;var Pa=(r,t,e)=>t in r?Na(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var te=(r,t,e)=>Pa(r,typeof t!="symbol"?t+"":t,e);import{g as Ts,a as Sr,c as Te,b as nt}from"./index-tOkmSuA5.js";const vn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zn(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ws(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function gn(r,...t){if(!Zn(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function Xi(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ws(r.outputLen),ws(r.blockLen)}function lr(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function qa(r,t){gn(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function Ln(...r){for(let t=0;t<r.length;t++)r[t].fill(0)}function ts(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Oe(r,t){return r<<32-t|r>>>t}const Ji=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Fa=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function un(r){if(gn(r),Ji)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=Fa[r[e]];return t}const Ke={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ei(r){if(r>=Ke._0&&r<=Ke._9)return r-Ke._0;if(r>=Ke.A&&r<=Ke.F)return r-(Ke.A-10);if(r>=Ke.a&&r<=Ke.f)return r-(Ke.a-10)}function hr(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Ji)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let i=0,s=0;i<e;i++,s+=2){const a=Ei(r.charCodeAt(s)),l=Ei(r.charCodeAt(s+1));if(a===void 0||l===void 0){const f=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+s)}n[i]=a*16+l}return n}function za(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Cs(r){return typeof r=="string"&&(r=za(r)),gn(r),r}function Ne(...r){let t=0;for(let n=0;n<r.length;n++){const i=r[n];gn(i),t+=i.length}const e=new Uint8Array(t);for(let n=0,i=0;n<r.length;n++){const s=r[n];e.set(s,i),i+=s.length}return e}class Qi{}function to(r){const t=n=>r().update(Cs(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function Us(r=32){if(vn&&typeof vn.getRandomValues=="function")return vn.getRandomValues(new Uint8Array(r));if(vn&&typeof vn.randomBytes=="function")return Uint8Array.from(vn.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function Da(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(e>>i&s),l=Number(e&s),f=n?4:0,y=n?0:4;r.setUint32(t+f,a,n),r.setUint32(t+y,l,n)}function Ka(r,t,e){return r&t^~r&e}function Ha(r,t,e){return r&t^r&e^t&e}class eo extends Qi{constructor(t,e,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(t),this.view=ts(this.buffer)}update(t){lr(this),t=Cs(t),gn(t);const{view:e,buffer:n,blockLen:i}=this,s=t.length;for(let a=0;a<s;){const l=Math.min(i-this.pos,s-a);if(l===i){const f=ts(t);for(;i<=s-a;a+=i)this.process(f,a);continue}n.set(t.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){lr(this),qa(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;e[a++]=128,Ln(this.buffer.subarray(a)),this.padOffset>i-a&&(this.process(n,0),a=0);for(let k=a;k<i;k++)e[k]=0;Da(n,i-8,BigInt(this.length*8),s),this.process(n,0);const l=ts(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const y=f/4,x=this.get();if(y>x.length)throw new Error("_sha2: outputLen bigger than state");for(let k=0;k<y;k++)l.setUint32(4*k,x[k],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:i,finished:s,destroyed:a,pos:l}=this;return t.destroyed=a,t.finished=s,t.length=i,t.pos=l,i%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Ye=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),le=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),nr=BigInt(2**32-1),ki=BigInt(32);function $a(r,t=!1){return t?{h:Number(r&nr),l:Number(r>>ki&nr)}:{h:Number(r>>ki&nr)|0,l:Number(r&nr)|0}}function Wa(r,t=!1){const e=r.length;let n=new Uint32Array(e),i=new Uint32Array(e);for(let s=0;s<e;s++){const{h:a,l}=$a(r[s],t);[n[s],i[s]]=[a,l]}return[n,i]}const Bi=(r,t,e)=>r>>>e,Ai=(r,t,e)=>r<<32-e|t>>>e,xn=(r,t,e)=>r>>>e|t<<32-e,Sn=(r,t,e)=>r<<32-e|t>>>e,rr=(r,t,e)=>r<<64-e|t>>>e-32,sr=(r,t,e)=>r>>>e-32|t<<64-e;function He(r,t,e,n){const i=(t>>>0)+(n>>>0);return{h:r+e+(i/2**32|0)|0,l:i|0}}const Va=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),ja=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Ga=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Za=(r,t,e,n,i)=>t+e+n+i+(r/2**32|0)|0,Ya=(r,t,e,n,i)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0),Xa=(r,t,e,n,i,s)=>t+e+n+i+s+(r/2**32|0)|0,Ja=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xe=new Uint32Array(64);class Qa extends eo{constructor(t=32){super(64,t,8,!1),this.A=Ye[0]|0,this.B=Ye[1]|0,this.C=Ye[2]|0,this.D=Ye[3]|0,this.E=Ye[4]|0,this.F=Ye[5]|0,this.G=Ye[6]|0,this.H=Ye[7]|0}get(){const{A:t,B:e,C:n,D:i,E:s,F:a,G:l,H:f}=this;return[t,e,n,i,s,a,l,f]}set(t,e,n,i,s,a,l,f){this.A=t|0,this.B=e|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=l|0,this.H=f|0}process(t,e){for(let k=0;k<16;k++,e+=4)Xe[k]=t.getUint32(e,!1);for(let k=16;k<64;k++){const S=Xe[k-15],v=Xe[k-2],_=Oe(S,7)^Oe(S,18)^S>>>3,B=Oe(v,17)^Oe(v,19)^v>>>10;Xe[k]=B+Xe[k-7]+_+Xe[k-16]|0}let{A:n,B:i,C:s,D:a,E:l,F:f,G:y,H:x}=this;for(let k=0;k<64;k++){const S=Oe(l,6)^Oe(l,11)^Oe(l,25),v=x+S+Ka(l,f,y)+Ja[k]+Xe[k]|0,B=(Oe(n,2)^Oe(n,13)^Oe(n,22))+Ha(n,i,s)|0;x=y,y=f,f=l,l=a+v|0,a=s,s=i,i=n,n=v+B|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,l=l+this.E|0,f=f+this.F|0,y=y+this.G|0,x=x+this.H|0,this.set(n,i,s,a,l,f,y,x)}roundClean(){Ln(Xe)}destroy(){this.set(0,0,0,0,0,0,0,0),Ln(this.buffer)}}const no=Wa(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),tc=no[0],ec=no[1],Je=new Uint32Array(80),Qe=new Uint32Array(80);class nc extends eo{constructor(t=64){super(128,t,16,!1),this.Ah=le[0]|0,this.Al=le[1]|0,this.Bh=le[2]|0,this.Bl=le[3]|0,this.Ch=le[4]|0,this.Cl=le[5]|0,this.Dh=le[6]|0,this.Dl=le[7]|0,this.Eh=le[8]|0,this.El=le[9]|0,this.Fh=le[10]|0,this.Fl=le[11]|0,this.Gh=le[12]|0,this.Gl=le[13]|0,this.Hh=le[14]|0,this.Hl=le[15]|0}get(){const{Ah:t,Al:e,Bh:n,Bl:i,Ch:s,Cl:a,Dh:l,Dl:f,Eh:y,El:x,Fh:k,Fl:S,Gh:v,Gl:_,Hh:B,Hl:A}=this;return[t,e,n,i,s,a,l,f,y,x,k,S,v,_,B,A]}set(t,e,n,i,s,a,l,f,y,x,k,S,v,_,B,A){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=l|0,this.Dl=f|0,this.Eh=y|0,this.El=x|0,this.Fh=k|0,this.Fl=S|0,this.Gh=v|0,this.Gl=_|0,this.Hh=B|0,this.Hl=A|0}process(t,e){for(let L=0;L<16;L++,e+=4)Je[L]=t.getUint32(e),Qe[L]=t.getUint32(e+=4);for(let L=16;L<80;L++){const q=Je[L-15]|0,G=Qe[L-15]|0,X=xn(q,G,1)^xn(q,G,8)^Bi(q,G,7),et=Sn(q,G,1)^Sn(q,G,8)^Ai(q,G,7),Q=Je[L-2]|0,T=Qe[L-2]|0,W=xn(Q,T,19)^rr(Q,T,61)^Bi(Q,T,6),K=Sn(Q,T,19)^sr(Q,T,61)^Ai(Q,T,6),$=Ga(et,K,Qe[L-7],Qe[L-16]),d=Za($,X,W,Je[L-7],Je[L-16]);Je[L]=d|0,Qe[L]=$|0}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:l,Cl:f,Dh:y,Dl:x,Eh:k,El:S,Fh:v,Fl:_,Gh:B,Gl:A,Hh:M,Hl:U}=this;for(let L=0;L<80;L++){const q=xn(k,S,14)^xn(k,S,18)^rr(k,S,41),G=Sn(k,S,14)^Sn(k,S,18)^sr(k,S,41),X=k&v^~k&B,et=S&_^~S&A,Q=Ya(U,G,et,ec[L],Qe[L]),T=Xa(Q,M,q,X,tc[L],Je[L]),W=Q|0,K=xn(n,i,28)^rr(n,i,34)^rr(n,i,39),$=Sn(n,i,28)^sr(n,i,34)^sr(n,i,39),d=n&s^n&l^s&l,o=i&a^i&f^a&f;M=B|0,U=A|0,B=v|0,A=_|0,v=k|0,_=S|0,{h:k,l:S}=He(y|0,x|0,T|0,W|0),y=l|0,x=f|0,l=s|0,f=a|0,s=n|0,a=i|0;const c=Va(W,$,o);n=ja(c,T,K,d),i=c|0}({h:n,l:i}=He(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:a}=He(this.Bh|0,this.Bl|0,s|0,a|0),{h:l,l:f}=He(this.Ch|0,this.Cl|0,l|0,f|0),{h:y,l:x}=He(this.Dh|0,this.Dl|0,y|0,x|0),{h:k,l:S}=He(this.Eh|0,this.El|0,k|0,S|0),{h:v,l:_}=He(this.Fh|0,this.Fl|0,v|0,_|0),{h:B,l:A}=He(this.Gh|0,this.Gl|0,B|0,A|0),{h:M,l:U}=He(this.Hh|0,this.Hl|0,M|0,U|0),this.set(n,i,s,a,l,f,y,x,k,S,v,_,B,A,M,U)}roundClean(){Ln(Je,Qe)}destroy(){Ln(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ro=to(()=>new Qa),rc=to(()=>new nc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Os=BigInt(0),bs=BigInt(1);function hn(r,t=""){if(typeof r!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof r)}return r}function Re(r,t,e=""){const n=Zn(r),i=r==null?void 0:r.length,s=t!==void 0;if(!n||s&&i!==t){const a=e&&`"${e}" `,l=s?` of length ${t}`:"",f=n?`length=${i}`:`type=${typeof r}`;throw new Error(a+"expected Uint8Array"+l+", got "+f)}return r}function ir(r){const t=r.toString(16);return t.length&1?"0"+t:t}function so(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Os:BigInt("0x"+r)}function _r(r){return so(un(r))}function Hn(r){return gn(r),so(un(Uint8Array.from(r).reverse()))}function Ns(r,t){return hr(r.toString(16).padStart(t*2,"0"))}function io(r,t){return Ns(r,t).reverse()}function wt(r,t,e){let n;if(typeof t=="string")try{n=hr(t)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(Zn(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof e=="number"&&i!==e)throw new Error(r+" of length "+e+" expected, got "+i);return n}function Ii(r){return Uint8Array.from(r)}const es=r=>typeof r=="bigint"&&Os<=r;function sc(r,t,e){return es(r)&&es(t)&&es(e)&&t<=r&&r<e}function vs(r,t,e,n){if(!sc(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function oo(r){let t;for(t=0;r>Os;r>>=bs,t+=1);return t}const Yn=r=>(bs<<BigInt(r))-bs;function ic(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const n=v=>new Uint8Array(v),i=v=>Uint8Array.of(v);let s=n(r),a=n(r),l=0;const f=()=>{s.fill(1),a.fill(0),l=0},y=(...v)=>e(a,s,...v),x=(v=n(0))=>{a=y(i(0),v),s=y(),v.length!==0&&(a=y(i(1),v),s=y())},k=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let v=0;const _=[];for(;v<t;){s=y();const B=s.slice();_.push(B),v+=s.length}return Ne(..._)};return(v,_)=>{f(),x(v);let B;for(;!(B=_(k()));)x();return f(),B}}function Xn(r,t,e={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(i,s,a){const l=r[i];if(a&&l===void 0)return;const f=typeof l;if(f!==s||l===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${f}`)}Object.entries(t).forEach(([i,s])=>n(i,s,!1)),Object.entries(e).forEach(([i,s])=>n(i,s,!0))}function dr(r){const t=new WeakMap;return(e,...n)=>{const i=t.get(e);if(i!==void 0)return i;const s=r(e,...n);return t.set(e,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xe=BigInt(0),fe=BigInt(1),on=BigInt(2),ao=BigInt(3),co=BigInt(4),uo=BigInt(5),oc=BigInt(7),fo=BigInt(8),ac=BigInt(9),lo=BigInt(16);function ee(r,t){const e=r%t;return e>=xe?e:t+e}function yt(r,t,e){let n=r;for(;t-- >xe;)n*=n,n%=e;return n}function Mi(r,t){if(r===xe)throw new Error("invert: expected non-zero number");if(t<=xe)throw new Error("invert: expected positive modulus, got "+t);let e=ee(r,t),n=t,i=xe,s=fe;for(;e!==xe;){const l=n/e,f=n%e,y=i-s*l;n=e,e=f,i=s,s=y}if(n!==fe)throw new Error("invert: does not exist");return ee(i,t)}function Ps(r,t,e){if(!r.eql(r.sqr(t),e))throw new Error("Cannot find square root")}function ho(r,t){const e=(r.ORDER+fe)/co,n=r.pow(t,e);return Ps(r,n,t),n}function cc(r,t){const e=(r.ORDER-uo)/fo,n=r.mul(t,on),i=r.pow(n,e),s=r.mul(t,i),a=r.mul(r.mul(s,on),i),l=r.mul(s,r.sub(a,r.ONE));return Ps(r,l,t),l}function uc(r){const t=pn(r),e=go(r),n=e(t,t.neg(t.ONE)),i=e(t,n),s=e(t,t.neg(n)),a=(r+oc)/lo;return(l,f)=>{let y=l.pow(f,a),x=l.mul(y,n);const k=l.mul(y,i),S=l.mul(y,s),v=l.eql(l.sqr(x),f),_=l.eql(l.sqr(k),f);y=l.cmov(y,x,v),x=l.cmov(S,k,_);const B=l.eql(l.sqr(x),f),A=l.cmov(y,x,B);return Ps(l,A,f),A}}function go(r){if(r<ao)throw new Error("sqrt is not defined for small field");let t=r-fe,e=0;for(;t%on===xe;)t/=on,e++;let n=on;const i=pn(r);for(;Ri(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return ho;let s=i.pow(n,t);const a=(t+fe)/on;return function(f,y){if(f.is0(y))return y;if(Ri(f,y)!==1)throw new Error("Cannot find square root");let x=e,k=f.mul(f.ONE,s),S=f.pow(y,t),v=f.pow(y,a);for(;!f.eql(S,f.ONE);){if(f.is0(S))return f.ZERO;let _=1,B=f.sqr(S);for(;!f.eql(B,f.ONE);)if(_++,B=f.sqr(B),_===x)throw new Error("Cannot find square root");const A=fe<<BigInt(x-_-1),M=f.pow(k,A);x=_,k=f.sqr(M),S=f.mul(S,k),v=f.mul(v,M)}return v}}function fc(r){return r%co===ao?ho:r%fo===uo?cc:r%lo===ac?uc(r):go(r)}const lc=(r,t)=>(ee(r,t)&fe)===fe,hc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function dc(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=hc.reduce((n,i)=>(n[i]="function",n),t);return Xn(r,e),r}function gc(r,t,e){if(e<xe)throw new Error("invalid exponent, negatives unsupported");if(e===xe)return r.ONE;if(e===fe)return t;let n=r.ONE,i=t;for(;e>xe;)e&fe&&(n=r.mul(n,i)),i=r.sqr(i),e>>=fe;return n}function po(r,t,e=!1){const n=new Array(t.length).fill(e?r.ZERO:void 0),i=t.reduce((a,l,f)=>r.is0(l)?a:(n[f]=a,r.mul(a,l)),r.ONE),s=r.inv(i);return t.reduceRight((a,l,f)=>r.is0(l)?a:(n[f]=r.mul(a,n[f]),r.mul(a,l)),s),n}function Ri(r,t){const e=(r.ORDER-fe)/on,n=r.pow(t,e),i=r.eql(n,r.ONE),s=r.eql(n,r.ZERO),a=r.eql(n,r.neg(r.ONE));if(!i&&!s&&!a)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function mo(r,t){t!==void 0&&ws(t);const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function pn(r,t,e=!1,n={}){if(r<=xe)throw new Error("invalid field: expected ORDER > 0, got "+r);let i,s,a=!1,l;if(typeof t=="object"&&t!=null){if(n.sqrt||e)throw new Error("cannot specify opts in two arguments");const S=t;S.BITS&&(i=S.BITS),S.sqrt&&(s=S.sqrt),typeof S.isLE=="boolean"&&(e=S.isLE),typeof S.modFromBytes=="boolean"&&(a=S.modFromBytes),l=S.allowedLengths}else typeof t=="number"&&(i=t),n.sqrt&&(s=n.sqrt);const{nBitLength:f,nByteLength:y}=mo(r,i);if(y>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let x;const k=Object.freeze({ORDER:r,isLE:e,BITS:f,BYTES:y,MASK:Yn(f),ZERO:xe,ONE:fe,allowedLengths:l,create:S=>ee(S,r),isValid:S=>{if(typeof S!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof S);return xe<=S&&S<r},is0:S=>S===xe,isValidNot0:S=>!k.is0(S)&&k.isValid(S),isOdd:S=>(S&fe)===fe,neg:S=>ee(-S,r),eql:(S,v)=>S===v,sqr:S=>ee(S*S,r),add:(S,v)=>ee(S+v,r),sub:(S,v)=>ee(S-v,r),mul:(S,v)=>ee(S*v,r),pow:(S,v)=>gc(k,S,v),div:(S,v)=>ee(S*Mi(v,r),r),sqrN:S=>S*S,addN:(S,v)=>S+v,subN:(S,v)=>S-v,mulN:(S,v)=>S*v,inv:S=>Mi(S,r),sqrt:s||(S=>(x||(x=fc(r)),x(k,S))),toBytes:S=>e?io(S,y):Ns(S,y),fromBytes:(S,v=!0)=>{if(l){if(!l.includes(S.length)||S.length>y)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+S.length);const B=new Uint8Array(y);B.set(S,e?0:B.length-S.length),S=B}if(S.length!==y)throw new Error("Field.fromBytes: expected "+y+" bytes, got "+S.length);let _=e?Hn(S):_r(S);if(a&&(_=ee(_,r)),!v&&!k.isValid(_))throw new Error("invalid field element: outside of range 0..ORDER");return _},invertBatch:S=>po(k,S),cmov:(S,v,_)=>_?v:S});return Object.freeze(k)}function yo(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function wo(r){const t=yo(r);return t+Math.ceil(t/2)}function pc(r,t,e=!1){const n=r.length,i=yo(t),s=wo(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const a=e?Hn(r):_r(r),l=ee(a,t-fe)+fe;return e?io(l,i):Ns(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tn=BigInt(0),an=BigInt(1);function gr(r,t){const e=t.negate();return r?e:t}function cn(r,t){const e=po(r.Fp,t.map(n=>n.Z));return t.map((n,i)=>r.fromAffine(n.toAffine(e[i])))}function bo(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function ns(r,t){bo(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),i=2**r,s=Yn(r),a=BigInt(r);return{windows:e,windowSize:n,mask:s,maxNumber:i,shiftBy:a}}function Li(r,t,e){const{windowSize:n,mask:i,maxNumber:s,shiftBy:a}=e;let l=Number(r&i),f=r>>a;l>n&&(l-=s,f+=an);const y=t*n,x=y+Math.abs(l)-1,k=l===0,S=l<0,v=t%2!==0;return{nextN:f,offset:x,isZero:k,isNeg:S,isNegF:v,offsetF:y}}function mc(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function yc(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const rs=new WeakMap,vo=new WeakMap;function ss(r){return vo.get(r)||1}function Ti(r){if(r!==Tn)throw new Error("invalid wNAF")}class xo{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,n=this.ZERO){let i=t;for(;e>Tn;)e&an&&(n=n.add(i)),i=i.double(),e>>=an;return n}precomputeWindow(t,e){const{windows:n,windowSize:i}=ns(e,this.bits),s=[];let a=t,l=a;for(let f=0;f<n;f++){l=a,s.push(l);for(let y=1;y<i;y++)l=l.add(a),s.push(l);a=l.double()}return s}wNAF(t,e,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const a=ns(t,this.bits);for(let l=0;l<a.windows;l++){const{nextN:f,offset:y,isZero:x,isNeg:k,isNegF:S,offsetF:v}=Li(n,l,a);n=f,x?s=s.add(gr(S,e[v])):i=i.add(gr(k,e[y]))}return Ti(n),{p:i,f:s}}wNAFUnsafe(t,e,n,i=this.ZERO){const s=ns(t,this.bits);for(let a=0;a<s.windows&&n!==Tn;a++){const{nextN:l,offset:f,isZero:y,isNeg:x}=Li(n,a,s);if(n=l,!y){const k=e[f];i=i.add(x?k.negate():k)}}return Ti(n),i}getPrecomputes(t,e,n){let i=rs.get(e);return i||(i=this.precomputeWindow(e,t),t!==1&&(typeof n=="function"&&(i=n(i)),rs.set(e,i))),i}cached(t,e,n){const i=ss(t);return this.wNAF(i,this.getPrecomputes(i,t,n),e)}unsafe(t,e,n,i){const s=ss(t);return s===1?this._unsafeLadder(t,e,i):this.wNAFUnsafe(s,this.getPrecomputes(s,t,n),e,i)}createCache(t,e){bo(e,this.bits),vo.set(t,e),rs.delete(t)}hasCache(t){return ss(t)!==1}}function wc(r,t,e,n){let i=t,s=r.ZERO,a=r.ZERO;for(;e>Tn||n>Tn;)e&an&&(s=s.add(i)),n&an&&(a=a.add(i)),i=i.double(),e>>=an,n>>=an;return{p1:s,p2:a}}function So(r,t,e,n){mc(e,r),yc(n,t);const i=e.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const a=r.ZERO,l=oo(BigInt(i));let f=1;l>12?f=l-3:l>4?f=l-2:l>0&&(f=2);const y=Yn(f),x=new Array(Number(y)+1).fill(a),k=Math.floor((t.BITS-1)/f)*f;let S=a;for(let v=k;v>=0;v-=f){x.fill(a);for(let B=0;B<s;B++){const A=n[B],M=Number(A>>BigInt(v)&y);x[M]=x[M].add(e[B])}let _=a;for(let B=x.length-1,A=a;B>0;B--)A=A.add(x[B]),_=_.add(A);if(S=S.add(_),v!==0)for(let B=0;B<f;B++)S=S.double()}return S}function Ci(r,t,e){if(t){if(t.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return dc(t),t}else return pn(r,{isLE:e})}function _o(r,t,e={},n){if(n===void 0&&(n=r==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${r} CURVE object`);for(const f of["p","n","h"]){const y=t[f];if(!(typeof y=="bigint"&&y>Tn))throw new Error(`CURVE.${f} must be positive bigint`)}const i=Ci(t.p,e.Fp,n),s=Ci(t.n,e.Fn,n),l=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const f of l)if(!i.isValid(t[f]))throw new Error(`CURVE.${f} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tn=BigInt(0),re=BigInt(1),is=BigInt(2),bc=BigInt(8);function vc(r,t,e,n){const i=r.sqr(e),s=r.sqr(n),a=r.add(r.mul(t.a,i),s),l=r.add(r.ONE,r.mul(t.d,r.mul(i,s)));return r.eql(a,l)}function xc(r,t={}){const e=_o("edwards",r,t,t.FpFnLE),{Fp:n,Fn:i}=e;let s=e.CURVE;const{h:a}=s;Xn(t,{},{uvRatio:"function"});const l=is<<BigInt(i.BYTES*8)-re,f=A=>n.create(A),y=t.uvRatio||((A,M)=>{try{return{isValid:!0,value:n.sqrt(n.div(A,M))}}catch{return{isValid:!1,value:tn}}});if(!vc(n,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function x(A,M,U=!1){const L=U?re:tn;return vs("coordinate "+A,M,L,l),M}function k(A){if(!(A instanceof _))throw new Error("ExtendedPoint expected")}const S=dr((A,M)=>{const{X:U,Y:L,Z:q}=A,G=A.is0();M==null&&(M=G?bc:n.inv(q));const X=f(U*M),et=f(L*M),Q=n.mul(q,M);if(G)return{x:tn,y:re};if(Q!==re)throw new Error("invZ was invalid");return{x:X,y:et}}),v=dr(A=>{const{a:M,d:U}=s;if(A.is0())throw new Error("bad point: ZERO");const{X:L,Y:q,Z:G,T:X}=A,et=f(L*L),Q=f(q*q),T=f(G*G),W=f(T*T),K=f(et*M),$=f(T*f(K+Q)),d=f(W+f(U*f(et*Q)));if($!==d)throw new Error("bad point: equation left != right (1)");const o=f(L*q),c=f(G*X);if(o!==c)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(M,U,L,q){this.X=x("x",M),this.Y=x("y",U),this.Z=x("z",L,!0),this.T=x("t",q),Object.freeze(this)}static CURVE(){return s}static fromAffine(M){if(M instanceof _)throw new Error("extended point not allowed");const{x:U,y:L}=M||{};return x("x",U),x("y",L),new _(U,L,re,f(U*L))}static fromBytes(M,U=!1){const L=n.BYTES,{a:q,d:G}=s;M=Ii(Re(M,L,"point")),hn(U,"zip215");const X=Ii(M),et=M[L-1];X[L-1]=et&-129;const Q=Hn(X),T=U?l:n.ORDER;vs("point.y",Q,tn,T);const W=f(Q*Q),K=f(W-re),$=f(G*W-q);let{isValid:d,value:o}=y(K,$);if(!d)throw new Error("bad point: invalid y coordinate");const c=(o&re)===re,h=(et&128)!==0;if(!U&&o===tn&&h)throw new Error("bad point: x=0 and x_0=1");return h!==c&&(o=f(-o)),_.fromAffine({x:o,y:Q})}static fromHex(M,U=!1){return _.fromBytes(wt("point",M),U)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(M=8,U=!0){return B.createCache(this,M),U||this.multiply(is),this}assertValidity(){v(this)}equals(M){k(M);const{X:U,Y:L,Z:q}=this,{X:G,Y:X,Z:et}=M,Q=f(U*et),T=f(G*q),W=f(L*et),K=f(X*q);return Q===T&&W===K}is0(){return this.equals(_.ZERO)}negate(){return new _(f(-this.X),this.Y,this.Z,f(-this.T))}double(){const{a:M}=s,{X:U,Y:L,Z:q}=this,G=f(U*U),X=f(L*L),et=f(is*f(q*q)),Q=f(M*G),T=U+L,W=f(f(T*T)-G-X),K=Q+X,$=K-et,d=Q-X,o=f(W*$),c=f(K*d),h=f(W*d),g=f($*K);return new _(o,c,g,h)}add(M){k(M);const{a:U,d:L}=s,{X:q,Y:G,Z:X,T:et}=this,{X:Q,Y:T,Z:W,T:K}=M,$=f(q*Q),d=f(G*T),o=f(et*L*K),c=f(X*W),h=f((q+G)*(Q+T)-$-d),g=c-o,m=c+o,b=f(d-U*$),E=f(h*g),p=f(m*b),u=f(h*b),w=f(g*m);return new _(E,p,w,u)}subtract(M){return this.add(M.negate())}multiply(M){if(!i.isValidNot0(M))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:U,f:L}=B.cached(this,M,q=>cn(_,q));return cn(_,[U,L])[0]}multiplyUnsafe(M,U=_.ZERO){if(!i.isValid(M))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return M===tn?_.ZERO:this.is0()||M===re?this:B.unsafe(this,M,L=>cn(_,L),U)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return B.unsafe(this,s.n).is0()}toAffine(M){return S(this,M)}clearCofactor(){return a===re?this:this.multiplyUnsafe(a)}toBytes(){const{x:M,y:U}=this.toAffine(),L=n.toBytes(U);return L[L.length-1]|=M&re?128:0,L}toHex(){return un(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(M){return cn(_,M)}static msm(M,U){return So(_,i,M,U)}_setWindowSize(M){this.precompute(M)}toRawBytes(){return this.toBytes()}}_.BASE=new _(s.Gx,s.Gy,re,f(s.Gx*s.Gy)),_.ZERO=new _(tn,re,re,tn),_.Fp=n,_.Fn=i;const B=new xo(_,i.BITS);return _.BASE.precompute(8),_}function Sc(r,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');Xn(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=e,{BASE:i,Fp:s,Fn:a}=r,l=e.randomBytes||Us,f=e.adjustScalarBytes||(T=>T),y=e.domain||((T,W,K)=>{if(hn(K,"phflag"),W.length||K)throw new Error("Contexts/pre-hash are not supported");return T});function x(T){return a.create(Hn(T))}function k(T){const W=L.secretKey;T=wt("private key",T,W);const K=wt("hashed private key",t(T),2*W),$=f(K.slice(0,W)),d=K.slice(W,2*W),o=x($);return{head:$,prefix:d,scalar:o}}function S(T){const{head:W,prefix:K,scalar:$}=k(T),d=i.multiply($),o=d.toBytes();return{head:W,prefix:K,scalar:$,point:d,pointBytes:o}}function v(T){return S(T).pointBytes}function _(T=Uint8Array.of(),...W){const K=Ne(...W);return x(t(y(K,wt("context",T),!!n)))}function B(T,W,K={}){T=wt("message",T),n&&(T=n(T));const{prefix:$,scalar:d,pointBytes:o}=S(W),c=_(K.context,$,T),h=i.multiply(c).toBytes(),g=_(K.context,h,o,T),m=a.create(c+g*d);if(!a.isValid(m))throw new Error("sign failed: invalid s");const b=Ne(h,a.toBytes(m));return Re(b,L.signature,"result")}const A={zip215:!0};function M(T,W,K,$=A){const{context:d,zip215:o}=$,c=L.signature;T=wt("signature",T,c),W=wt("message",W),K=wt("publicKey",K,L.publicKey),o!==void 0&&hn(o,"zip215"),n&&(W=n(W));const h=c/2,g=T.subarray(0,h),m=Hn(T.subarray(h,c));let b,E,p;try{b=r.fromBytes(K,o),E=r.fromBytes(g,o),p=i.multiplyUnsafe(m)}catch{return!1}if(!o&&b.isSmallOrder())return!1;const u=_(d,E.toBytes(),b.toBytes(),W);return E.add(b.multiplyUnsafe(u)).subtract(p).clearCofactor().is0()}const U=s.BYTES,L={secretKey:U,publicKey:U,signature:2*U,seed:U};function q(T=l(L.seed)){return Re(T,L.seed,"seed")}function G(T){const W=Q.randomSecretKey(T);return{secretKey:W,publicKey:v(W)}}function X(T){return Zn(T)&&T.length===a.BYTES}function et(T,W){try{return!!r.fromBytes(T,W)}catch{return!1}}const Q={getExtendedPublicKey:S,randomSecretKey:q,isValidSecretKey:X,isValidPublicKey:et,toMontgomery(T){const{y:W}=r.fromBytes(T),K=L.publicKey,$=K===32;if(!$&&K!==57)throw new Error("only defined for 25519 and 448");const d=$?s.div(re+W,re-W):s.div(W-re,W+re);return s.toBytes(d)},toMontgomerySecret(T){const W=L.secretKey;Re(T,W);const K=t(T.subarray(0,W));return f(K).subarray(0,W)},randomPrivateKey:q,precompute(T=8,W=r.BASE){return W.precompute(T,!1)}};return Object.freeze({keygen:G,getPublicKey:v,sign:B,verify:M,utils:Q,Point:r,lengths:L})}function _c(r){const t={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=pn(t.n,r.nBitLength,!0),i={Fp:e,Fn:n,uvRatio:r.uvRatio},s={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:t,curveOpts:i,hash:r.hash,eddsaOpts:s}}function Ec(r,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:r,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function kc(r){const{CURVE:t,curveOpts:e,hash:n,eddsaOpts:i}=_c(r),s=xc(t,e),a=Sc(s,n,i);return Ec(r,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bc=BigInt(1),Ui=BigInt(2);BigInt(3);const Ac=BigInt(5),Ic=BigInt(8),qs=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Eo={p:qs,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Ic,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Mc(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),i=BigInt(80),s=qs,l=r*r%s*r%s,f=yt(l,Ui,s)*l%s,y=yt(f,Bc,s)*r%s,x=yt(y,Ac,s)*y%s,k=yt(x,t,s)*x%s,S=yt(k,e,s)*k%s,v=yt(S,n,s)*S%s,_=yt(v,i,s)*v%s,B=yt(_,i,s)*v%s,A=yt(B,t,s)*x%s;return{pow_p_5_8:yt(A,Ui,s)*r%s,b2:l}}function Rc(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const Oi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Lc(r,t){const e=qs,n=ee(t*t*t,e),i=ee(n*n*t,e),s=Mc(r*i).pow_p_5_8;let a=ee(r*n*s,e);const l=ee(t*a*a,e),f=a,y=ee(a*Oi,e),x=l===r,k=l===ee(-r,e),S=l===ee(-r*Oi,e);return x&&(a=f),(k||S)&&(a=y),lc(a,e)&&(a=ee(-a,e)),{isValid:x||k,value:a}}const Tc=pn(Eo.p,{isLE:!0}),Cc={...Eo,Fp:Tc,hash:rc,adjustScalarBytes:Rc,uvRatio:Lc},Jn=kc(Cc);var Fs={exports:{}};const Uc={},Oc=Object.freeze(Object.defineProperty({__proto__:null,default:Uc},Symbol.toStringTag,{value:"Module"})),Nc=Ts(Oc);Fs.exports;(function(r){(function(t,e){function n(d,o){if(!d)throw new Error(o||"Assertion failed")}function i(d,o){d.super_=o;var c=function(){};c.prototype=o.prototype,d.prototype=new c,d.prototype.constructor=d}function s(d,o,c){if(s.isBN(d))return d;this.negative=0,this.words=null,this.length=0,this.red=null,d!==null&&((o==="le"||o==="be")&&(c=o,o=10),this._init(d||0,o||10,c||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Nc.Buffer}catch{}s.isBN=function(o){return o instanceof s?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===s.wordSize&&Array.isArray(o.words)},s.max=function(o,c){return o.cmp(c)>0?o:c},s.min=function(o,c){return o.cmp(c)<0?o:c},s.prototype._init=function(o,c,h){if(typeof o=="number")return this._initNumber(o,c,h);if(typeof o=="object")return this._initArray(o,c,h);c==="hex"&&(c=16),n(c===(c|0)&&c>=2&&c<=36),o=o.toString().replace(/\s+/g,"");var g=0;o[0]==="-"&&(g++,this.negative=1),g<o.length&&(c===16?this._parseHex(o,g,h):(this._parseBase(o,c,g),h==="le"&&this._initArray(this.toArray(),c,h)))},s.prototype._initNumber=function(o,c,h){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},s.prototype._initArray=function(o,c,h){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var m,b,E=0;if(h==="be")for(g=o.length-1,m=0;g>=0;g-=3)b=o[g]|o[g-1]<<8|o[g-2]<<16,this.words[m]|=b<<E&67108863,this.words[m+1]=b>>>26-E&67108863,E+=24,E>=26&&(E-=26,m++);else if(h==="le")for(g=0,m=0;g<o.length;g+=3)b=o[g]|o[g+1]<<8|o[g+2]<<16,this.words[m]|=b<<E&67108863,this.words[m+1]=b>>>26-E&67108863,E+=24,E>=26&&(E-=26,m++);return this._strip()};function l(d,o){var c=d.charCodeAt(o);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;n(!1,"Invalid character in "+d)}function f(d,o,c){var h=l(d,c);return c-1>=o&&(h|=l(d,c-1)<<4),h}s.prototype._parseHex=function(o,c,h){this.length=Math.ceil((o.length-c)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var m=0,b=0,E;if(h==="be")for(g=o.length-1;g>=c;g-=2)E=f(o,c,g)<<m,this.words[b]|=E&67108863,m>=18?(m-=18,b+=1,this.words[b]|=E>>>26):m+=8;else{var p=o.length-c;for(g=p%2===0?c+1:c;g<o.length;g+=2)E=f(o,c,g)<<m,this.words[b]|=E&67108863,m>=18?(m-=18,b+=1,this.words[b]|=E>>>26):m+=8}this._strip()};function y(d,o,c,h){for(var g=0,m=0,b=Math.min(d.length,c),E=o;E<b;E++){var p=d.charCodeAt(E)-48;g*=h,p>=49?m=p-49+10:p>=17?m=p-17+10:m=p,n(p>=0&&m<h,"Invalid character"),g+=m}return g}s.prototype._parseBase=function(o,c,h){this.words=[0],this.length=1;for(var g=0,m=1;m<=67108863;m*=c)g++;g--,m=m/c|0;for(var b=o.length-h,E=b%g,p=Math.min(b,b-E)+h,u=0,w=h;w<p;w+=g)u=y(o,w,w+g,c),this.imuln(m),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(E!==0){var D=1;for(u=y(o,w,o.length,c),w=0;w<E;w++)D*=c;this.imuln(D),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(o){o.words=new Array(this.length);for(var c=0;c<this.length;c++)o.words[c]=this.words[c];o.length=this.length,o.negative=this.negative,o.red=this.red};function x(d,o){d.words=o.words,d.length=o.length,d.negative=o.negative,d.red=o.red}if(s.prototype._move=function(o){x(o,this)},s.prototype.clone=function(){var o=new s(null);return this.copy(o),o},s.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=k}catch{s.prototype.inspect=k}else s.prototype.inspect=k;function k(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(o,c){o=o||10,c=c|0||1;var h;if(o===16||o==="hex"){h="";for(var g=0,m=0,b=0;b<this.length;b++){var E=this.words[b],p=((E<<g|m)&16777215).toString(16);m=E>>>24-g&16777215,g+=2,g>=26&&(g-=26,b--),m!==0||b!==this.length-1?h=S[6-p.length]+p+h:h=p+h}for(m!==0&&(h=m.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(o===(o|0)&&o>=2&&o<=36){var u=v[o],w=_[o];h="";var D=this.clone();for(D.negative=0;!D.isZero();){var N=D.modrn(w).toString(o);D=D.idivn(w),D.isZero()?h=N+h:h=S[u-N.length]+N+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(o,c){return this.toArrayLike(a,o,c)}),s.prototype.toArray=function(o,c){return this.toArrayLike(Array,o,c)};var B=function(o,c){return o.allocUnsafe?o.allocUnsafe(c):new o(c)};s.prototype.toArrayLike=function(o,c,h){this._strip();var g=this.byteLength(),m=h||Math.max(1,g);n(g<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0");var b=B(o,m),E=c==="le"?"LE":"BE";return this["_toArrayLike"+E](b,g),b},s.prototype._toArrayLikeLE=function(o,c){for(var h=0,g=0,m=0,b=0;m<this.length;m++){var E=this.words[m]<<b|g;o[h++]=E&255,h<o.length&&(o[h++]=E>>8&255),h<o.length&&(o[h++]=E>>16&255),b===6?(h<o.length&&(o[h++]=E>>24&255),g=0,b=0):(g=E>>>24,b+=2)}if(h<o.length)for(o[h++]=g;h<o.length;)o[h++]=0},s.prototype._toArrayLikeBE=function(o,c){for(var h=o.length-1,g=0,m=0,b=0;m<this.length;m++){var E=this.words[m]<<b|g;o[h--]=E&255,h>=0&&(o[h--]=E>>8&255),h>=0&&(o[h--]=E>>16&255),b===6?(h>=0&&(o[h--]=E>>24&255),g=0,b=0):(g=E>>>24,b+=2)}if(h>=0)for(o[h--]=g;h>=0;)o[h--]=0},Math.clz32?s.prototype._countBits=function(o){return 32-Math.clz32(o)}:s.prototype._countBits=function(o){var c=o,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},s.prototype._zeroBits=function(o){if(o===0)return 26;var c=o,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},s.prototype.bitLength=function(){var o=this.words[this.length-1],c=this._countBits(o);return(this.length-1)*26+c};function A(d){for(var o=new Array(d.bitLength()),c=0;c<o.length;c++){var h=c/26|0,g=c%26;o[c]=d.words[h]>>>g&1}return o}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(o+=h,h!==26)break}return o},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},s.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var c=0;c<o.length;c++)this.words[c]=this.words[c]|o.words[c];return this._strip()},s.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},s.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},s.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},s.prototype.iuand=function(o){var c;this.length>o.length?c=o:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&o.words[h];return this.length=c.length,this._strip()},s.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},s.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},s.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},s.prototype.iuxor=function(o){var c,h;this.length>o.length?(c=this,h=o):(c=o,h=this);for(var g=0;g<h.length;g++)this.words[g]=c.words[g]^h.words[g];if(this!==c)for(;g<c.length;g++)this.words[g]=c.words[g];return this.length=c.length,this._strip()},s.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},s.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},s.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},s.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var c=Math.ceil(o/26)|0,h=o%26;this._expand(c),h>0&&c--;for(var g=0;g<c;g++)this.words[g]=~this.words[g]&67108863;return h>0&&(this.words[g]=~this.words[g]&67108863>>26-h),this._strip()},s.prototype.notn=function(o){return this.clone().inotn(o)},s.prototype.setn=function(o,c){n(typeof o=="number"&&o>=0);var h=o/26|0,g=o%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<g:this.words[h]=this.words[h]&~(1<<g),this._strip()},s.prototype.iadd=function(o){var c;if(this.negative!==0&&o.negative===0)return this.negative=0,c=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,c=this.isub(o),o.negative=1,c._normSign();var h,g;this.length>o.length?(h=this,g=o):(h=o,g=this);for(var m=0,b=0;b<g.length;b++)c=(h.words[b]|0)+(g.words[b]|0)+m,this.words[b]=c&67108863,m=c>>>26;for(;m!==0&&b<h.length;b++)c=(h.words[b]|0)+m,this.words[b]=c&67108863,m=c>>>26;if(this.length=h.length,m!==0)this.words[this.length]=m,this.length++;else if(h!==this)for(;b<h.length;b++)this.words[b]=h.words[b];return this},s.prototype.add=function(o){var c;return o.negative!==0&&this.negative===0?(o.negative=0,c=this.sub(o),o.negative^=1,c):o.negative===0&&this.negative!==0?(this.negative=0,c=o.sub(this),this.negative=1,c):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},s.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var c=this.iadd(o);return o.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var h=this.cmp(o);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,m;h>0?(g=this,m=o):(g=o,m=this);for(var b=0,E=0;E<m.length;E++)c=(g.words[E]|0)-(m.words[E]|0)+b,b=c>>26,this.words[E]=c&67108863;for(;b!==0&&E<g.length;E++)c=(g.words[E]|0)+b,b=c>>26,this.words[E]=c&67108863;if(b===0&&E<g.length&&g!==this)for(;E<g.length;E++)this.words[E]=g.words[E];return this.length=Math.max(this.length,E),g!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(o){return this.clone().isub(o)};function M(d,o,c){c.negative=o.negative^d.negative;var h=d.length+o.length|0;c.length=h,h=h-1|0;var g=d.words[0]|0,m=o.words[0]|0,b=g*m,E=b&67108863,p=b/67108864|0;c.words[0]=E;for(var u=1;u<h;u++){for(var w=p>>>26,D=p&67108863,N=Math.min(u,o.length-1),H=Math.max(0,u-d.length+1);H<=N;H++){var ot=u-H|0;g=d.words[ot]|0,m=o.words[H]|0,b=g*m+D,w+=b/67108864|0,D=b&67108863}c.words[u]=D|0,p=w|0}return p!==0?c.words[u]=p|0:c.length--,c._strip()}var U=function(o,c,h){var g=o.words,m=c.words,b=h.words,E=0,p,u,w,D=g[0]|0,N=D&8191,H=D>>>13,ot=g[1]|0,rt=ot&8191,tt=ot>>>13,ne=g[2]|0,ht=ne&8191,gt=ne>>>13,Fn=g[3]|0,vt=Fn&8191,xt=Fn>>>13,ci=g[4]|0,St=ci&8191,_t=ci>>>13,ui=g[5]|0,Et=ui&8191,kt=ui>>>13,fi=g[6]|0,Bt=fi&8191,At=fi>>>13,li=g[7]|0,It=li&8191,Mt=li>>>13,hi=g[8]|0,Rt=hi&8191,Lt=hi>>>13,di=g[9]|0,Tt=di&8191,Ct=di>>>13,gi=m[0]|0,Ut=gi&8191,Ot=gi>>>13,pi=m[1]|0,Nt=pi&8191,Pt=pi>>>13,mi=m[2]|0,qt=mi&8191,Ft=mi>>>13,yi=m[3]|0,zt=yi&8191,Dt=yi>>>13,wi=m[4]|0,Kt=wi&8191,Ht=wi>>>13,bi=m[5]|0,$t=bi&8191,Wt=bi>>>13,vi=m[6]|0,Vt=vi&8191,jt=vi>>>13,xi=m[7]|0,Gt=xi&8191,Zt=xi>>>13,Si=m[8]|0,Yt=Si&8191,Xt=Si>>>13,_i=m[9]|0,Jt=_i&8191,Qt=_i>>>13;h.negative=o.negative^c.negative,h.length=19,p=Math.imul(N,Ut),u=Math.imul(N,Ot),u=u+Math.imul(H,Ut)|0,w=Math.imul(H,Ot);var Or=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Or>>>26)|0,Or&=67108863,p=Math.imul(rt,Ut),u=Math.imul(rt,Ot),u=u+Math.imul(tt,Ut)|0,w=Math.imul(tt,Ot),p=p+Math.imul(N,Nt)|0,u=u+Math.imul(N,Pt)|0,u=u+Math.imul(H,Nt)|0,w=w+Math.imul(H,Pt)|0;var Nr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,p=Math.imul(ht,Ut),u=Math.imul(ht,Ot),u=u+Math.imul(gt,Ut)|0,w=Math.imul(gt,Ot),p=p+Math.imul(rt,Nt)|0,u=u+Math.imul(rt,Pt)|0,u=u+Math.imul(tt,Nt)|0,w=w+Math.imul(tt,Pt)|0,p=p+Math.imul(N,qt)|0,u=u+Math.imul(N,Ft)|0,u=u+Math.imul(H,qt)|0,w=w+Math.imul(H,Ft)|0;var Pr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,p=Math.imul(vt,Ut),u=Math.imul(vt,Ot),u=u+Math.imul(xt,Ut)|0,w=Math.imul(xt,Ot),p=p+Math.imul(ht,Nt)|0,u=u+Math.imul(ht,Pt)|0,u=u+Math.imul(gt,Nt)|0,w=w+Math.imul(gt,Pt)|0,p=p+Math.imul(rt,qt)|0,u=u+Math.imul(rt,Ft)|0,u=u+Math.imul(tt,qt)|0,w=w+Math.imul(tt,Ft)|0,p=p+Math.imul(N,zt)|0,u=u+Math.imul(N,Dt)|0,u=u+Math.imul(H,zt)|0,w=w+Math.imul(H,Dt)|0;var qr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(qr>>>26)|0,qr&=67108863,p=Math.imul(St,Ut),u=Math.imul(St,Ot),u=u+Math.imul(_t,Ut)|0,w=Math.imul(_t,Ot),p=p+Math.imul(vt,Nt)|0,u=u+Math.imul(vt,Pt)|0,u=u+Math.imul(xt,Nt)|0,w=w+Math.imul(xt,Pt)|0,p=p+Math.imul(ht,qt)|0,u=u+Math.imul(ht,Ft)|0,u=u+Math.imul(gt,qt)|0,w=w+Math.imul(gt,Ft)|0,p=p+Math.imul(rt,zt)|0,u=u+Math.imul(rt,Dt)|0,u=u+Math.imul(tt,zt)|0,w=w+Math.imul(tt,Dt)|0,p=p+Math.imul(N,Kt)|0,u=u+Math.imul(N,Ht)|0,u=u+Math.imul(H,Kt)|0,w=w+Math.imul(H,Ht)|0;var Fr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,p=Math.imul(Et,Ut),u=Math.imul(Et,Ot),u=u+Math.imul(kt,Ut)|0,w=Math.imul(kt,Ot),p=p+Math.imul(St,Nt)|0,u=u+Math.imul(St,Pt)|0,u=u+Math.imul(_t,Nt)|0,w=w+Math.imul(_t,Pt)|0,p=p+Math.imul(vt,qt)|0,u=u+Math.imul(vt,Ft)|0,u=u+Math.imul(xt,qt)|0,w=w+Math.imul(xt,Ft)|0,p=p+Math.imul(ht,zt)|0,u=u+Math.imul(ht,Dt)|0,u=u+Math.imul(gt,zt)|0,w=w+Math.imul(gt,Dt)|0,p=p+Math.imul(rt,Kt)|0,u=u+Math.imul(rt,Ht)|0,u=u+Math.imul(tt,Kt)|0,w=w+Math.imul(tt,Ht)|0,p=p+Math.imul(N,$t)|0,u=u+Math.imul(N,Wt)|0,u=u+Math.imul(H,$t)|0,w=w+Math.imul(H,Wt)|0;var zr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(zr>>>26)|0,zr&=67108863,p=Math.imul(Bt,Ut),u=Math.imul(Bt,Ot),u=u+Math.imul(At,Ut)|0,w=Math.imul(At,Ot),p=p+Math.imul(Et,Nt)|0,u=u+Math.imul(Et,Pt)|0,u=u+Math.imul(kt,Nt)|0,w=w+Math.imul(kt,Pt)|0,p=p+Math.imul(St,qt)|0,u=u+Math.imul(St,Ft)|0,u=u+Math.imul(_t,qt)|0,w=w+Math.imul(_t,Ft)|0,p=p+Math.imul(vt,zt)|0,u=u+Math.imul(vt,Dt)|0,u=u+Math.imul(xt,zt)|0,w=w+Math.imul(xt,Dt)|0,p=p+Math.imul(ht,Kt)|0,u=u+Math.imul(ht,Ht)|0,u=u+Math.imul(gt,Kt)|0,w=w+Math.imul(gt,Ht)|0,p=p+Math.imul(rt,$t)|0,u=u+Math.imul(rt,Wt)|0,u=u+Math.imul(tt,$t)|0,w=w+Math.imul(tt,Wt)|0,p=p+Math.imul(N,Vt)|0,u=u+Math.imul(N,jt)|0,u=u+Math.imul(H,Vt)|0,w=w+Math.imul(H,jt)|0;var Dr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,p=Math.imul(It,Ut),u=Math.imul(It,Ot),u=u+Math.imul(Mt,Ut)|0,w=Math.imul(Mt,Ot),p=p+Math.imul(Bt,Nt)|0,u=u+Math.imul(Bt,Pt)|0,u=u+Math.imul(At,Nt)|0,w=w+Math.imul(At,Pt)|0,p=p+Math.imul(Et,qt)|0,u=u+Math.imul(Et,Ft)|0,u=u+Math.imul(kt,qt)|0,w=w+Math.imul(kt,Ft)|0,p=p+Math.imul(St,zt)|0,u=u+Math.imul(St,Dt)|0,u=u+Math.imul(_t,zt)|0,w=w+Math.imul(_t,Dt)|0,p=p+Math.imul(vt,Kt)|0,u=u+Math.imul(vt,Ht)|0,u=u+Math.imul(xt,Kt)|0,w=w+Math.imul(xt,Ht)|0,p=p+Math.imul(ht,$t)|0,u=u+Math.imul(ht,Wt)|0,u=u+Math.imul(gt,$t)|0,w=w+Math.imul(gt,Wt)|0,p=p+Math.imul(rt,Vt)|0,u=u+Math.imul(rt,jt)|0,u=u+Math.imul(tt,Vt)|0,w=w+Math.imul(tt,jt)|0,p=p+Math.imul(N,Gt)|0,u=u+Math.imul(N,Zt)|0,u=u+Math.imul(H,Gt)|0,w=w+Math.imul(H,Zt)|0;var Kr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,p=Math.imul(Rt,Ut),u=Math.imul(Rt,Ot),u=u+Math.imul(Lt,Ut)|0,w=Math.imul(Lt,Ot),p=p+Math.imul(It,Nt)|0,u=u+Math.imul(It,Pt)|0,u=u+Math.imul(Mt,Nt)|0,w=w+Math.imul(Mt,Pt)|0,p=p+Math.imul(Bt,qt)|0,u=u+Math.imul(Bt,Ft)|0,u=u+Math.imul(At,qt)|0,w=w+Math.imul(At,Ft)|0,p=p+Math.imul(Et,zt)|0,u=u+Math.imul(Et,Dt)|0,u=u+Math.imul(kt,zt)|0,w=w+Math.imul(kt,Dt)|0,p=p+Math.imul(St,Kt)|0,u=u+Math.imul(St,Ht)|0,u=u+Math.imul(_t,Kt)|0,w=w+Math.imul(_t,Ht)|0,p=p+Math.imul(vt,$t)|0,u=u+Math.imul(vt,Wt)|0,u=u+Math.imul(xt,$t)|0,w=w+Math.imul(xt,Wt)|0,p=p+Math.imul(ht,Vt)|0,u=u+Math.imul(ht,jt)|0,u=u+Math.imul(gt,Vt)|0,w=w+Math.imul(gt,jt)|0,p=p+Math.imul(rt,Gt)|0,u=u+Math.imul(rt,Zt)|0,u=u+Math.imul(tt,Gt)|0,w=w+Math.imul(tt,Zt)|0,p=p+Math.imul(N,Yt)|0,u=u+Math.imul(N,Xt)|0,u=u+Math.imul(H,Yt)|0,w=w+Math.imul(H,Xt)|0;var Hr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,p=Math.imul(Tt,Ut),u=Math.imul(Tt,Ot),u=u+Math.imul(Ct,Ut)|0,w=Math.imul(Ct,Ot),p=p+Math.imul(Rt,Nt)|0,u=u+Math.imul(Rt,Pt)|0,u=u+Math.imul(Lt,Nt)|0,w=w+Math.imul(Lt,Pt)|0,p=p+Math.imul(It,qt)|0,u=u+Math.imul(It,Ft)|0,u=u+Math.imul(Mt,qt)|0,w=w+Math.imul(Mt,Ft)|0,p=p+Math.imul(Bt,zt)|0,u=u+Math.imul(Bt,Dt)|0,u=u+Math.imul(At,zt)|0,w=w+Math.imul(At,Dt)|0,p=p+Math.imul(Et,Kt)|0,u=u+Math.imul(Et,Ht)|0,u=u+Math.imul(kt,Kt)|0,w=w+Math.imul(kt,Ht)|0,p=p+Math.imul(St,$t)|0,u=u+Math.imul(St,Wt)|0,u=u+Math.imul(_t,$t)|0,w=w+Math.imul(_t,Wt)|0,p=p+Math.imul(vt,Vt)|0,u=u+Math.imul(vt,jt)|0,u=u+Math.imul(xt,Vt)|0,w=w+Math.imul(xt,jt)|0,p=p+Math.imul(ht,Gt)|0,u=u+Math.imul(ht,Zt)|0,u=u+Math.imul(gt,Gt)|0,w=w+Math.imul(gt,Zt)|0,p=p+Math.imul(rt,Yt)|0,u=u+Math.imul(rt,Xt)|0,u=u+Math.imul(tt,Yt)|0,w=w+Math.imul(tt,Xt)|0,p=p+Math.imul(N,Jt)|0,u=u+Math.imul(N,Qt)|0,u=u+Math.imul(H,Jt)|0,w=w+Math.imul(H,Qt)|0;var $r=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+($r>>>26)|0,$r&=67108863,p=Math.imul(Tt,Nt),u=Math.imul(Tt,Pt),u=u+Math.imul(Ct,Nt)|0,w=Math.imul(Ct,Pt),p=p+Math.imul(Rt,qt)|0,u=u+Math.imul(Rt,Ft)|0,u=u+Math.imul(Lt,qt)|0,w=w+Math.imul(Lt,Ft)|0,p=p+Math.imul(It,zt)|0,u=u+Math.imul(It,Dt)|0,u=u+Math.imul(Mt,zt)|0,w=w+Math.imul(Mt,Dt)|0,p=p+Math.imul(Bt,Kt)|0,u=u+Math.imul(Bt,Ht)|0,u=u+Math.imul(At,Kt)|0,w=w+Math.imul(At,Ht)|0,p=p+Math.imul(Et,$t)|0,u=u+Math.imul(Et,Wt)|0,u=u+Math.imul(kt,$t)|0,w=w+Math.imul(kt,Wt)|0,p=p+Math.imul(St,Vt)|0,u=u+Math.imul(St,jt)|0,u=u+Math.imul(_t,Vt)|0,w=w+Math.imul(_t,jt)|0,p=p+Math.imul(vt,Gt)|0,u=u+Math.imul(vt,Zt)|0,u=u+Math.imul(xt,Gt)|0,w=w+Math.imul(xt,Zt)|0,p=p+Math.imul(ht,Yt)|0,u=u+Math.imul(ht,Xt)|0,u=u+Math.imul(gt,Yt)|0,w=w+Math.imul(gt,Xt)|0,p=p+Math.imul(rt,Jt)|0,u=u+Math.imul(rt,Qt)|0,u=u+Math.imul(tt,Jt)|0,w=w+Math.imul(tt,Qt)|0;var Wr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,p=Math.imul(Tt,qt),u=Math.imul(Tt,Ft),u=u+Math.imul(Ct,qt)|0,w=Math.imul(Ct,Ft),p=p+Math.imul(Rt,zt)|0,u=u+Math.imul(Rt,Dt)|0,u=u+Math.imul(Lt,zt)|0,w=w+Math.imul(Lt,Dt)|0,p=p+Math.imul(It,Kt)|0,u=u+Math.imul(It,Ht)|0,u=u+Math.imul(Mt,Kt)|0,w=w+Math.imul(Mt,Ht)|0,p=p+Math.imul(Bt,$t)|0,u=u+Math.imul(Bt,Wt)|0,u=u+Math.imul(At,$t)|0,w=w+Math.imul(At,Wt)|0,p=p+Math.imul(Et,Vt)|0,u=u+Math.imul(Et,jt)|0,u=u+Math.imul(kt,Vt)|0,w=w+Math.imul(kt,jt)|0,p=p+Math.imul(St,Gt)|0,u=u+Math.imul(St,Zt)|0,u=u+Math.imul(_t,Gt)|0,w=w+Math.imul(_t,Zt)|0,p=p+Math.imul(vt,Yt)|0,u=u+Math.imul(vt,Xt)|0,u=u+Math.imul(xt,Yt)|0,w=w+Math.imul(xt,Xt)|0,p=p+Math.imul(ht,Jt)|0,u=u+Math.imul(ht,Qt)|0,u=u+Math.imul(gt,Jt)|0,w=w+Math.imul(gt,Qt)|0;var Vr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,p=Math.imul(Tt,zt),u=Math.imul(Tt,Dt),u=u+Math.imul(Ct,zt)|0,w=Math.imul(Ct,Dt),p=p+Math.imul(Rt,Kt)|0,u=u+Math.imul(Rt,Ht)|0,u=u+Math.imul(Lt,Kt)|0,w=w+Math.imul(Lt,Ht)|0,p=p+Math.imul(It,$t)|0,u=u+Math.imul(It,Wt)|0,u=u+Math.imul(Mt,$t)|0,w=w+Math.imul(Mt,Wt)|0,p=p+Math.imul(Bt,Vt)|0,u=u+Math.imul(Bt,jt)|0,u=u+Math.imul(At,Vt)|0,w=w+Math.imul(At,jt)|0,p=p+Math.imul(Et,Gt)|0,u=u+Math.imul(Et,Zt)|0,u=u+Math.imul(kt,Gt)|0,w=w+Math.imul(kt,Zt)|0,p=p+Math.imul(St,Yt)|0,u=u+Math.imul(St,Xt)|0,u=u+Math.imul(_t,Yt)|0,w=w+Math.imul(_t,Xt)|0,p=p+Math.imul(vt,Jt)|0,u=u+Math.imul(vt,Qt)|0,u=u+Math.imul(xt,Jt)|0,w=w+Math.imul(xt,Qt)|0;var jr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(jr>>>26)|0,jr&=67108863,p=Math.imul(Tt,Kt),u=Math.imul(Tt,Ht),u=u+Math.imul(Ct,Kt)|0,w=Math.imul(Ct,Ht),p=p+Math.imul(Rt,$t)|0,u=u+Math.imul(Rt,Wt)|0,u=u+Math.imul(Lt,$t)|0,w=w+Math.imul(Lt,Wt)|0,p=p+Math.imul(It,Vt)|0,u=u+Math.imul(It,jt)|0,u=u+Math.imul(Mt,Vt)|0,w=w+Math.imul(Mt,jt)|0,p=p+Math.imul(Bt,Gt)|0,u=u+Math.imul(Bt,Zt)|0,u=u+Math.imul(At,Gt)|0,w=w+Math.imul(At,Zt)|0,p=p+Math.imul(Et,Yt)|0,u=u+Math.imul(Et,Xt)|0,u=u+Math.imul(kt,Yt)|0,w=w+Math.imul(kt,Xt)|0,p=p+Math.imul(St,Jt)|0,u=u+Math.imul(St,Qt)|0,u=u+Math.imul(_t,Jt)|0,w=w+Math.imul(_t,Qt)|0;var Gr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,p=Math.imul(Tt,$t),u=Math.imul(Tt,Wt),u=u+Math.imul(Ct,$t)|0,w=Math.imul(Ct,Wt),p=p+Math.imul(Rt,Vt)|0,u=u+Math.imul(Rt,jt)|0,u=u+Math.imul(Lt,Vt)|0,w=w+Math.imul(Lt,jt)|0,p=p+Math.imul(It,Gt)|0,u=u+Math.imul(It,Zt)|0,u=u+Math.imul(Mt,Gt)|0,w=w+Math.imul(Mt,Zt)|0,p=p+Math.imul(Bt,Yt)|0,u=u+Math.imul(Bt,Xt)|0,u=u+Math.imul(At,Yt)|0,w=w+Math.imul(At,Xt)|0,p=p+Math.imul(Et,Jt)|0,u=u+Math.imul(Et,Qt)|0,u=u+Math.imul(kt,Jt)|0,w=w+Math.imul(kt,Qt)|0;var Zr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,p=Math.imul(Tt,Vt),u=Math.imul(Tt,jt),u=u+Math.imul(Ct,Vt)|0,w=Math.imul(Ct,jt),p=p+Math.imul(Rt,Gt)|0,u=u+Math.imul(Rt,Zt)|0,u=u+Math.imul(Lt,Gt)|0,w=w+Math.imul(Lt,Zt)|0,p=p+Math.imul(It,Yt)|0,u=u+Math.imul(It,Xt)|0,u=u+Math.imul(Mt,Yt)|0,w=w+Math.imul(Mt,Xt)|0,p=p+Math.imul(Bt,Jt)|0,u=u+Math.imul(Bt,Qt)|0,u=u+Math.imul(At,Jt)|0,w=w+Math.imul(At,Qt)|0;var Yr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,p=Math.imul(Tt,Gt),u=Math.imul(Tt,Zt),u=u+Math.imul(Ct,Gt)|0,w=Math.imul(Ct,Zt),p=p+Math.imul(Rt,Yt)|0,u=u+Math.imul(Rt,Xt)|0,u=u+Math.imul(Lt,Yt)|0,w=w+Math.imul(Lt,Xt)|0,p=p+Math.imul(It,Jt)|0,u=u+Math.imul(It,Qt)|0,u=u+Math.imul(Mt,Jt)|0,w=w+Math.imul(Mt,Qt)|0;var Xr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,p=Math.imul(Tt,Yt),u=Math.imul(Tt,Xt),u=u+Math.imul(Ct,Yt)|0,w=Math.imul(Ct,Xt),p=p+Math.imul(Rt,Jt)|0,u=u+Math.imul(Rt,Qt)|0,u=u+Math.imul(Lt,Jt)|0,w=w+Math.imul(Lt,Qt)|0;var Jr=(E+p|0)+((u&8191)<<13)|0;E=(w+(u>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,p=Math.imul(Tt,Jt),u=Math.imul(Tt,Qt),u=u+Math.imul(Ct,Jt)|0,w=Math.imul(Ct,Qt);var Qr=(E+p|0)+((u&8191)<<13)|0;return E=(w+(u>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,b[0]=Or,b[1]=Nr,b[2]=Pr,b[3]=qr,b[4]=Fr,b[5]=zr,b[6]=Dr,b[7]=Kr,b[8]=Hr,b[9]=$r,b[10]=Wr,b[11]=Vr,b[12]=jr,b[13]=Gr,b[14]=Zr,b[15]=Yr,b[16]=Xr,b[17]=Jr,b[18]=Qr,E!==0&&(b[19]=E,h.length++),h};Math.imul||(U=M);function L(d,o,c){c.negative=o.negative^d.negative,c.length=d.length+o.length;for(var h=0,g=0,m=0;m<c.length-1;m++){var b=g;g=0;for(var E=h&67108863,p=Math.min(m,o.length-1),u=Math.max(0,m-d.length+1);u<=p;u++){var w=m-u,D=d.words[w]|0,N=o.words[u]|0,H=D*N,ot=H&67108863;b=b+(H/67108864|0)|0,ot=ot+E|0,E=ot&67108863,b=b+(ot>>>26)|0,g+=b>>>26,b&=67108863}c.words[m]=E,h=b,b=g}return h!==0?c.words[m]=h:c.length--,c._strip()}function q(d,o,c){return L(d,o,c)}s.prototype.mulTo=function(o,c){var h,g=this.length+o.length;return this.length===10&&o.length===10?h=U(this,o,c):g<63?h=M(this,o,c):g<1024?h=L(this,o,c):h=q(this,o,c),h},s.prototype.mul=function(o){var c=new s(null);return c.words=new Array(this.length+o.length),this.mulTo(o,c)},s.prototype.mulf=function(o){var c=new s(null);return c.words=new Array(this.length+o.length),q(this,o,c)},s.prototype.imul=function(o){return this.clone().mulTo(o,this)},s.prototype.imuln=function(o){var c=o<0;c&&(o=-o),n(typeof o=="number"),n(o<67108864);for(var h=0,g=0;g<this.length;g++){var m=(this.words[g]|0)*o,b=(m&67108863)+(h&67108863);h>>=26,h+=m/67108864|0,h+=b>>>26,this.words[g]=b&67108863}return h!==0&&(this.words[g]=h,this.length++),this.length=o===0?1:this.length,c?this.ineg():this},s.prototype.muln=function(o){return this.clone().imuln(o)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(o){var c=A(o);if(c.length===0)return new s(1);for(var h=this,g=0;g<c.length&&c[g]===0;g++,h=h.sqr());if(++g<c.length)for(var m=h.sqr();g<c.length;g++,m=m.sqr())c[g]!==0&&(h=h.mul(m));return h},s.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,g=67108863>>>26-c<<26-c,m;if(c!==0){var b=0;for(m=0;m<this.length;m++){var E=this.words[m]&g,p=(this.words[m]|0)-E<<c;this.words[m]=p|b,b=E>>>26-c}b&&(this.words[m]=b,this.length++)}if(h!==0){for(m=this.length-1;m>=0;m--)this.words[m+h]=this.words[m];for(m=0;m<h;m++)this.words[m]=0;this.length+=h}return this._strip()},s.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},s.prototype.iushrn=function(o,c,h){n(typeof o=="number"&&o>=0);var g;c?g=(c-c%26)/26:g=0;var m=o%26,b=Math.min((o-m)/26,this.length),E=67108863^67108863>>>m<<m,p=h;if(g-=b,g=Math.max(0,g),p){for(var u=0;u<b;u++)p.words[u]=this.words[u];p.length=b}if(b!==0)if(this.length>b)for(this.length-=b,u=0;u<this.length;u++)this.words[u]=this.words[u+b];else this.words[0]=0,this.length=1;var w=0;for(u=this.length-1;u>=0&&(w!==0||u>=g);u--){var D=this.words[u]|0;this.words[u]=w<<26-m|D>>>m,w=D&E}return p&&w!==0&&(p.words[p.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(o,c,h){return n(this.negative===0),this.iushrn(o,c,h)},s.prototype.shln=function(o){return this.clone().ishln(o)},s.prototype.ushln=function(o){return this.clone().iushln(o)},s.prototype.shrn=function(o){return this.clone().ishrn(o)},s.prototype.ushrn=function(o){return this.clone().iushrn(o)},s.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26,g=1<<c;if(this.length<=h)return!1;var m=this.words[h];return!!(m&g)},s.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var c=o%26,h=(o-c)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var g=67108863^67108863>>>c<<c;this.words[this.length-1]&=g}return this._strip()},s.prototype.maskn=function(o){return this.clone().imaskn(o)},s.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},s.prototype._iaddn=function(o){this.words[0]+=o;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},s.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},s.prototype.addn=function(o){return this.clone().iaddn(o)},s.prototype.subn=function(o){return this.clone().isubn(o)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(o,c,h){var g=o.length+h,m;this._expand(g);var b,E=0;for(m=0;m<o.length;m++){b=(this.words[m+h]|0)+E;var p=(o.words[m]|0)*c;b-=p&67108863,E=(b>>26)-(p/67108864|0),this.words[m+h]=b&67108863}for(;m<this.length-h;m++)b=(this.words[m+h]|0)+E,E=b>>26,this.words[m+h]=b&67108863;if(E===0)return this._strip();for(n(E===-1),E=0,m=0;m<this.length;m++)b=-(this.words[m]|0)+E,E=b>>26,this.words[m]=b&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(o,c){var h=this.length-o.length,g=this.clone(),m=o,b=m.words[m.length-1]|0,E=this._countBits(b);h=26-E,h!==0&&(m=m.ushln(h),g.iushln(h),b=m.words[m.length-1]|0);var p=g.length-m.length,u;if(c!=="mod"){u=new s(null),u.length=p+1,u.words=new Array(u.length);for(var w=0;w<u.length;w++)u.words[w]=0}var D=g.clone()._ishlnsubmul(m,1,p);D.negative===0&&(g=D,u&&(u.words[p]=1));for(var N=p-1;N>=0;N--){var H=(g.words[m.length+N]|0)*67108864+(g.words[m.length+N-1]|0);for(H=Math.min(H/b|0,67108863),g._ishlnsubmul(m,H,N);g.negative!==0;)H--,g.negative=0,g._ishlnsubmul(m,1,N),g.isZero()||(g.negative^=1);u&&(u.words[N]=H)}return u&&u._strip(),g._strip(),c!=="div"&&h!==0&&g.iushrn(h),{div:u||null,mod:g}},s.prototype.divmod=function(o,c,h){if(n(!o.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var g,m,b;return this.negative!==0&&o.negative===0?(b=this.neg().divmod(o,c),c!=="mod"&&(g=b.div.neg()),c!=="div"&&(m=b.mod.neg(),h&&m.negative!==0&&m.iadd(o)),{div:g,mod:m}):this.negative===0&&o.negative!==0?(b=this.divmod(o.neg(),c),c!=="mod"&&(g=b.div.neg()),{div:g,mod:b.mod}):this.negative&o.negative?(b=this.neg().divmod(o.neg(),c),c!=="div"&&(m=b.mod.neg(),h&&m.negative!==0&&m.isub(o)),{div:b.div,mod:m}):o.length>this.length||this.cmp(o)<0?{div:new s(0),mod:this}:o.length===1?c==="div"?{div:this.divn(o.words[0]),mod:null}:c==="mod"?{div:null,mod:new s(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new s(this.modrn(o.words[0]))}:this._wordDiv(o,c)},s.prototype.div=function(o){return this.divmod(o,"div",!1).div},s.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},s.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},s.prototype.divRound=function(o){var c=this.divmod(o);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(o):c.mod,g=o.ushrn(1),m=o.andln(1),b=h.cmp(g);return b<0||m===1&&b===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},s.prototype.modrn=function(o){var c=o<0;c&&(o=-o),n(o<=67108863);for(var h=(1<<26)%o,g=0,m=this.length-1;m>=0;m--)g=(h*g+(this.words[m]|0))%o;return c?-g:g},s.prototype.modn=function(o){return this.modrn(o)},s.prototype.idivn=function(o){var c=o<0;c&&(o=-o),n(o<=67108863);for(var h=0,g=this.length-1;g>=0;g--){var m=(this.words[g]|0)+h*67108864;this.words[g]=m/o|0,h=m%o}return this._strip(),c?this.ineg():this},s.prototype.divn=function(o){return this.clone().idivn(o)},s.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var g=new s(1),m=new s(0),b=new s(0),E=new s(1),p=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++p;for(var u=h.clone(),w=c.clone();!c.isZero();){for(var D=0,N=1;!(c.words[0]&N)&&D<26;++D,N<<=1);if(D>0)for(c.iushrn(D);D-- >0;)(g.isOdd()||m.isOdd())&&(g.iadd(u),m.isub(w)),g.iushrn(1),m.iushrn(1);for(var H=0,ot=1;!(h.words[0]&ot)&&H<26;++H,ot<<=1);if(H>0)for(h.iushrn(H);H-- >0;)(b.isOdd()||E.isOdd())&&(b.iadd(u),E.isub(w)),b.iushrn(1),E.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(b),m.isub(E)):(h.isub(c),b.isub(g),E.isub(m))}return{a:b,b:E,gcd:h.iushln(p)}},s.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var c=this,h=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var g=new s(1),m=new s(0),b=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var E=0,p=1;!(c.words[0]&p)&&E<26;++E,p<<=1);if(E>0)for(c.iushrn(E);E-- >0;)g.isOdd()&&g.iadd(b),g.iushrn(1);for(var u=0,w=1;!(h.words[0]&w)&&u<26;++u,w<<=1);if(u>0)for(h.iushrn(u);u-- >0;)m.isOdd()&&m.iadd(b),m.iushrn(1);c.cmp(h)>=0?(c.isub(h),g.isub(m)):(h.isub(c),m.isub(g))}var D;return c.cmpn(1)===0?D=g:D=m,D.cmpn(0)<0&&D.iadd(o),D},s.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var c=this.clone(),h=o.clone();c.negative=0,h.negative=0;for(var g=0;c.isEven()&&h.isEven();g++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var m=c.cmp(h);if(m<0){var b=c;c=h,h=b}else if(m===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(g)},s.prototype.invm=function(o){return this.egcd(o).a.umod(o)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(o){return this.words[0]&o},s.prototype.bincn=function(o){n(typeof o=="number");var c=o%26,h=(o-c)/26,g=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=g,this;for(var m=g,b=h;m!==0&&b<this.length;b++){var E=this.words[b]|0;E+=m,m=E>>>26,E&=67108863,this.words[b]=E}return m!==0&&(this.words[b]=m,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(o){var c=o<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(o=-o),n(o<=67108863,"Number is too big");var g=this.words[0]|0;h=g===o?0:g<o?-1:1}return this.negative!==0?-h|0:h},s.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var c=this.ucmp(o);return this.negative!==0?-c|0:c},s.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var g=this.words[h]|0,m=o.words[h]|0;if(g!==m){g<m?c=-1:g>m&&(c=1);break}}return c},s.prototype.gtn=function(o){return this.cmpn(o)===1},s.prototype.gt=function(o){return this.cmp(o)===1},s.prototype.gten=function(o){return this.cmpn(o)>=0},s.prototype.gte=function(o){return this.cmp(o)>=0},s.prototype.ltn=function(o){return this.cmpn(o)===-1},s.prototype.lt=function(o){return this.cmp(o)===-1},s.prototype.lten=function(o){return this.cmpn(o)<=0},s.prototype.lte=function(o){return this.cmp(o)<=0},s.prototype.eqn=function(o){return this.cmpn(o)===0},s.prototype.eq=function(o){return this.cmp(o)===0},s.red=function(o){return new K(o)},s.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(o){return this.red=o,this},s.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},s.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},s.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},s.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},s.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},s.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},s.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},s.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var G={k256:null,p224:null,p192:null,p25519:null};function X(d,o){this.name=d,this.p=new s(o,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var o=new s(null);return o.words=new Array(Math.ceil(this.n/13)),o},X.prototype.ireduce=function(o){var c=o,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var g=h<this.n?-1:c.ucmp(this.p);return g===0?(c.words[0]=0,c.length=1):g>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},X.prototype.split=function(o,c){o.iushrn(this.n,0,c)},X.prototype.imulK=function(o){return o.imul(this.k)};function et(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(et,X),et.prototype.split=function(o,c){for(var h=4194303,g=Math.min(o.length,9),m=0;m<g;m++)c.words[m]=o.words[m];if(c.length=g,o.length<=9){o.words[0]=0,o.length=1;return}var b=o.words[9];for(c.words[c.length++]=b&h,m=10;m<o.length;m++){var E=o.words[m]|0;o.words[m-10]=(E&h)<<4|b>>>22,b=E}b>>>=22,o.words[m-10]=b,b===0&&o.length>10?o.length-=10:o.length-=9},et.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var c=0,h=0;h<o.length;h++){var g=o.words[h]|0;c+=g*977,o.words[h]=c&67108863,c=g*64+(c/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function Q(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(Q,X);function T(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(T,X);function W(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(W,X),W.prototype.imulK=function(o){for(var c=0,h=0;h<o.length;h++){var g=(o.words[h]|0)*19+c,m=g&67108863;g>>>=26,o.words[h]=m,c=g}return c!==0&&(o.words[o.length++]=c),o},s._prime=function(o){if(G[o])return G[o];var c;if(o==="k256")c=new et;else if(o==="p224")c=new Q;else if(o==="p192")c=new T;else if(o==="p25519")c=new W;else throw new Error("Unknown prime "+o);return G[o]=c,c};function K(d){if(typeof d=="string"){var o=s._prime(d);this.m=o.p,this.prime=o}else n(d.gtn(1),"modulus must be greater than 1"),this.m=d,this.prime=null}K.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},K.prototype._verify2=function(o,c){n((o.negative|c.negative)===0,"red works only with positives"),n(o.red&&o.red===c.red,"red works only with red numbers")},K.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(x(o,o.umod(this.m)._forceRed(this)),o)},K.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},K.prototype.add=function(o,c){this._verify2(o,c);var h=o.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},K.prototype.iadd=function(o,c){this._verify2(o,c);var h=o.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},K.prototype.sub=function(o,c){this._verify2(o,c);var h=o.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},K.prototype.isub=function(o,c){this._verify2(o,c);var h=o.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},K.prototype.shl=function(o,c){return this._verify1(o),this.imod(o.ushln(c))},K.prototype.imul=function(o,c){return this._verify2(o,c),this.imod(o.imul(c))},K.prototype.mul=function(o,c){return this._verify2(o,c),this.imod(o.mul(c))},K.prototype.isqr=function(o){return this.imul(o,o.clone())},K.prototype.sqr=function(o){return this.mul(o,o)},K.prototype.sqrt=function(o){if(o.isZero())return o.clone();var c=this.m.andln(3);if(n(c%2===1),c===3){var h=this.m.add(new s(1)).iushrn(2);return this.pow(o,h)}for(var g=this.m.subn(1),m=0;!g.isZero()&&g.andln(1)===0;)m++,g.iushrn(1);n(!g.isZero());var b=new s(1).toRed(this),E=b.redNeg(),p=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,p).cmp(E)!==0;)u.redIAdd(E);for(var w=this.pow(u,g),D=this.pow(o,g.addn(1).iushrn(1)),N=this.pow(o,g),H=m;N.cmp(b)!==0;){for(var ot=N,rt=0;ot.cmp(b)!==0;rt++)ot=ot.redSqr();n(rt<H);var tt=this.pow(w,new s(1).iushln(H-rt-1));D=D.redMul(tt),w=tt.redSqr(),N=N.redMul(w),H=rt}return D},K.prototype.invm=function(o){var c=o._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},K.prototype.pow=function(o,c){if(c.isZero())return new s(1).toRed(this);if(c.cmpn(1)===0)return o.clone();var h=4,g=new Array(1<<h);g[0]=new s(1).toRed(this),g[1]=o;for(var m=2;m<g.length;m++)g[m]=this.mul(g[m-1],o);var b=g[0],E=0,p=0,u=c.bitLength()%26;for(u===0&&(u=26),m=c.length-1;m>=0;m--){for(var w=c.words[m],D=u-1;D>=0;D--){var N=w>>D&1;if(b!==g[0]&&(b=this.sqr(b)),N===0&&E===0){p=0;continue}E<<=1,E|=N,p++,!(p!==h&&(m!==0||D!==0))&&(b=this.mul(b,g[E]),p=0,E=0)}u=26}return b},K.prototype.convertTo=function(o){var c=o.umod(this.m);return c===o?c.clone():c},K.prototype.convertFrom=function(o){var c=o.clone();return c.red=null,c},s.mont=function(o){return new $(o)};function $(d){K.call(this,d),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i($,K),$.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},$.prototype.convertFrom=function(o){var c=this.imod(o.mul(this.rinv));return c.red=null,c},$.prototype.imul=function(o,c){if(o.isZero()||c.isZero())return o.words[0]=0,o.length=1,o;var h=o.imul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=h.isub(g).iushrn(this.shift),b=m;return m.cmp(this.m)>=0?b=m.isub(this.m):m.cmpn(0)<0&&(b=m.iadd(this.m)),b._forceRed(this)},$.prototype.mul=function(o,c){if(o.isZero()||c.isZero())return new s(0)._forceRed(this);var h=o.mul(c),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=h.isub(g).iushrn(this.shift),b=m;return m.cmp(this.m)>=0?b=m.isub(this.m):m.cmpn(0)<0&&(b=m.iadd(this.m)),b._forceRed(this)},$.prototype.invm=function(o){var c=this.imod(o._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(r,Te)})(Fs);var ko=Fs.exports;const Ni=Sr(ko);var xs={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,t){var e=nt,n=e.Buffer;function i(a,l){for(var f in a)l[f]=a[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(i(e,t),t.Buffer=s);function s(a,l,f){return n(a,l,f)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,l,f){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,l,f)},s.alloc=function(a,l,f){if(typeof a!="number")throw new TypeError("Argument must be a number");var y=n(a);return l!==void 0?typeof f=="string"?y.fill(l,f):y.fill(l):y.fill(0),y},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(a)}})(xs,xs.exports);var Pc=xs.exports,or=Pc.Buffer;function qc(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=n}var a=r.length,l=r.charAt(0),f=Math.log(a)/Math.log(256),y=Math.log(256)/Math.log(a);function x(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=or.from(v)),!or.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var _=0,B=0,A=0,M=v.length;A!==M&&v[A]===0;)A++,_++;for(var U=(M-A)*y+1>>>0,L=new Uint8Array(U);A!==M;){for(var q=v[A],G=0,X=U-1;(q!==0||G<B)&&X!==-1;X--,G++)q+=256*L[X]>>>0,L[X]=q%a>>>0,q=q/a>>>0;if(q!==0)throw new Error("Non-zero carry");B=G,A++}for(var et=U-B;et!==U&&L[et]===0;)et++;for(var Q=l.repeat(_);et<U;++et)Q+=r.charAt(L[et]);return Q}function k(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return or.alloc(0);for(var _=0,B=0,A=0;v[_]===l;)B++,_++;for(var M=(v.length-_)*f+1>>>0,U=new Uint8Array(M);_<v.length;){var L=v.charCodeAt(_);if(L>255)return;var q=t[L];if(q===255)return;for(var G=0,X=M-1;(q!==0||G<A)&&X!==-1;X--,G++)q+=a*U[X]>>>0,U[X]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");A=G,_++}for(var et=M-A;et!==M&&U[et]===0;)et++;var Q=or.allocUnsafe(B+(M-et));Q.fill(0,0,B);for(var T=B;et!==M;)Q[T++]=U[et++];return Q}function S(v){var _=k(v);if(_)return _;throw new Error("Non-base"+a+" character")}return{encode:x,decodeUnsafe:k,decode:S}}var Fc=qc,zc=Fc,Dc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Bo=zc(Dc);const ue=Sr(Bo),Pi=ro;var ce={};function Ve(r,t,e){return t<=r&&r<=e}function Er(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Kc(r){for(var t=String(r),e=t.length,n=0,i=[];n<e;){var s=t.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===e-1)i.push(65533);else{var a=r.charCodeAt(n+1);if(56320<=a&&a<=57343){var l=s&1023,f=a&1023;i.push(65536+(l<<10)+f),n+=1}else i.push(65533)}n+=1}return i}function Hc(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var pr=-1;function zs(r){this.tokens=[].slice.call(r)}zs.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():pr},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var Cn=-1;function os(r,t){if(r)throw TypeError("Decoder error");return t||65533}var mr="utf-8";function yr(r,t){if(!(this instanceof yr))return new yr(r,t);if(r=r!==void 0?String(r).toLowerCase():mr,r!==mr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Er(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}yr.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=Er(e),this._streaming||(this._decoder=new $c({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var i=new zs(n),s=[],a;!i.endOfStream()&&(a=this._decoder.handler(i,i.read()),a!==Cn);)a!==null&&(Array.isArray(a)?s.push.apply(s,a):s.push(a));if(!this._streaming){do{if(a=this._decoder.handler(i,i.read()),a===Cn)break;a!==null&&(Array.isArray(a)?s.push.apply(s,a):s.push(a))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),Hc(s)}};function wr(r,t){if(!(this instanceof wr))return new wr(r,t);if(r=r!==void 0?String(r).toLowerCase():mr,r!==mr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Er(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}wr.prototype={encode:function(t,e){t=t?String(t):"",e=Er(e),this._streaming||(this._encoder=new Wc(this._options)),this._streaming=!!e.stream;for(var n=[],i=new zs(Kc(t)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Cn);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Cn;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function $c(r){var t=r.fatal,e=0,n=0,i=0,s=128,a=191;this.handler=function(l,f){if(f===pr&&i!==0)return i=0,os(t);if(f===pr)return Cn;if(i===0){if(Ve(f,0,127))return f;if(Ve(f,194,223))i=1,e=f-192;else if(Ve(f,224,239))f===224&&(s=160),f===237&&(a=159),i=2,e=f-224;else if(Ve(f,240,244))f===240&&(s=144),f===244&&(a=143),i=3,e=f-240;else return os(t);return e=e<<6*i,null}if(!Ve(f,s,a))return e=i=n=0,s=128,a=191,l.prepend(f),os(t);if(s=128,a=191,n+=1,e+=f-128<<6*(i-n),n!==i)return null;var y=e;return e=i=n=0,y}}function Wc(r){r.fatal,this.handler=function(t,e){if(e===pr)return Cn;if(Ve(e,0,127))return e;var n,i;Ve(e,128,2047)?(n=1,i=192):Ve(e,2048,65535)?(n=2,i=224):Ve(e,65536,1114111)&&(n=3,i=240);for(var s=[(e>>6*n)+i];n>0;){var a=e>>6*(n-1);s.push(128|a&63),n-=1}return s}}const Vc=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:yr,TextEncoder:wr},Symbol.toStringTag,{value:"Module"})),jc=Ts(Vc);var Gc=Te&&Te.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Zc=Te&&Te.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Fe=Te&&Te.__decorate||function(r,t,e,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,n);else for(var l=r.length-1;l>=0;l--)(a=r[l])&&(s=(i<3?a(s):i>3?a(t,e,s):a(t,e))||s);return i>3&&s&&Object.defineProperty(t,e,s),s},Yc=Te&&Te.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&Gc(t,r,e);return Zc(t,r),t},Ao=Te&&Te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ce,"__esModule",{value:!0});var Io=ce.deserializeUnchecked=Uo=ce.deserialize=Co=ce.serialize=ce.BinaryReader=ce.BinaryWriter=ce.BorshError=ce.baseDecode=ce.baseEncode=void 0;const en=Ao(ko),Mo=Ao(Bo),Xc=Yc(jc),Jc=typeof TextDecoder!="function"?Xc.TextDecoder:TextDecoder,Qc=new Jc("utf-8",{fatal:!0});function tu(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),Mo.default.encode(Buffer.from(r))}ce.baseEncode=tu;function eu(r){return Buffer.from(Mo.default.decode(r))}ce.baseDecode=eu;const as=1024;class we extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ce.BorshError=we;class Ro{constructor(){this.buf=Buffer.alloc(as),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(as)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new en.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new en.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new en.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new en.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(as)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}ce.BinaryWriter=Ro;function ze(r,t,e){const n=e.value;e.value=function(...i){try{return n.apply(this,i)}catch(s){if(s instanceof RangeError){const a=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new we("Reached the end of buffer when deserializing")}throw s}}}class Ae{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new en.default(t,"le")}readU128(){const t=this.readBuffer(16);return new en.default(t,"le")}readU256(){const t=this.readBuffer(32);return new en.default(t,"le")}readU512(){const t=this.readBuffer(64);return new en.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new we(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Qc.decode(e)}catch(n){throw new we(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let i=0;i<e;++i)n.push(t());return n}}Fe([ze],Ae.prototype,"readU8",null);Fe([ze],Ae.prototype,"readU16",null);Fe([ze],Ae.prototype,"readU32",null);Fe([ze],Ae.prototype,"readU64",null);Fe([ze],Ae.prototype,"readU128",null);Fe([ze],Ae.prototype,"readU256",null);Fe([ze],Ae.prototype,"readU512",null);Fe([ze],Ae.prototype,"readString",null);Fe([ze],Ae.prototype,"readFixedArray",null);Fe([ze],Ae.prototype,"readArray",null);ce.BinaryReader=Ae;function Lo(r){return r.charAt(0).toUpperCase()+r.slice(1)}function rn(r,t,e,n,i){try{if(typeof n=="string")i[`write${Lo(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new we(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);i.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new we(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let s=0;s<n[1];s++)rn(r,null,e[s],n[0],i)}else i.writeArray(e,s=>{rn(r,t,s,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?i.writeU8(0):(i.writeU8(1),rn(r,t,e,n.type,i));break}case"map":{i.writeU32(e.size),e.forEach((s,a)=>{rn(r,t,a,n.key,i),rn(r,t,s,n.value,i)});break}default:throw new we(`FieldType ${n} unrecognized`)}else To(r,e,i)}catch(s){throw s instanceof we&&s.addToFieldPath(t),s}}function To(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new we(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,s])=>{rn(r,i,t[i],s,e)});else if(n.kind==="enum"){const i=t[n.field];for(let s=0;s<n.values.length;++s){const[a,l]=n.values[s];if(a===i){e.writeU8(s),rn(r,a,t[a],l,e);break}}}else throw new we(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function nu(r,t,e=Ro){const n=new e;return To(r,t,n),n.toArray()}var Co=ce.serialize=nu;function sn(r,t,e,n){try{if(typeof e=="string")return n[`read${Lo(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const i=[];for(let s=0;s<e[1];s++)i.push(sn(r,null,e[0],n));return i}else return n.readArray(()=>sn(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?sn(r,t,e.type,n):void 0;if(e.kind==="map"){let i=new Map;const s=n.readU32();for(let a=0;a<s;a++){const l=sn(r,t,e.key,n),f=sn(r,t,e.value,n);i.set(l,f)}return i}return Ds(r,e,n)}catch(i){throw i instanceof we&&i.addToFieldPath(t),i}}function Ds(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new we(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const i={};for(const[s,a]of r.get(t).fields)i[s]=sn(r,s,a,e);return new t(i)}if(n.kind==="enum"){const i=e.readU8();if(i>=n.values.length)throw new we(`Enum index: ${i} is out of range`);const[s,a]=n.values[i],l=sn(r,s,a,e);return new t({[s]:l})}throw new we(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function ru(r,t,e,n=Ae){const i=new n(e),s=Ds(r,t,i);if(i.offset<e.length)throw new we(`Unexpected ${e.length-i.offset} bytes after deserialized data`);return s}var Uo=ce.deserialize=ru;function su(r,t,e,n=Ae){const i=new n(e);return Ds(r,t,i)}Io=ce.deserializeUnchecked=su;var R={};Object.defineProperty(R,"__esModule",{value:!0});R.s16=R.s8=R.nu64be=R.u48be=R.u40be=R.u32be=R.u24be=R.u16be=oe=R.nu64=R.u48=R.u40=Y=R.u32=R.u24=Ie=R.u16=ct=R.u8=fn=R.offset=R.greedy=R.Constant=R.UTF8=R.CString=R.Blob=R.Boolean=R.BitField=R.BitStructure=R.VariantLayout=R.Union=R.UnionLayoutDiscriminator=R.UnionDiscriminator=R.Structure=R.Sequence=R.DoubleBE=R.Double=R.FloatBE=R.Float=R.NearInt64BE=R.NearInt64=R.NearUInt64BE=R.NearUInt64=R.IntBE=R.Int=R.UIntBE=R.UInt=R.OffsetLayout=R.GreedyCount=R.ExternalLayout=R.bindConstructorLayout=R.nameWithProperty=R.Layout=R.uint8ArrayToBuffer=R.checkUint8Array=void 0;R.constant=R.utf8=R.cstr=dt=R.blob=R.unionLayoutDiscriminator=R.union=ye=R.seq=R.bits=V=R.struct=R.f64be=R.f64=R.f32be=R.f32=R.ns64be=R.s48be=R.s40be=R.s32be=R.s24be=R.s16be=_e=R.ns64=R.s48=R.s40=R.s32=R.s24=void 0;const Ks=nt;function On(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}R.checkUint8Array=On;function at(r){return On(r),Ks.Buffer.from(r.buffer,r.byteOffset,r.length)}R.uint8ArrayToBuffer=at;class ut{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}R.Layout=ut;function Hs(r,t){return t.property?r+"["+t.property+"]":r}R.nameWithProperty=Hs;function iu(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof ut))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}R.bindConstructorLayout=iu;class ve extends ut{isCount(){throw new Error("ExternalLayout is abstract")}}R.ExternalLayout=ve;class Oo extends ve{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){On(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}R.GreedyCount=Oo;class $s extends ve{constructor(t,e=0,n){if(!(t instanceof ut))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Me||this.layout instanceof Le}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}R.OffsetLayout=$s;class Me extends ut{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return at(t).readUIntLE(e,this.span)}encode(t,e,n=0){return at(e).writeUIntLE(t,n,this.span),this.span}}R.UInt=Me;class Le extends ut{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return at(t).readUIntBE(e,this.span)}encode(t,e,n=0){return at(e).writeUIntBE(t,n,this.span),this.span}}R.UIntBE=Le;class mn extends ut{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return at(t).readIntLE(e,this.span)}encode(t,e,n=0){return at(e).writeIntLE(t,n,this.span),this.span}}R.Int=mn;class Nn extends ut{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return at(t).readIntBE(e,this.span)}encode(t,e,n=0){return at(e).writeIntBE(t,n,this.span),this.span}}R.IntBE=Nn;const Ss=Math.pow(2,32);function kr(r){const t=Math.floor(r/Ss),e=r-t*Ss;return{hi32:t,lo32:e}}function Br(r,t){return r*Ss+t}class No extends ut{constructor(t){super(8,t)}decode(t,e=0){const n=at(t),i=n.readUInt32LE(e),s=n.readUInt32LE(e+4);return Br(s,i)}encode(t,e,n=0){const i=kr(t),s=at(e);return s.writeUInt32LE(i.lo32,n),s.writeUInt32LE(i.hi32,n+4),8}}R.NearUInt64=No;class Po extends ut{constructor(t){super(8,t)}decode(t,e=0){const n=at(t),i=n.readUInt32BE(e),s=n.readUInt32BE(e+4);return Br(i,s)}encode(t,e,n=0){const i=kr(t),s=at(e);return s.writeUInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}R.NearUInt64BE=Po;class qo extends ut{constructor(t){super(8,t)}decode(t,e=0){const n=at(t),i=n.readUInt32LE(e),s=n.readInt32LE(e+4);return Br(s,i)}encode(t,e,n=0){const i=kr(t),s=at(e);return s.writeUInt32LE(i.lo32,n),s.writeInt32LE(i.hi32,n+4),8}}R.NearInt64=qo;class Fo extends ut{constructor(t){super(8,t)}decode(t,e=0){const n=at(t),i=n.readInt32BE(e),s=n.readUInt32BE(e+4);return Br(i,s)}encode(t,e,n=0){const i=kr(t),s=at(e);return s.writeInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}R.NearInt64BE=Fo;class zo extends ut{constructor(t){super(4,t)}decode(t,e=0){return at(t).readFloatLE(e)}encode(t,e,n=0){return at(e).writeFloatLE(t,n),4}}R.Float=zo;class Do extends ut{constructor(t){super(4,t)}decode(t,e=0){return at(t).readFloatBE(e)}encode(t,e,n=0){return at(e).writeFloatBE(t,n),4}}R.FloatBE=Do;class Ko extends ut{constructor(t){super(8,t)}decode(t,e=0){return at(t).readDoubleLE(e)}encode(t,e,n=0){return at(e).writeDoubleLE(t,n),8}}R.Double=Ko;class Ho extends ut{constructor(t){super(8,t)}decode(t,e=0){return at(t).readDoubleBE(e)}encode(t,e,n=0){return at(e).writeDoubleBE(t,n),8}}R.DoubleBE=Ho;class $o extends ut{constructor(t,e,n){if(!(t instanceof ut))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof ve&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(e instanceof ve)&&0<t.span&&(i=e*t.span),super(i,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof ve&&(i=i.decode(t,e)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let s=0;for(;s<i;)n+=this.elementLayout.getSpan(t,e+n),++s}return n}decode(t,e=0){const n=[];let i=0,s=this.count;for(s instanceof ve&&(s=s.decode(t,e));i<s;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),i+=1;return n}encode(t,e,n=0){const i=this.elementLayout,s=t.reduce((a,l)=>a+i.encode(l,e,n+a),0);return this.count instanceof ve&&this.count.encode(t.length,e,n),s}}R.Sequence=$o;class Wo extends ut{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((s,a)=>s&&a instanceof ut,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const s of t)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((s,a)=>s+a.getSpan(),0)}catch{}super(i,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,s)=>{const a=s.getSpan(t,e);return e+=a,i+a},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){On(t);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(t,e)),e+=i.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const i=n;let s=0,a=0;for(const l of this.fields){let f=l.span;if(a=0<f?f:0,l.property!==void 0){const y=t[l.property];y!==void 0&&(a=l.encode(y,e,n),0>f&&(f=l.getSpan(e,n)))}s=n,n+=f}return s+a-i}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}R.Structure=Wo;class Ws{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}R.UnionDiscriminator=Ws;class br extends Ws{constructor(t,e){if(!(t instanceof ve&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}R.UnionLayoutDiscriminator=br;class Vs extends ut{constructor(t,e,n){let i;if(t instanceof Me||t instanceof Le)i=new br(new $s(t));else if(t instanceof ve&&t.isCount())i=new br(t);else if(t instanceof Ws)i=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof ut))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let s=-1;e&&(s=e.span,0<=s&&(t instanceof Me||t instanceof Le)&&(s+=i.layout.span)),super(s,n),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof Me||t instanceof Le,this.defaultLayout=e,this.registry={};let a=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(l){return a(l)},this.configGetSourceVariant=function(l){a=l.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const i=this.discriminator,s=i.decode(t,e),a=this.registry[s];if(a===void 0){const l=this.defaultLayout;let f=0;this.usesPrefixDiscriminator&&(f=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[l.property]=l.decode(t,e+f)}else n=a.decode(t,e);return n}encode(t,e,n=0){const i=this.getSourceVariant(t);if(i===void 0){const s=this.discriminator,a=this.defaultLayout;let l=0;return this.usesPrefixDiscriminator&&(l=s.layout.span),s.encode(t[s.property],e,n),l+a.encode(t[a.property],e,n+l)}return i.encode(t,e,n)}addVariant(t,e,n){const i=new Vo(this,t,e,n);return this.registry[t]=i,i}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}R.Union=Vs;class Vo extends ut{constructor(t,e,n,i){if(!(t instanceof Vs))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof ut))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=n?n.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,i),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,e+n)),n+i}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let s=i;if(this.layout&&(this.layout.encode(t[this.property],e,n+i),s+=this.layout.getSpan(e,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}R.VariantLayout=Vo;function En(r){return 0>r&&(r+=4294967296),r}class js extends ut{constructor(t,e,n){if(!(t instanceof Me||t instanceof Le))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(s){return i=En(s),this},this._packedGetValue=function(){return i}}decode(t,e=0){const n=this.makeDestinationObject(),i=this.word.decode(t,e);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(n[s.property]=s.decode(t));return n}encode(t,e,n=0){const i=this.word.decode(e,n);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const a=t[s.property];a!==void 0&&s.encode(a)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new Gs(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new jo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}R.BitStructure=js;class Gs{constructor(t,e,n){if(!(t instanceof js))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const i=8*t.span,s=t.fields.reduce((a,l)=>a+l.bits,0);if(e+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-e),this.wordMask=En(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return En(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==En(t&this.valueMask))throw new TypeError(Hs("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=En(t<<this.start);this.container._packedSetValue(En(e&~this.wordMask)|n)}}R.BitField=Gs;let jo=class extends Gs{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};R.Boolean=jo;class Go extends ut{constructor(t,e){if(!(t instanceof ve&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof ve||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),at(t).slice(e,e+n)}encode(t,e,n){let i=this.length;if(this.length instanceof ve&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw new TypeError(Hs("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>e.length)throw new RangeError("encoding overruns Uint8Array");const s=at(t);return at(e).write(s.toString("hex"),n,i,"hex"),this.length instanceof ve&&this.length.encode(i,e,n),i}}R.Blob=Go;class Zo extends ut{constructor(t){super(-1,t)}getSpan(t,e=0){On(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return at(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const i=Ks.Buffer.from(t,"utf8"),s=i.length;if(n+s>e.length)throw new RangeError("encoding overruns Buffer");const a=at(e);return i.copy(a,n),a[n+s]=0,s+1}}R.CString=Zo;class Yo extends ut{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return On(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return at(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const i=Ks.Buffer.from(t,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(n+s>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(at(e),n),s}}R.UTF8=Yo;class Xo extends ut{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}R.Constant=Xo;R.greedy=(r,t)=>new Oo(r,t);var fn=R.offset=(r,t,e)=>new $s(r,t,e),ct=R.u8=r=>new Me(1,r),Ie=R.u16=r=>new Me(2,r);R.u24=r=>new Me(3,r);var Y=R.u32=r=>new Me(4,r);R.u40=r=>new Me(5,r);R.u48=r=>new Me(6,r);var oe=R.nu64=r=>new No(r);R.u16be=r=>new Le(2,r);R.u24be=r=>new Le(3,r);R.u32be=r=>new Le(4,r);R.u40be=r=>new Le(5,r);R.u48be=r=>new Le(6,r);R.nu64be=r=>new Po(r);R.s8=r=>new mn(1,r);R.s16=r=>new mn(2,r);R.s24=r=>new mn(3,r);R.s32=r=>new mn(4,r);R.s40=r=>new mn(5,r);R.s48=r=>new mn(6,r);var _e=R.ns64=r=>new qo(r);R.s16be=r=>new Nn(2,r);R.s24be=r=>new Nn(3,r);R.s32be=r=>new Nn(4,r);R.s40be=r=>new Nn(5,r);R.s48be=r=>new Nn(6,r);R.ns64be=r=>new Fo(r);R.f32=r=>new zo(r);R.f32be=r=>new Do(r);R.f64=r=>new Ko(r);R.f64be=r=>new Ho(r);var V=R.struct=(r,t,e)=>new Wo(r,t,e);R.bits=(r,t,e)=>new js(r,t,e);var ye=R.seq=(r,t,e)=>new $o(r,t,e);R.union=(r,t,e)=>new Vs(r,t,e);R.unionLayoutDiscriminator=(r,t)=>new br(r,t);var dt=R.blob=(r,t)=>new Go(r,t);R.cstr=r=>new Zo(r);R.utf8=(r,t)=>new Yo(r,t);R.constant=(r,t)=>new Xo(r,t);var ou=8078e3,au=8078001,cu=8078004,uu=8078005,fu=8078006,lu=8078011;function Jo(r){return Array.isArray(r)?"%5B"+r.map(Jo).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function hu([r,t]){return`${r}=${Jo(t)}`}function du(r){const t=Object.entries(r).map(hu).join("&");return btoa(t)}function gu(r,t={}){{let e=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(t).length&&(e+=` '${du(t)}'`),`${e}\``}}var Mn=class extends Error{constructor(...[t,e]){let n,i;if(e){const{cause:a,...l}=e;a&&(i={cause:a}),Object.keys(l).length>0&&(n=l)}const s=gu(t,n);super(s,i);te(this,"cause",this.cause);te(this,"context");this.context={__code:t,...n},this.name="SolanaError"}};function pu(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function mu(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(pu(t,r));return r.write(t,e,0),e}})}function yu(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function _n(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function wu(r,t){if(_n(r)!==_n(t))throw new Mn(cu);if(_n(r)&&_n(t)&&r.fixedSize!==t.fixedSize)throw new Mn(uu,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!_n(r)&&!_n(t)&&r.maxSize!==t.maxSize)throw new Mn(fu,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function bu(r,t,e=0){if(t.length-e<=0)throw new Mn(ou,{codecDescription:r})}function vu(r,t,e,n=0){const i=e.length-n;if(i<t)throw new Mn(au,{bytesLength:i,codecDescription:r,expected:t})}function xu(r,t,e,n){if(n<t||n>e)throw new Mn(lu,{codecDescription:r,max:e,min:t,value:n})}function Qo(r){return(r==null?void 0:r.endian)!==1}function Su(r){return mu({fixedSize:r.size,write(t,e,n){r.range&&xu(r.name,r.range[0],r.range[1],t);const i=new ArrayBuffer(r.size);return r.set(new DataView(i),t,Qo(r.config)),e.set(new Uint8Array(i),n),n+r.size}})}function _u(r){return yu({fixedSize:r.size,read(t,e=0){bu(r.name,t,e),vu(r.name,r.size,t,e);const n=new DataView(Eu(t,e,r.size));return[r.get(n,Qo(r.config)),e+r.size]}})}function Eu(r,t,e){const n=r.byteOffset+(t??0),i=e??r.byteLength;return r.buffer.slice(n,n+i)}var ku=(r={})=>Su({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),Bu=(r={})=>_u({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Au=(r={})=>wu(ku(r),Bu(r));class Iu extends TypeError{constructor(t,e){let n;const{message:i,explanation:s,...a}=t,{path:l}=t,f=l.length===0?i:`At path: ${l.join(".")} -- ${i}`;super(s??f),s!=null&&(this.cause=f),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function Mu(r){return Qn(r)&&typeof r[Symbol.iterator]=="function"}function Qn(r){return typeof r=="object"&&r!=null}function vr(r){return Qn(r)&&!Array.isArray(r)}function Ce(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function Ru(r){const{done:t,value:e}=r.next();return t?void 0:e}function Lu(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=t,{type:a}=e,{refinement:l,message:f=`Expected a value of type \`${a}\`${l?` with refinement \`${l}\``:""}, but received: \`${Ce(n)}\``}=r;return{value:n,type:a,refinement:l,key:i[i.length-1],path:i,branch:s,...r,message:f}}function*qi(r,t,e,n){Mu(r)||(r=[r]);for(const i of r){const s=Lu(i,t,e,n);s&&(yield s)}}function*Zs(r,t,e={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=e,l={path:n,branch:i,mask:a};s&&(r=t.coercer(r,l));let f="valid";for(const y of t.validator(r,l))y.explanation=e.message,f="not_valid",yield[y,void 0];for(let[y,x,k]of t.entries(r,l)){const S=Zs(x,k,{path:y===void 0?n:[...n,y],branch:y===void 0?i:[...i,x],coerce:s,mask:a,message:e.message});for(const v of S)v[0]?(f=v[0].refinement!=null?"not_refined":"not_valid",yield[v[0],void 0]):s&&(x=v[1],y===void 0?r=x:r instanceof Map?r.set(y,x):r instanceof Set?r.add(x):Qn(r)&&(x!==void 0||y in r)&&(r[y]=x))}if(f!=="not_valid")for(const y of t.refiner(r,l))y.explanation=e.message,f="not_refined",yield[y,void 0];f==="valid"&&(yield[void 0,r])}let De=class{constructor(t){const{type:e,schema:n,validator:i,refiner:s,coercer:a=f=>f,entries:l=function*(){}}=t;this.type=e,this.schema=n,this.entries=l,this.coercer=a,i?this.validator=(f,y)=>{const x=i(f,y);return qi(x,y,this,f)}:this.validator=()=>[],s?this.refiner=(f,y)=>{const x=s(f,y);return qi(x,y,this,f)}:this.refiner=()=>[]}assert(t,e){return Tu(t,this,e)}create(t,e){return P(t,this,e)}is(t){return ta(t,this)}mask(t,e){return Cu(t,this,e)}validate(t,e={}){return tr(t,this,e)}};function Tu(r,t,e){const n=tr(r,t,{message:e});if(n[0])throw n[0]}function P(r,t,e){const n=tr(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function Cu(r,t,e){const n=tr(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function ta(r,t){return!tr(r,t)[0]}function tr(r,t,e={}){const n=Zs(r,t,e),i=Ru(n);return i[0]?[new Iu(i[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,i[1]]}function yn(r,t){return new De({type:r,schema:null,validator:t})}function Uu(){return yn("any",()=>!0)}function F(r){return new De({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ce(t)}`}})}function qe(){return yn("boolean",r=>typeof r=="boolean")}function Ys(r){return yn("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${Ce(t)}`)}function pt(r){const t=Ce(r),e=typeof r;return new De({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${Ce(n)}`}})}function Ou(){return yn("never",()=>!1)}function z(r){return new De({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function I(){return yn("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Ce(r)}`)}function Z(r){return new De({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function ea(r,t){return new De({type:"record",schema:null,*entries(e){if(Qn(e))for(const n in e){const i=e[n];yield[n,n,r],yield[n,i,t]}},validator(e){return vr(e)||`Expected an object, but received: ${Ce(e)}`},coercer(e){return vr(e)?{...e}:e}})}function O(){return yn("string",r=>typeof r=="string"||`Expected a string, but received: ${Ce(r)}`)}function Xs(r){const t=Ou();return new De({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let i=0;i<n;i++)yield[i,e[i],r[i]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ce(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function C(r){const t=Object.keys(r);return new De({type:"type",schema:r,*entries(e){if(Qn(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return vr(e)||`Expected an object, but received: ${Ce(e)}`},coercer(e){return vr(e)?{...e}:e}})}function be(r){const t=r.map(e=>e.type).join(" | ");return new De({type:"union",schema:null,coercer(e,n){for(const i of r){const[s,a]=i.validate(e,{coerce:!0,mask:n.mask});if(!s)return a}return e},validator(e,n){const i=[];for(const s of r){const[...a]=Zs(e,s,n),[l]=a;if(l[0])for(const[f]of a)f&&i.push(f);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ce(e)}`,...i]}})}function Pn(){return yn("unknown",()=>!0)}function er(r,t,e){return new De({...r,coercer:(n,i)=>ta(n,t)?r.coercer(e(n,i),i):r.coercer(n,i)})}var ar,Nu=new Uint8Array(16);function na(){if(!ar&&(ar=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ar))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ar(Nu)}const Pu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ar(r){return typeof r=="string"&&Pu.test(r)}var ie=[];for(var cs=0;cs<256;++cs)ie.push((cs+256).toString(16).substr(1));function Ir(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ie[r[t+0]]+ie[r[t+1]]+ie[r[t+2]]+ie[r[t+3]]+"-"+ie[r[t+4]]+ie[r[t+5]]+"-"+ie[r[t+6]]+ie[r[t+7]]+"-"+ie[r[t+8]]+ie[r[t+9]]+"-"+ie[r[t+10]]+ie[r[t+11]]+ie[r[t+12]]+ie[r[t+13]]+ie[r[t+14]]+ie[r[t+15]]).toLowerCase();if(!Ar(e))throw TypeError("Stringified UUID is invalid");return e}var Fi,us,fs=0,ls=0;function qu(r,t,e){var n=t&&e||0,i=t||new Array(16);r=r||{};var s=r.node||Fi,a=r.clockseq!==void 0?r.clockseq:us;if(s==null||a==null){var l=r.random||(r.rng||na)();s==null&&(s=Fi=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),a==null&&(a=us=(l[6]<<8|l[7])&16383)}var f=r.msecs!==void 0?r.msecs:Date.now(),y=r.nsecs!==void 0?r.nsecs:ls+1,x=f-fs+(y-ls)/1e4;if(x<0&&r.clockseq===void 0&&(a=a+1&16383),(x<0||f>fs)&&r.nsecs===void 0&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");fs=f,ls=y,us=a,f+=122192928e5;var k=((f&268435455)*1e4+y)%4294967296;i[n++]=k>>>24&255,i[n++]=k>>>16&255,i[n++]=k>>>8&255,i[n++]=k&255;var S=f/4294967296*1e4&268435455;i[n++]=S>>>8&255,i[n++]=S&255,i[n++]=S>>>24&15|16,i[n++]=S>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(var v=0;v<6;++v)i[n+v]=s[v];return t||Ir(i)}function ra(r){if(!Ar(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Fu(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var zu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Du="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function sa(r,t,e){function n(i,s,a,l){if(typeof i=="string"&&(i=Fu(i)),typeof s=="string"&&(s=ra(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+i.length);if(f.set(s),f.set(i,s.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,a){l=l||0;for(var y=0;y<16;++y)a[l+y]=f[y];return a}return Ir(f)}try{n.name=r}catch{}return n.DNS=zu,n.URL=Du,n}function Ku(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return Hu($u(Wu(r),r.length*8))}function Hu(r){for(var t=[],e=r.length*32,n="0123456789abcdef",i=0;i<e;i+=8){var s=r[i>>5]>>>i%32&255,a=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);t.push(a)}return t}function ia(r){return(r+64>>>9<<4)+14+1}function $u(r,t){r[t>>5]|=128<<t%32,r[ia(t)-1]=t;for(var e=1732584193,n=-271733879,i=-1732584194,s=271733878,a=0;a<r.length;a+=16){var l=e,f=n,y=i,x=s;e=he(e,n,i,s,r[a],7,-680876936),s=he(s,e,n,i,r[a+1],12,-389564586),i=he(i,s,e,n,r[a+2],17,606105819),n=he(n,i,s,e,r[a+3],22,-1044525330),e=he(e,n,i,s,r[a+4],7,-176418897),s=he(s,e,n,i,r[a+5],12,1200080426),i=he(i,s,e,n,r[a+6],17,-1473231341),n=he(n,i,s,e,r[a+7],22,-45705983),e=he(e,n,i,s,r[a+8],7,1770035416),s=he(s,e,n,i,r[a+9],12,-1958414417),i=he(i,s,e,n,r[a+10],17,-42063),n=he(n,i,s,e,r[a+11],22,-1990404162),e=he(e,n,i,s,r[a+12],7,1804603682),s=he(s,e,n,i,r[a+13],12,-40341101),i=he(i,s,e,n,r[a+14],17,-1502002290),n=he(n,i,s,e,r[a+15],22,1236535329),e=de(e,n,i,s,r[a+1],5,-165796510),s=de(s,e,n,i,r[a+6],9,-1069501632),i=de(i,s,e,n,r[a+11],14,643717713),n=de(n,i,s,e,r[a],20,-373897302),e=de(e,n,i,s,r[a+5],5,-701558691),s=de(s,e,n,i,r[a+10],9,38016083),i=de(i,s,e,n,r[a+15],14,-660478335),n=de(n,i,s,e,r[a+4],20,-405537848),e=de(e,n,i,s,r[a+9],5,568446438),s=de(s,e,n,i,r[a+14],9,-1019803690),i=de(i,s,e,n,r[a+3],14,-187363961),n=de(n,i,s,e,r[a+8],20,1163531501),e=de(e,n,i,s,r[a+13],5,-1444681467),s=de(s,e,n,i,r[a+2],9,-51403784),i=de(i,s,e,n,r[a+7],14,1735328473),n=de(n,i,s,e,r[a+12],20,-1926607734),e=ge(e,n,i,s,r[a+5],4,-378558),s=ge(s,e,n,i,r[a+8],11,-2022574463),i=ge(i,s,e,n,r[a+11],16,1839030562),n=ge(n,i,s,e,r[a+14],23,-35309556),e=ge(e,n,i,s,r[a+1],4,-1530992060),s=ge(s,e,n,i,r[a+4],11,1272893353),i=ge(i,s,e,n,r[a+7],16,-155497632),n=ge(n,i,s,e,r[a+10],23,-1094730640),e=ge(e,n,i,s,r[a+13],4,681279174),s=ge(s,e,n,i,r[a],11,-358537222),i=ge(i,s,e,n,r[a+3],16,-722521979),n=ge(n,i,s,e,r[a+6],23,76029189),e=ge(e,n,i,s,r[a+9],4,-640364487),s=ge(s,e,n,i,r[a+12],11,-421815835),i=ge(i,s,e,n,r[a+15],16,530742520),n=ge(n,i,s,e,r[a+2],23,-995338651),e=pe(e,n,i,s,r[a],6,-198630844),s=pe(s,e,n,i,r[a+7],10,1126891415),i=pe(i,s,e,n,r[a+14],15,-1416354905),n=pe(n,i,s,e,r[a+5],21,-57434055),e=pe(e,n,i,s,r[a+12],6,1700485571),s=pe(s,e,n,i,r[a+3],10,-1894986606),i=pe(i,s,e,n,r[a+10],15,-1051523),n=pe(n,i,s,e,r[a+1],21,-2054922799),e=pe(e,n,i,s,r[a+8],6,1873313359),s=pe(s,e,n,i,r[a+15],10,-30611744),i=pe(i,s,e,n,r[a+6],15,-1560198380),n=pe(n,i,s,e,r[a+13],21,1309151649),e=pe(e,n,i,s,r[a+4],6,-145523070),s=pe(s,e,n,i,r[a+11],10,-1120210379),i=pe(i,s,e,n,r[a+2],15,718787259),n=pe(n,i,s,e,r[a+9],21,-343485551),e=nn(e,l),n=nn(n,f),i=nn(i,y),s=nn(s,x)}return[e,n,i,s]}function Wu(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(ia(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function nn(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Vu(r,t){return r<<t|r>>>32-t}function Mr(r,t,e,n,i,s){return nn(Vu(nn(nn(t,r),nn(n,s)),i),e)}function he(r,t,e,n,i,s,a){return Mr(t&e|~t&n,r,t,i,s,a)}function de(r,t,e,n,i,s,a){return Mr(t&n|e&~n,r,t,i,s,a)}function ge(r,t,e,n,i,s,a){return Mr(t^e^n,r,t,i,s,a)}function pe(r,t,e,n,i,s,a){return Mr(e^(t|~n),r,t,i,s,a)}var ju=sa("v3",48,Ku);function Gu(r,t,e){r=r||{};var n=r.random||(r.rng||na)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=n[i];return t}return Ir(n)}function Zu(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function hs(r,t){return r<<t|r>>>32-t}function Yu(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,a=Math.ceil(s/16),l=new Array(a),f=0;f<a;++f){for(var y=new Uint32Array(16),x=0;x<16;++x)y[x]=r[f*64+x*4]<<24|r[f*64+x*4+1]<<16|r[f*64+x*4+2]<<8|r[f*64+x*4+3];l[f]=y}l[a-1][14]=(r.length-1)*8/Math.pow(2,32),l[a-1][14]=Math.floor(l[a-1][14]),l[a-1][15]=(r.length-1)*8&4294967295;for(var k=0;k<a;++k){for(var S=new Uint32Array(80),v=0;v<16;++v)S[v]=l[k][v];for(var _=16;_<80;++_)S[_]=hs(S[_-3]^S[_-8]^S[_-14]^S[_-16],1);for(var B=e[0],A=e[1],M=e[2],U=e[3],L=e[4],q=0;q<80;++q){var G=Math.floor(q/20),X=hs(B,5)+Zu(G,A,M,U)+L+t[G]+S[q]>>>0;L=U,U=M,M=hs(A,30)>>>0,A=B,B=X}e[0]=e[0]+B>>>0,e[1]=e[1]+A>>>0,e[2]=e[2]+M>>>0,e[3]=e[3]+U>>>0,e[4]=e[4]+L>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Xu=sa("v5",80,Yu);const Ju="00000000-0000-0000-0000-000000000000";function Qu(r){if(!Ar(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const tf=Object.freeze(Object.defineProperty({__proto__:null,NIL:Ju,parse:ra,stringify:Ir,v1:qu,v3:ju,v4:Gu,v5:Xu,validate:Ar,version:Qu},Symbol.toStringTag,{value:"Module"})),oa=Ts(tf),ef=oa.v4,nf=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:r};if(i===2&&(s.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if(typeof e>"u"){const a=typeof n.generator=="function"?n.generator:function(){return ef()};s.id=a(s,n)}else i===2&&e===null?n.notificationIdNull&&(s.id=null):s.id=e;return s};var rf=nf;const sf=oa.v4,of=rf,$n=function(r,t){if(!(this instanceof $n))return new $n(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return sf()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};var af=$n;$n.prototype.request=function(r,t,e,n){const i=this;let s=null;const a=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&r&&typeof r=="object"&&typeof t=="function")n=t,s=r;else{typeof e=="function"&&(n=e,e=void 0);const y=typeof n=="function";try{s=of(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(x){if(y)return n(x);throw x}if(!y)return s}let f;try{f=JSON.stringify(s,this.options.replacer)}catch(y){return n(y)}return this.callServer(f,function(y,x){i._parseResponse(y,x,n)}),s};$n.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(i){return e(i)}if(e.length===3)if(Array.isArray(n)){const i=function(a){return typeof a.error<"u"},s=function(a){return!i(a)};return e(null,n.filter(i),n.filter(s))}else return e(null,n.error,n.result);e(null,n)};const cf=Sr(af);var aa={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function i(f,y,x){this.fn=f,this.context=y,this.once=x||!1}function s(f,y,x,k,S){if(typeof x!="function")throw new TypeError("The listener must be a function");var v=new i(x,k||f,S),_=e?e+y:y;return f._events[_]?f._events[_].fn?f._events[_]=[f._events[_],v]:f._events[_].push(v):(f._events[_]=v,f._eventsCount++),f}function a(f,y){--f._eventsCount===0?f._events=new n:delete f._events[y]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var y=[],x,k;if(this._eventsCount===0)return y;for(k in x=this._events)t.call(x,k)&&y.push(e?k.slice(1):k);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(x)):y},l.prototype.listeners=function(y){var x=e?e+y:y,k=this._events[x];if(!k)return[];if(k.fn)return[k.fn];for(var S=0,v=k.length,_=new Array(v);S<v;S++)_[S]=k[S].fn;return _},l.prototype.listenerCount=function(y){var x=e?e+y:y,k=this._events[x];return k?k.fn?1:k.length:0},l.prototype.emit=function(y,x,k,S,v,_){var B=e?e+y:y;if(!this._events[B])return!1;var A=this._events[B],M=arguments.length,U,L;if(A.fn){switch(A.once&&this.removeListener(y,A.fn,void 0,!0),M){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,x),!0;case 3:return A.fn.call(A.context,x,k),!0;case 4:return A.fn.call(A.context,x,k,S),!0;case 5:return A.fn.call(A.context,x,k,S,v),!0;case 6:return A.fn.call(A.context,x,k,S,v,_),!0}for(L=1,U=new Array(M-1);L<M;L++)U[L-1]=arguments[L];A.fn.apply(A.context,U)}else{var q=A.length,G;for(L=0;L<q;L++)switch(A[L].once&&this.removeListener(y,A[L].fn,void 0,!0),M){case 1:A[L].fn.call(A[L].context);break;case 2:A[L].fn.call(A[L].context,x);break;case 3:A[L].fn.call(A[L].context,x,k);break;case 4:A[L].fn.call(A[L].context,x,k,S);break;default:if(!U)for(G=1,U=new Array(M-1);G<M;G++)U[G-1]=arguments[G];A[L].fn.apply(A[L].context,U)}}return!0},l.prototype.on=function(y,x,k){return s(this,y,x,k,!1)},l.prototype.once=function(y,x,k){return s(this,y,x,k,!0)},l.prototype.removeListener=function(y,x,k,S){var v=e?e+y:y;if(!this._events[v])return this;if(!x)return a(this,v),this;var _=this._events[v];if(_.fn)_.fn===x&&(!S||_.once)&&(!k||_.context===k)&&a(this,v);else{for(var B=0,A=[],M=_.length;B<M;B++)(_[B].fn!==x||S&&!_[B].once||k&&_[B].context!==k)&&A.push(_[B]);A.length?this._events[v]=A.length===1?A[0]:A:a(this,v)}return this},l.prototype.removeAllListeners=function(y){var x;return y?(x=e?e+y:y,this._events[x]&&a(this,x)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,r.exports=l})(aa);var uf=aa.exports;const ca=Sr(uf);var ff=class extends ca{constructor(t,e){super();te(this,"socket");this.socket=new window.WebSocket(t,e.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(t,e,n){const i=n||e;try{this.socket.send(t),i()}catch(s){i(s)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function lf(r,t){return new ff(r,t)}var hf=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},df=class extends ca{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:a=5,...l}={},f,y){super();te(this,"address");te(this,"rpc_id");te(this,"queue");te(this,"options");te(this,"autoconnect");te(this,"ready");te(this,"reconnect");te(this,"reconnect_timer_id");te(this,"reconnect_interval");te(this,"max_reconnects");te(this,"rest_options");te(this,"current_reconnects");te(this,"generate_request_id");te(this,"socket");te(this,"webSocketFactory");te(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=a,this.rest_options=l,this.current_reconnects=0,this.generate_request_id=f||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),y?this.dataPack=y:this.dataPack=new hf,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((s,a)=>{if(!this.ready)return a(new Error("socket not ready"));const l=this.generate_request_id(t,e),f={jsonrpc:"2.0",method:t,params:e||void 0,id:l};this.socket.send(this.dataPack.encode(f),i,y=>{if(y)return a(y);this.queue[l]={promise:[s,a]},n&&(this.queue[l].timeout=setTimeout(()=>{delete this.queue[l],a(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(s),a=>{if(a)return i(a);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket&&this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=nt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let s=0;s<n.params.length;s++)i.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",n,i),1))})}};class ua extends Qi{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Xi(t);const n=Cs(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=t.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),Ln(s)}update(t){return lr(this),this.iHash.update(t),this}digestInto(t){lr(this),gn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:l}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=a,t.outputLen=l,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const fa=(r,t,e)=>new ua(r,t).update(e).digest();fa.create=(r,t)=>new ua(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zi=(r,t)=>(r+(r>=0?t:-t)/la)/t;function gf(r,t,e){const[[n,i],[s,a]]=t,l=zi(a*r,e),f=zi(-i*r,e);let y=r-l*n-f*s,x=-l*i-f*a;const k=y<Ge,S=x<Ge;k&&(y=-y),S&&(x=-x);const v=Yn(Math.ceil(oo(e)/2))+Rn;if(y<Ge||y>=v||x<Ge||x>=v)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:k,k1:y,k2neg:S,k2:x}}function _s(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function ds(r,t){const e={};for(let n of Object.keys(t))e[n]=r[n]===void 0?t[n]:r[n];return hn(e.lowS,"lowS"),hn(e.prehash,"prehash"),e.format!==void 0&&_s(e.format),e}class pf extends Error{constructor(t=""){super(t)}}const We={Err:pf,_tlv:{encode:(r,t)=>{const{Err:e}=We;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,i=ir(n);if(i.length/2&128)throw new e("tlv.encode: long form length too big");const s=n>127?ir(i.length/2|128):"";return ir(r)+s+i+t},decode(r,t){const{Err:e}=We;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const i=t[n++],s=!!(i&128);let a=0;if(!s)a=i;else{const f=i&127;if(!f)throw new e("tlv.decode(long): indefinite length not supported");if(f>4)throw new e("tlv.decode(long): byte length is too big");const y=t.subarray(n,n+f);if(y.length!==f)throw new e("tlv.decode: length bytes not complete");if(y[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const x of y)a=a<<8|x;if(n+=f,a<128)throw new e("tlv.decode(long): not minimal encoding")}const l=t.subarray(n,n+a);if(l.length!==a)throw new e("tlv.decode: wrong value length");return{v:l,l:t.subarray(n+a)}}},_int:{encode(r){const{Err:t}=We;if(r<Ge)throw new t("integer: negative integers are not allowed");let e=ir(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=We;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return _r(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=We,i=wt("signature",r),{v:s,l:a}=n.decode(48,i);if(a.length)throw new t("invalid signature: left bytes after parsing");const{v:l,l:f}=n.decode(2,s),{v:y,l:x}=n.decode(2,f);if(x.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(l),s:e.decode(y)}},hexFromSig(r){const{_tlv:t,_int:e}=We,n=t.encode(2,e.encode(r.r)),i=t.encode(2,e.encode(r.s)),s=n+i;return t.encode(48,s)}},Ge=BigInt(0),Rn=BigInt(1),la=BigInt(2),cr=BigInt(3),mf=BigInt(4);function Bn(r,t){const{BYTES:e}=r;let n;if(typeof t=="bigint")n=t;else{let i=wt("private key",t);try{n=r.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function yf(r,t={}){const e=_o("weierstrass",r,t),{Fp:n,Fn:i}=e;let s=e.CURVE;const{h:a,n:l}=s;Xn(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:f}=t;if(f&&(!n.is0(s.a)||typeof f.beta!="bigint"||!Array.isArray(f.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const y=da(n,i);function x(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function k($,d,o){const{x:c,y:h}=d.toAffine(),g=n.toBytes(c);if(hn(o,"isCompressed"),o){x();const m=!n.isOdd(h);return Ne(ha(m),g)}else return Ne(Uint8Array.of(4),g,n.toBytes(h))}function S($){Re($,void 0,"Point");const{publicKey:d,publicKeyUncompressed:o}=y,c=$.length,h=$[0],g=$.subarray(1);if(c===d&&(h===2||h===3)){const m=n.fromBytes(g);if(!n.isValid(m))throw new Error("bad point: is not on curve, wrong x");const b=B(m);let E;try{E=n.sqrt(b)}catch(w){const D=w instanceof Error?": "+w.message:"";throw new Error("bad point: is not on curve, sqrt error"+D)}x();const p=n.isOdd(E);return(h&1)===1!==p&&(E=n.neg(E)),{x:m,y:E}}else if(c===o&&h===4){const m=n.BYTES,b=n.fromBytes(g.subarray(0,m)),E=n.fromBytes(g.subarray(m,m*2));if(!A(b,E))throw new Error("bad point: is not on curve");return{x:b,y:E}}else throw new Error(`bad point: got length ${c}, expected compressed=${d} or uncompressed=${o}`)}const v=t.toBytes||k,_=t.fromBytes||S;function B($){const d=n.sqr($),o=n.mul(d,$);return n.add(n.add(o,n.mul($,s.a)),s.b)}function A($,d){const o=n.sqr(d),c=B($);return n.eql(o,c)}if(!A(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const M=n.mul(n.pow(s.a,cr),mf),U=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(M,U)))throw new Error("bad curve params: a or b");function L($,d,o=!1){if(!n.isValid(d)||o&&n.is0(d))throw new Error(`bad point coordinate ${$}`);return d}function q($){if(!($ instanceof T))throw new Error("ProjectivePoint expected")}function G($){if(!f||!f.basises)throw new Error("no endo");return gf($,f.basises,i.ORDER)}const X=dr(($,d)=>{const{X:o,Y:c,Z:h}=$;if(n.eql(h,n.ONE))return{x:o,y:c};const g=$.is0();d==null&&(d=g?n.ONE:n.inv(h));const m=n.mul(o,d),b=n.mul(c,d),E=n.mul(h,d);if(g)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:m,y:b}}),et=dr($=>{if($.is0()){if(t.allowInfinityPoint&&!n.is0($.Y))return;throw new Error("bad point: ZERO")}const{x:d,y:o}=$.toAffine();if(!n.isValid(d)||!n.isValid(o))throw new Error("bad point: x or y not field elements");if(!A(d,o))throw new Error("bad point: equation left != right");if(!$.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function Q($,d,o,c,h){return o=new T(n.mul(o.X,$),o.Y,o.Z),d=gr(c,d),o=gr(h,o),d.add(o)}class T{constructor(d,o,c){this.X=L("x",d),this.Y=L("y",o,!0),this.Z=L("z",c),Object.freeze(this)}static CURVE(){return s}static fromAffine(d){const{x:o,y:c}=d||{};if(!d||!n.isValid(o)||!n.isValid(c))throw new Error("invalid affine point");if(d instanceof T)throw new Error("projective point not allowed");return n.is0(o)&&n.is0(c)?T.ZERO:new T(o,c,n.ONE)}static fromBytes(d){const o=T.fromAffine(_(Re(d,void 0,"point")));return o.assertValidity(),o}static fromHex(d){return T.fromBytes(wt("pointHex",d))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(d=8,o=!0){return K.createCache(this,d),o||this.multiply(cr),this}assertValidity(){et(this)}hasEvenY(){const{y:d}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(d)}equals(d){q(d);const{X:o,Y:c,Z:h}=this,{X:g,Y:m,Z:b}=d,E=n.eql(n.mul(o,b),n.mul(g,h)),p=n.eql(n.mul(c,b),n.mul(m,h));return E&&p}negate(){return new T(this.X,n.neg(this.Y),this.Z)}double(){const{a:d,b:o}=s,c=n.mul(o,cr),{X:h,Y:g,Z:m}=this;let b=n.ZERO,E=n.ZERO,p=n.ZERO,u=n.mul(h,h),w=n.mul(g,g),D=n.mul(m,m),N=n.mul(h,g);return N=n.add(N,N),p=n.mul(h,m),p=n.add(p,p),b=n.mul(d,p),E=n.mul(c,D),E=n.add(b,E),b=n.sub(w,E),E=n.add(w,E),E=n.mul(b,E),b=n.mul(N,b),p=n.mul(c,p),D=n.mul(d,D),N=n.sub(u,D),N=n.mul(d,N),N=n.add(N,p),p=n.add(u,u),u=n.add(p,u),u=n.add(u,D),u=n.mul(u,N),E=n.add(E,u),D=n.mul(g,m),D=n.add(D,D),u=n.mul(D,N),b=n.sub(b,u),p=n.mul(D,w),p=n.add(p,p),p=n.add(p,p),new T(b,E,p)}add(d){q(d);const{X:o,Y:c,Z:h}=this,{X:g,Y:m,Z:b}=d;let E=n.ZERO,p=n.ZERO,u=n.ZERO;const w=s.a,D=n.mul(s.b,cr);let N=n.mul(o,g),H=n.mul(c,m),ot=n.mul(h,b),rt=n.add(o,c),tt=n.add(g,m);rt=n.mul(rt,tt),tt=n.add(N,H),rt=n.sub(rt,tt),tt=n.add(o,h);let ne=n.add(g,b);return tt=n.mul(tt,ne),ne=n.add(N,ot),tt=n.sub(tt,ne),ne=n.add(c,h),E=n.add(m,b),ne=n.mul(ne,E),E=n.add(H,ot),ne=n.sub(ne,E),u=n.mul(w,tt),E=n.mul(D,ot),u=n.add(E,u),E=n.sub(H,u),u=n.add(H,u),p=n.mul(E,u),H=n.add(N,N),H=n.add(H,N),ot=n.mul(w,ot),tt=n.mul(D,tt),H=n.add(H,ot),ot=n.sub(N,ot),ot=n.mul(w,ot),tt=n.add(tt,ot),N=n.mul(H,tt),p=n.add(p,N),N=n.mul(ne,tt),E=n.mul(rt,E),E=n.sub(E,N),N=n.mul(rt,H),u=n.mul(ne,u),u=n.add(u,N),new T(E,p,u)}subtract(d){return this.add(d.negate())}is0(){return this.equals(T.ZERO)}multiply(d){const{endo:o}=t;if(!i.isValidNot0(d))throw new Error("invalid scalar: out of range");let c,h;const g=m=>K.cached(this,m,b=>cn(T,b));if(o){const{k1neg:m,k1:b,k2neg:E,k2:p}=G(d),{p:u,f:w}=g(b),{p:D,f:N}=g(p);h=w.add(N),c=Q(o.beta,u,D,m,E)}else{const{p:m,f:b}=g(d);c=m,h=b}return cn(T,[c,h])[0]}multiplyUnsafe(d){const{endo:o}=t,c=this;if(!i.isValid(d))throw new Error("invalid scalar: out of range");if(d===Ge||c.is0())return T.ZERO;if(d===Rn)return c;if(K.hasCache(this))return this.multiply(d);if(o){const{k1neg:h,k1:g,k2neg:m,k2:b}=G(d),{p1:E,p2:p}=wc(T,c,g,b);return Q(o.beta,E,p,h,m)}else return K.unsafe(c,d)}multiplyAndAddUnsafe(d,o,c){const h=this.multiplyUnsafe(o).add(d.multiplyUnsafe(c));return h.is0()?void 0:h}toAffine(d){return X(this,d)}isTorsionFree(){const{isTorsionFree:d}=t;return a===Rn?!0:d?d(T,this):K.unsafe(this,l).is0()}clearCofactor(){const{clearCofactor:d}=t;return a===Rn?this:d?d(T,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(d=!0){return hn(d,"isCompressed"),this.assertValidity(),v(T,this,d)}toHex(d=!0){return un(this.toBytes(d))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(d=!0){return this.toBytes(d)}_setWindowSize(d){this.precompute(d)}static normalizeZ(d){return cn(T,d)}static msm(d,o){return So(T,i,d,o)}static fromPrivateKey(d){return T.BASE.multiply(Bn(i,d))}}T.BASE=new T(s.Gx,s.Gy,n.ONE),T.ZERO=new T(n.ZERO,n.ONE,n.ZERO),T.Fp=n,T.Fn=i;const W=i.BITS,K=new xo(T,t.endo?Math.ceil(W/2):W);return T.BASE.precompute(8),T}function ha(r){return Uint8Array.of(r?2:3)}function da(r,t){return{secretKey:t.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function wf(r,t={}){const{Fn:e}=r,n=t.randomBytes||Us,i=Object.assign(da(r.Fp,e),{seed:wo(e.ORDER)});function s(v){try{return!!Bn(e,v)}catch{return!1}}function a(v,_){const{publicKey:B,publicKeyUncompressed:A}=i;try{const M=v.length;return _===!0&&M!==B||_===!1&&M!==A?!1:!!r.fromBytes(v)}catch{return!1}}function l(v=n(i.seed)){return pc(Re(v,i.seed,"seed"),e.ORDER)}function f(v,_=!0){return r.BASE.multiply(Bn(e,v)).toBytes(_)}function y(v){const _=l(v);return{secretKey:_,publicKey:f(_)}}function x(v){if(typeof v=="bigint")return!1;if(v instanceof r)return!0;const{secretKey:_,publicKey:B,publicKeyUncompressed:A}=i;if(e.allowedLengths||_===B)return;const M=wt("key",v).length;return M===B||M===A}function k(v,_,B=!0){if(x(v)===!0)throw new Error("first arg must be private key");if(x(_)===!1)throw new Error("second arg must be public key");const A=Bn(e,v);return r.fromHex(_).multiply(A).toBytes(B)}return Object.freeze({getPublicKey:f,getSharedSecret:k,keygen:y,Point:r,utils:{isValidSecretKey:s,isValidPublicKey:a,randomSecretKey:l,isValidPrivateKey:s,randomPrivateKey:l,normPrivateKeyToScalar:v=>Bn(e,v),precompute(v=8,_=r.BASE){return _.precompute(v,!1)}},lengths:i})}function bf(r,t,e={}){Xi(t),Xn(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||Us,i=e.hmac||((o,...c)=>fa(t,o,Ne(...c))),{Fp:s,Fn:a}=r,{ORDER:l,BITS:f}=a,{keygen:y,getPublicKey:x,getSharedSecret:k,utils:S,lengths:v}=wf(r,e),_={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},B="compact";function A(o){const c=l>>Rn;return o>c}function M(o,c){if(!a.isValidNot0(c))throw new Error(`invalid signature ${o}: out of range 1..Point.Fn.ORDER`);return c}function U(o,c){_s(c);const h=v.signature,g=c==="compact"?h:c==="recovered"?h+1:void 0;return Re(o,g,`${c} signature`)}class L{constructor(c,h,g){this.r=M("r",c),this.s=M("s",h),g!=null&&(this.recovery=g),Object.freeze(this)}static fromBytes(c,h=B){U(c,h);let g;if(h==="der"){const{r:p,s:u}=We.toSig(Re(c));return new L(p,u)}h==="recovered"&&(g=c[0],h="compact",c=c.subarray(1));const m=a.BYTES,b=c.subarray(0,m),E=c.subarray(m,m*2);return new L(a.fromBytes(b),a.fromBytes(E),g)}static fromHex(c,h){return this.fromBytes(hr(c),h)}addRecoveryBit(c){return new L(this.r,this.s,c)}recoverPublicKey(c){const h=s.ORDER,{r:g,s:m,recovery:b}=this;if(b==null||![0,1,2,3].includes(b))throw new Error("recovery id invalid");if(l*la<h&&b>1)throw new Error("recovery id is ambiguous for h>1 curve");const p=b===2||b===3?g+l:g;if(!s.isValid(p))throw new Error("recovery id 2 or 3 invalid");const u=s.toBytes(p),w=r.fromBytes(Ne(ha((b&1)===0),u)),D=a.inv(p),N=G(wt("msgHash",c)),H=a.create(-N*D),ot=a.create(m*D),rt=r.BASE.multiplyUnsafe(H).add(w.multiplyUnsafe(ot));if(rt.is0())throw new Error("point at infinify");return rt.assertValidity(),rt}hasHighS(){return A(this.s)}toBytes(c=B){if(_s(c),c==="der")return hr(We.hexFromSig(this));const h=a.toBytes(this.r),g=a.toBytes(this.s);if(c==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ne(Uint8Array.of(this.recovery),h,g)}return Ne(h,g)}toHex(c){return un(this.toBytes(c))}assertValidity(){}static fromCompact(c){return L.fromBytes(wt("sig",c),"compact")}static fromDER(c){return L.fromBytes(wt("sig",c),"der")}normalizeS(){return this.hasHighS()?new L(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return un(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return un(this.toBytes("compact"))}}const q=e.bits2int||function(c){if(c.length>8192)throw new Error("input is too large");const h=_r(c),g=c.length*8-f;return g>0?h>>BigInt(g):h},G=e.bits2int_modN||function(c){return a.create(q(c))},X=Yn(f);function et(o){return vs("num < 2^"+f,o,Ge,X),a.toBytes(o)}function Q(o,c){return Re(o,void 0,"message"),c?Re(t(o),void 0,"prehashed message"):o}function T(o,c,h){if(["recovered","canonical"].some(H=>H in h))throw new Error("sign() legacy options not supported");const{lowS:g,prehash:m,extraEntropy:b}=ds(h,_);o=Q(o,m);const E=G(o),p=Bn(a,c),u=[et(p),et(E)];if(b!=null&&b!==!1){const H=b===!0?n(v.secretKey):b;u.push(wt("extraEntropy",H))}const w=Ne(...u),D=E;function N(H){const ot=q(H);if(!a.isValidNot0(ot))return;const rt=a.inv(ot),tt=r.BASE.multiply(ot).toAffine(),ne=a.create(tt.x);if(ne===Ge)return;const ht=a.create(rt*a.create(D+ne*p));if(ht===Ge)return;let gt=(tt.x===ne?0:2)|Number(tt.y&Rn),Fn=ht;return g&&A(ht)&&(Fn=a.neg(ht),gt^=1),new L(ne,Fn,gt)}return{seed:w,k2sig:N}}function W(o,c,h={}){o=wt("message",o);const{seed:g,k2sig:m}=T(o,c,h);return ic(t.outputLen,a.BYTES,i)(g,m)}function K(o){let c;const h=typeof o=="string"||Zn(o),g=!h&&o!==null&&typeof o=="object"&&typeof o.r=="bigint"&&typeof o.s=="bigint";if(!h&&!g)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(g)c=new L(o.r,o.s);else if(h){try{c=L.fromBytes(wt("sig",o),"der")}catch(m){if(!(m instanceof We.Err))throw m}if(!c)try{c=L.fromBytes(wt("sig",o),"compact")}catch{return!1}}return c||!1}function $(o,c,h,g={}){const{lowS:m,prehash:b,format:E}=ds(g,_);if(h=wt("publicKey",h),c=Q(wt("message",c),b),"strict"in g)throw new Error("options.strict was renamed to lowS");const p=E===void 0?K(o):L.fromBytes(wt("sig",o),E);if(p===!1)return!1;try{const u=r.fromBytes(h);if(m&&p.hasHighS())return!1;const{r:w,s:D}=p,N=G(c),H=a.inv(D),ot=a.create(N*H),rt=a.create(w*H),tt=r.BASE.multiplyUnsafe(ot).add(u.multiplyUnsafe(rt));return tt.is0()?!1:a.create(tt.x)===w}catch{return!1}}function d(o,c,h={}){const{prehash:g}=ds(h,_);return c=Q(c,g),L.fromBytes(o,"recovered").recoverPublicKey(c).toBytes()}return Object.freeze({keygen:y,getPublicKey:x,getSharedSecret:k,utils:S,lengths:v,Point:r,sign:W,verify:$,recoverPublicKey:d,Signature:L,hash:t})}function vf(r){const t={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0;const i=pn(t.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),s={Fp:e,Fn:i,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:t,curveOpts:s}}function xf(r){const{CURVE:t,curveOpts:e}=vf(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:t,curveOpts:e,hash:r.hash,ecdsaOpts:n}}function Sf(r,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},r,mo(e.Fn.ORDER,e.Fn.BITS))})}function _f(r){const{CURVE:t,curveOpts:e,hash:n,ecdsaOpts:i}=xf(r),s=yf(t,e),a=bf(s,n,i);return Sf(r,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ef(r,t){const e=n=>_f({...r,hash:n});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Js={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},kf={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Di=BigInt(2);function Bf(r){const t=Js.p,e=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),l=BigInt(44),f=BigInt(88),y=r*r*r%t,x=y*y*r%t,k=yt(x,e,t)*x%t,S=yt(k,e,t)*x%t,v=yt(S,Di,t)*y%t,_=yt(v,i,t)*v%t,B=yt(_,s,t)*_%t,A=yt(B,l,t)*B%t,M=yt(A,f,t)*A%t,U=yt(M,l,t)*B%t,L=yt(U,e,t)*x%t,q=yt(L,a,t)*_%t,G=yt(q,n,t)*y%t,X=yt(G,Di,t);if(!Es.eql(Es.sqr(X),r))throw new Error("Cannot find square root");return X}const Es=pn(Js.p,{sqrt:Bf}),Af=Ef({...Js,Fp:Es,lowS:!0,endo:kf},ro);Jn.utils.randomPrivateKey;Jn.getPublicKey;function Ki(r){try{return Jn.ExtendedPoint.fromHex(r),!0}catch{return!1}}const ga=(r,t)=>Jn.sign(r,t.slice(0,32)),If=Jn.verify,se=r=>nt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?nt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):nt.Buffer.from(r);class pa{constructor(t){Object.assign(this,t)}encode(){return nt.Buffer.from(Co(Kn,this))}static decode(t){return Uo(Kn,this,t)}static decodeUnchecked(t){return Io(Kn,this,t)}}const Kn=new Map;var ma;const ya=32,Ze=32;function Mf(r){return r._bn!==void 0}let Hi=1;class J extends pa{constructor(t){if(super({}),this._bn=void 0,Mf(t))this._bn=t._bn;else{if(typeof t=="string"){const e=ue.decode(t);if(e.length!=Ze)throw new Error("Invalid public key input");this._bn=new Ni(e)}else this._bn=new Ni(t);if(this._bn.byteLength()>Ze)throw new Error("Invalid public key input")}}static unique(){const t=new J(Hi);return Hi+=1,new J(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return ue.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(nt.Buffer);if(t.length===Ze)return t;const e=nt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const i=nt.Buffer.concat([t.toBuffer(),nt.Buffer.from(e),n.toBuffer()]),s=Pi(i);return new J(s)}static createProgramAddressSync(t,e){let n=nt.Buffer.alloc(0);t.forEach(function(s){if(s.length>ya)throw new TypeError("Max seed length exceeded");n=nt.Buffer.concat([n,se(s)])}),n=nt.Buffer.concat([n,e.toBuffer(),nt.Buffer.from("ProgramDerivedAddress")]);const i=Pi(n);if(Ki(i))throw new Error("Invalid seeds, address must fall off the curve");return new J(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,i;for(;n!=0;){try{const s=t.concat(nt.Buffer.from([n]));i=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new J(t);return Ki(e.toBytes())}}ma=J;J.default=new ma("11111111111111111111111111111111");Kn.set(J,{kind:"struct",fields:[["_bn","u256"]]});new J("BPFLoader1111111111111111111111111111111111");const ln=1232,Rr=127,Wn=64;class Qs extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Qs.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ti extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ti.prototype,"name",{value:"TransactionExpiredTimeoutError"});class An extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(An.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Vn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return t.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const it=(r="publicKey")=>dt(32,r),Rf=(r="signature")=>dt(64,r),In=(r="string")=>{const t=V([Y("length"),Y("lengthPadding"),dt(fn(Y(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(s,a)=>e(s,a).chars.toString(),i.encode=(s,a,l)=>{const f={chars:nt.Buffer.from(s,"utf8")};return n(f,a,l)},i.alloc=s=>Y().span+Y().span+nt.Buffer.from(s,"utf8").length,i},Lf=(r="authorized")=>V([it("staker"),it("withdrawer")],r),Tf=(r="lockup")=>V([_e("unixTimestamp"),_e("epoch"),it("custodian")],r),Cf=(r="voteInit")=>V([it("nodePubkey"),it("authorizedVoter"),it("authorizedWithdrawer"),ct("commission")],r),Uf=(r="voteAuthorizeWithSeedArgs")=>V([Y("voteAuthorizationType"),it("currentAuthorityDerivedKeyOwnerPubkey"),In("currentAuthorityDerivedKeySeed"),it("newAuthorized")],r);function wa(r,t){const e=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){const s=t[i.property];if(Array.isArray(s))return s.length*e(i.elementLayout)}else if("fields"in i)return wa({layout:i},t[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=e(i)}),n}function Ee(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function ke(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function lt(r,t){if(!r)throw new Error(t||"Assertion failed")}class Lr{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,i=a=>{const l=a.toBase58();let f=n.get(l);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(l,f)),f},s=i(e);s.isSigner=!0,s.isWritable=!0;for(const a of t){i(a.programId).isInvoked=!0;for(const l of a.keys){const f=i(l.pubkey);f.isSigner||(f.isSigner=l.isSigner),f.isWritable||(f.isWritable=l.isWritable)}}return new Lr(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];lt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,f])=>f.isSigner&&f.isWritable),n=t.filter(([,f])=>f.isSigner&&!f.isWritable),i=t.filter(([,f])=>!f.isSigner&&f.isWritable),s=t.filter(([,f])=>!f.isSigner&&!f.isWritable),a={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{lt(e.length>0,"Expected at least one writable signer key");const[f]=e[0];lt(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...e.map(([f])=>new J(f)),...n.map(([f])=>new J(f)),...i.map(([f])=>new J(f)),...s.map(([f])=>new J(f))];return[a,l]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(e.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(t,e){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(e(a)){const l=new J(s),f=t.findIndex(y=>y.equals(l));f>=0&&(lt(f<256,"Max lookup table index exceeded"),n.push(f),i.push(l),this.keyMetaMap.delete(s))}return[n,i]}}const ba="Reached end of buffer unexpectedly";function je(r){if(r.length===0)throw new Error(ba);return r.shift()}function Be(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(ba);return r.splice(...t)}class Ue{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new J(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ue.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Vn(this.staticAccountKeys)}static compile(t){const e=Lr.compile(t.instructions,t.payerKey),[n,i]=e.getMessageComponents(),a=new Vn(i).compileInstructions(t.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:ue.encode(l.data)}));return new Ue({header:n,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:a})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,s=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ke(e,t);const n=this.instructions.map(k=>{const{accounts:S,programIdIndex:v}=k,_=Array.from(ue.decode(k.data));let B=[];ke(B,S.length);let A=[];return ke(A,_.length),{programIdIndex:v,keyIndicesCount:nt.Buffer.from(B),keyIndices:S,dataLength:nt.Buffer.from(A),data:_}});let i=[];ke(i,n.length);let s=nt.Buffer.alloc(ln);nt.Buffer.from(i).copy(s);let a=i.length;n.forEach(k=>{const v=V([ct("programIdIndex"),dt(k.keyIndicesCount.length,"keyIndicesCount"),ye(ct("keyIndex"),k.keyIndices.length,"keyIndices"),dt(k.dataLength.length,"dataLength"),ye(ct("userdatum"),k.data.length,"data")]).encode(k,s,a);a+=v}),s=s.slice(0,a);const l=V([dt(1,"numRequiredSignatures"),dt(1,"numReadonlySignedAccounts"),dt(1,"numReadonlyUnsignedAccounts"),dt(e.length,"keyCount"),ye(it("key"),t,"keys"),it("recentBlockhash")]),f={numRequiredSignatures:nt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:nt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:nt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:nt.Buffer.from(e),keys:this.accountKeys.map(k=>se(k.toBytes())),recentBlockhash:ue.decode(this.recentBlockhash)};let y=nt.Buffer.alloc(2048);const x=l.encode(f,y);return s.copy(y,x),y.slice(0,x+s.length)}static from(t){let e=[...t];const n=je(e);if(n!==(n&Rr))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=je(e),s=je(e),a=Ee(e);let l=[];for(let S=0;S<a;S++){const v=Be(e,0,Ze);l.push(new J(nt.Buffer.from(v)))}const f=Be(e,0,Ze),y=Ee(e);let x=[];for(let S=0;S<y;S++){const v=je(e),_=Ee(e),B=Be(e,0,_),A=Ee(e),M=Be(e,0,A),U=ue.encode(nt.Buffer.from(M));x.push({programIdIndex:v,accounts:B,data:U})}const k={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:ue.encode(nt.Buffer.from(f)),accountKeys:l,instructions:x};return new Ue(k)}}class dn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Vn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const i=t-n,s=this.addressTableLookups.reduce((a,l)=>a+l.writableIndexes.length,0);return i<s}else if(t>=this.header.numRequiredSignatures){const i=t-e,a=n-e-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=e-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=t.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)e.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)e.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Lr.compile(t.instructions,t.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=t.addressLookupTableAccounts||[];for(const x of s){const k=e.extractTableLookup(x);if(k!==void 0){const[S,{writable:v,readonly:_}]=k;n.push(S),i.writable.push(...v),i.readonly.push(..._)}}const[a,l]=e.getMessageComponents(),y=new Vn(l,i).compileInstructions(t.instructions);return new dn({header:a,staticAccountKeys:l,recentBlockhash:t.recentBlockhash,compiledInstructions:y,addressTableLookups:n})}serialize(){const t=Array();ke(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();ke(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();ke(s,this.addressTableLookups.length);const a=V([ct("prefix"),V([ct("numRequiredSignatures"),ct("numReadonlySignedAccounts"),ct("numReadonlyUnsignedAccounts")],"header"),dt(t.length,"staticAccountKeysLength"),ye(it(),this.staticAccountKeys.length,"staticAccountKeys"),it("recentBlockhash"),dt(n.length,"instructionsLength"),dt(e.length,"serializedInstructions"),dt(s.length,"addressTableLookupsLength"),dt(i.length,"serializedAddressTableLookups")]),l=new Uint8Array(ln),y=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(x=>x.toBytes()),recentBlockhash:ue.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},l);return l.slice(0,y)}serializeInstructions(){let t=0;const e=new Uint8Array(ln);for(const n of this.compiledInstructions){const i=Array();ke(i,n.accountKeyIndexes.length);const s=Array();ke(s,n.data.length);const a=V([ct("programIdIndex"),dt(i.length,"encodedAccountKeyIndexesLength"),ye(ct(),n.accountKeyIndexes.length,"accountKeyIndexes"),dt(s.length,"encodedDataLength"),dt(n.data.length,"data")]);t+=a.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(ln);for(const n of this.addressTableLookups){const i=Array();ke(i,n.writableIndexes.length);const s=Array();ke(s,n.readonlyIndexes.length);const a=V([it("accountKey"),dt(i.length,"encodedWritableIndexesLength"),ye(ct(),n.writableIndexes.length,"writableIndexes"),dt(s.length,"encodedReadonlyIndexesLength"),ye(ct(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=a.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=je(e),i=n&Rr;lt(n!==i,"Expected versioned message but received legacy message");const s=i;lt(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:je(e),numReadonlySignedAccounts:je(e),numReadonlyUnsignedAccounts:je(e)},l=[],f=Ee(e);for(let _=0;_<f;_++)l.push(new J(Be(e,0,Ze)));const y=ue.encode(Be(e,0,Ze)),x=Ee(e),k=[];for(let _=0;_<x;_++){const B=je(e),A=Ee(e),M=Be(e,0,A),U=Ee(e),L=new Uint8Array(Be(e,0,U));k.push({programIdIndex:B,accountKeyIndexes:M,data:L})}const S=Ee(e),v=[];for(let _=0;_<S;_++){const B=new J(Be(e,0,Ze)),A=Ee(e),M=Be(e,0,A),U=Ee(e),L=Be(e,0,U);v.push({accountKey:B,writableIndexes:M,readonlyIndexes:L})}return new dn({header:a,staticAccountKeys:l,recentBlockhash:y,compiledInstructions:k,addressTableLookups:v})}}const ei={deserializeMessageVersion(r){const t=r[0],e=t&Rr;return e===t?"legacy":e},deserialize:r=>{const t=ei.deserializeMessageVersion(r);if(t==="legacy")return Ue.from(r);if(t===0)return dn.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let $e=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const Of=nt.Buffer.alloc(Wn).fill(0);class ae{constructor(t){this.keys=void 0,this.programId=void 0,this.data=nt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Pe{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new ae(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let B=0;B<e.length;B++)if(e[B].programId===void 0)throw new Error(`Transaction instruction index ${B} has undefined program id`);const i=[],s=[];e.forEach(B=>{B.keys.forEach(M=>{s.push({...M})});const A=B.programId.toString();i.includes(A)||i.push(A)}),i.forEach(B=>{s.push({pubkey:new J(B),isSigner:!1,isWritable:!1})});const a=[];s.forEach(B=>{const A=B.pubkey.toString(),M=a.findIndex(U=>U.pubkey.toString()===A);M>-1?(a[M].isWritable=a[M].isWritable||B.isWritable,a[M].isSigner=a[M].isSigner||B.isSigner):a.push(B)}),a.sort(function(B,A){if(B.isSigner!==A.isSigner)return B.isSigner?-1:1;if(B.isWritable!==A.isWritable)return B.isWritable?-1:1;const M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return B.pubkey.toBase58().localeCompare(A.pubkey.toBase58(),"en",M)});const l=a.findIndex(B=>B.pubkey.equals(n));if(l>-1){const[B]=a.splice(l,1);B.isSigner=!0,B.isWritable=!0,a.unshift(B)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const B of this.signatures){const A=a.findIndex(M=>M.pubkey.equals(B.publicKey));if(A>-1)a[A].isSigner||(a[A].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${B.publicKey.toString()}`)}let f=0,y=0,x=0;const k=[],S=[];a.forEach(({pubkey:B,isSigner:A,isWritable:M})=>{A?(k.push(B.toString()),f+=1,M||(y+=1)):(S.push(B.toString()),M||(x+=1))});const v=k.concat(S),_=e.map(B=>{const{data:A,programId:M}=B;return{programIdIndex:v.indexOf(M.toString()),accounts:B.keys.map(U=>v.indexOf(U.pubkey.toString())),data:ue.encode(A)}});return _.forEach(B=>{lt(B.programIdIndex>=0),B.accounts.forEach(A=>lt(A>=0))}),new Ue({header:{numRequiredSignatures:f,numReadonlySignedAccounts:y,numReadonlyUnsignedAccounts:x},accountKeys:v,recentBlockhash:t,instructions:_})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((i,s)=>e[s].equals(i.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const i=n.toString();return e.has(i)?!1:(e.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const s of t){const a=s.publicKey.toString();e.has(a)||(e.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const s of t){const a=s.publicKey.toString();e.has(a)||(e.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(i=>{const s=ga(n,i.secretKey);this._addSignature(i.publicKey,se(s))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){lt(e.length===64);const n=this.signatures.findIndex(i=>t.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=nt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?e&&(n.missing||(n.missing=[])).push(s):If(i,t,s.toBytes())||(n.invalid||(n.invalid=[])).push(s);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,e);if(s){let a="Signature verification failed.";throw s.invalid&&(a+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),s.missing&&(a+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(i)}_serialize(t){const{signatures:e}=this,n=[];ke(n,e.length);const i=n.length+e.length*64+t.length,s=nt.Buffer.alloc(i);return lt(e.length<256),nt.Buffer.from(n).copy(s,0),e.forEach(({signature:a},l)=>{a!==null&&(lt(a.length===64,"signature has invalid length"),nt.Buffer.from(a).copy(s,n.length+l*64))}),t.copy(s,n.length+e.length*64),lt(s.length<=ln,`Transaction too large: ${s.length} > ${ln}`),s}get keys(){return lt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return lt(this.instructions.length===1),this.instructions[0].programId}get data(){return lt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=Ee(e);let i=[];for(let s=0;s<n;s++){const a=Be(e,0,Wn);i.push(ue.encode(nt.Buffer.from(a)))}return Pe.populate(Ue.from(e),i)}static populate(t,e=[]){const n=new Pe;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((i,s)=>{const a={signature:i==ue.encode(Of)?null:ue.decode(i),publicKey:t.accountKeys[s]};n.signatures.push(a)}),t.instructions.forEach(i=>{const s=i.accounts.map(a=>{const l=t.accountKeys[a];return{pubkey:l,isSigner:n.signatures.some(f=>f.publicKey.toString()===l.toString())||t.isAccountSigner(a),isWritable:t.isAccountWritable(a)}});n.instructions.push(new ae({keys:s,programId:t.accountKeys[i.programIdIndex],data:ue.decode(i.data)}))}),n._message=t,n._json=n.toJSON(),n}}class ni{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:n,compiledInstructions:i,recentBlockhash:s}=t,{numRequiredSignatures:a,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:f}=n,y=a-l;lt(y>0,"Message header is invalid");const x=t.staticAccountKeys.length-a-f;lt(x>=0,"Message header is invalid");const k=t.getAccountKeys(e),S=k.get(0);if(S===void 0)throw new Error("Failed to decompile message because no account keys were found");const v=[];for(const _ of i){const B=[];for(const M of _.accountKeyIndexes){const U=k.get(M);if(U===void 0)throw new Error(`Failed to find key for account key index ${M}`);const L=M<a;let q;L?q=M<y:M<k.staticAccountKeys.length?q=M-a<x:q=M-k.staticAccountKeys.length<k.accountKeysFromLookups.writable.length,B.push({pubkey:U,isSigner:M<n.numRequiredSignatures,isWritable:q})}const A=k.get(_.programIdIndex);if(A===void 0)throw new Error(`Failed to find program id for program id index ${_.programIdIndex}`);v.push(new ae({programId:A,data:se(_.data),keys:B}))}return new ni({payerKey:S,instructions:v,recentBlockhash:s})}compileToLegacyMessage(){return Ue.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return dn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class ri{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)lt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const n=[];for(let i=0;i<t.header.numRequiredSignatures;i++)n.push(new Uint8Array(Wn));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),e=Array();ke(e,this.signatures.length);const n=V([dt(e.length,"encodedSignaturesLength"),ye(Rf(),this.signatures.length,"signatures"),dt(t.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},i);return i.slice(0,s)}static deserialize(t){let e=[...t];const n=[],i=Ee(e);for(let a=0;a<i;a++)n.push(new Uint8Array(Be(e,0,Wn)));const s=ei.deserialize(new Uint8Array(e));return new ri(s,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of t){const s=n.findIndex(a=>a.equals(i.publicKey));lt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=ga(e,i.secretKey)}}addSignature(t,e){lt(e.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(t));lt(i>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=e}}const Nf=160,Pf=64,qf=Nf/Pf,Ff=1e3/qf;new J("SysvarC1ock11111111111111111111111111111111");new J("SysvarEpochSchedu1e111111111111111111111111");new J("Sysvar1nstructions1111111111111111111111111");const fr=new J("SysvarRecentB1ockHashes11111111111111111111"),ks=new J("SysvarRent111111111111111111111111111111111");new J("SysvarRewards111111111111111111111111111111");new J("SysvarS1otHashes111111111111111111111111111");new J("SysvarS1otHistory11111111111111111111111111");new J("SysvarStakeHistory1111111111111111111111111");class Bs extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let l;switch(t){case"send":l=`Transaction ${e} resulted in an error. 
${n}. `+s+a;break;case"simulate":l=`Simulation failed. 
Message: ${n}. 
`+s+a;break;default:l=`Unknown action '${(f=>f)(t)}'`}super(l),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,e(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class j extends Error{constructor({code:t,message:e,data:n},i){super(i!=null?`${i}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function kn(r){return new Promise(t=>setTimeout(t,r))}function me(r,t){const e=r.layout.span>=0?r.layout.span:wa(r,t),n=nt.Buffer.alloc(e),i=Object.assign({instruction:r.index},t);return r.layout.encode(i,n),n}const va=oe("lamportsPerSignature"),xa=V([Y("version"),Y("state"),it("authorizedPubkey"),it("nonce"),V([va],"feeCalculator")]),As=xa.span;class Tr{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=xa.decode(se(t),0);return new Tr({authorizedPubkey:new J(e.authorizedPubkey),nonce:new J(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Un(r){const t=dt(8,r),e=t.decode.bind(t),n=t.encode.bind(t),i=t,s=Au();return i.decode=(a,l)=>{const f=e(a,l);return s.decode(f)},i.encode=(a,l,f)=>{const y=s.encode(a);return n(y,l,f)},i}const Se=Object.freeze({Create:{index:0,layout:V([Y("instruction"),_e("lamports"),_e("space"),it("programId")])},Assign:{index:1,layout:V([Y("instruction"),it("programId")])},Transfer:{index:2,layout:V([Y("instruction"),Un("lamports")])},CreateWithSeed:{index:3,layout:V([Y("instruction"),it("base"),In("seed"),_e("lamports"),_e("space"),it("programId")])},AdvanceNonceAccount:{index:4,layout:V([Y("instruction")])},WithdrawNonceAccount:{index:5,layout:V([Y("instruction"),_e("lamports")])},InitializeNonceAccount:{index:6,layout:V([Y("instruction"),it("authorized")])},AuthorizeNonceAccount:{index:7,layout:V([Y("instruction"),it("authorized")])},Allocate:{index:8,layout:V([Y("instruction"),_e("space")])},AllocateWithSeed:{index:9,layout:V([Y("instruction"),it("base"),In("seed"),_e("space"),it("programId")])},AssignWithSeed:{index:10,layout:V([Y("instruction"),it("base"),In("seed"),it("programId")])},TransferWithSeed:{index:11,layout:V([Y("instruction"),Un("lamports"),In("seed"),it("programId")])},UpgradeNonceAccount:{index:12,layout:V([Y("instruction")])}});class jn{constructor(){}static createAccount(t){const e=Se.Create,n=me(e,{lamports:t.lamports,space:t.space,programId:se(t.programId.toBuffer())});return new ae({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const i=Se.TransferWithSeed;e=me(i,{lamports:BigInt(t.lamports),seed:t.seed,programId:se(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Se.Transfer;e=me(i,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new ae({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const i=Se.AssignWithSeed;e=me(i,{base:se(t.basePubkey.toBuffer()),seed:t.seed,programId:se(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Se.Assign;e=me(i,{programId:se(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new ae({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Se.CreateWithSeed,n=me(e,{base:se(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:se(t.programId.toBuffer())});let i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new ae({keys:i,programId:this.programId,data:n})}static createNonceAccount(t){const e=new Pe;"basePubkey"in t&&"seed"in t?e.add(jn.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:As,programId:this.programId})):e.add(jn.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:As,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=Se.InitializeNonceAccount,n=me(e,{authorized:se(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fr,isSigner:!1,isWritable:!1},{pubkey:ks,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new ae(i)}static nonceAdvance(t){const e=Se.AdvanceNonceAccount,n=me(e),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:fr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new ae(i)}static nonceWithdraw(t){const e=Se.WithdrawNonceAccount,n=me(e,{lamports:t.lamports});return new ae({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:fr,isSigner:!1,isWritable:!1},{pubkey:ks,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=Se.AuthorizeNonceAccount,n=me(e,{authorized:se(t.newAuthorizedPubkey.toBuffer())});return new ae({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const i=Se.AllocateWithSeed;e=me(i,{base:se(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:se(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Se.Allocate;e=me(i,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new ae({keys:n,programId:this.programId,data:e})}}jn.programId=new J("11111111111111111111111111111111");new J("BPFLoader2111111111111111111111111111111111");function zf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var gs,$i;function Df(){if($i)return gs;$i=1;var r=Object.prototype.toString,t=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function e(n,i){var s,a,l,f,y,x,k;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),i);if(k=r.call(n),k==="[object Array]"){for(l="[",a=n.length-1,s=0;s<a;s++)l+=e(n[s],!0)+",";return a>-1&&(l+=e(n[s],!0)),l+"]"}else if(k==="[object Object]"){for(f=t(n).sort(),a=f.length,l="",s=0;s<a;)y=f[s],x=e(n[y],!1),x!==void 0&&(l&&(l+=","),l+=JSON.stringify(y)+":"+x),s++;return"{"+l+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return gs=function(n){var i=e(n,!1);if(i!==void 0)return""+i},gs}var Kf=Df(),Wi=zf(Kf);const zn=32;function ps(r){let t=0;for(;r>1;)r/=2,t++;return t}function Hf(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class Sa{constructor(t,e,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=ps(Hf(t+zn+1))-ps(zn)-1,n=this.getSlotsInEpoch(e),i=t-(n-zn);return[e,i]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=e%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*zn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+ps(zn)):this.slotsPerEpoch}}var $f=globalThis.fetch;class Wf extends df{constructor(t,e,n){const i=s=>{const a=lf(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Vf(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const Vi=56;class Is{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Vf(jf,t),n=t.length-Vi;lt(n>=0,"lookup table is invalid"),lt(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=V([ye(it(),i,"addresses")]).decode(t.slice(Vi));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new J(e.authority[0]):void 0,addresses:s.map(a=>new J(a))}}}const jf={index:1,layout:V([Y("typeIndex"),Un("deactivationSlot"),oe("lastExtendedSlot"),ct("lastExtendedStartIndex"),ct(),ye(it(),fn(ct(),-1),"authority")])},Gf=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Zf(r){const t=r.match(Gf);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,i,s]=t,a=r.startsWith("https:")?"wss:":"ws:",l=i==null?null:parseInt(i.slice(1),10),f=l==null?"":`:${l+1}`;return`${a}//${n}${f}${s}`}const mt=er(Ys(J),O(),r=>new J(r)),_a=Xs([O(),pt("base64")]),si=er(Ys(nt.Buffer),_a,r=>nt.Buffer.from(r[0],"base64")),Ea=30*1e3;function Yf(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function ft(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...i}=r;t=n,e=i}return{commitment:t,config:e}}function ji(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function ka(r){return be([C({jsonrpc:pt("2.0"),id:O(),result:r}),C({jsonrpc:pt("2.0"),id:O(),error:C({code:Pn(),message:O(),data:Z(Uu())})})])}const Xf=ka(Pn());function st(r){return er(ka(r),Xf,t=>"error"in t?t:{...t,result:P(t.result,r)})}function bt(r){return st(C({context:C({slot:I()}),value:r}))}function Cr(r){return C({context:C({slot:I()}),value:r})}function ms(r,t){return r===0?new dn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new J(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ue.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Ue(t)}const Jf=C({foundation:I(),foundationTerm:I(),initial:I(),taper:I(),terminal:I()}),Qf=st(F(z(C({epoch:I(),effectiveSlot:I(),amount:I(),postBalance:I(),commission:Z(z(I()))})))),tl=F(C({slot:I(),prioritizationFee:I()})),el=C({total:I(),validator:I(),foundation:I(),epoch:I()}),nl=C({epoch:I(),slotIndex:I(),slotsInEpoch:I(),absoluteSlot:I(),blockHeight:Z(I()),transactionCount:Z(I())}),rl=C({slotsPerEpoch:I(),leaderScheduleSlotOffset:I(),warmup:qe(),firstNormalEpoch:I(),firstNormalSlot:I()}),sl=ea(O(),F(I())),wn=z(be([C({}),O()])),il=C({err:wn}),ol=pt("receivedSignature"),al=C({"solana-core":O(),"feature-set":Z(I())}),cl=C({program:O(),programId:mt,parsed:Pn()}),ul=C({programId:mt,accounts:F(mt),data:O()}),Gi=bt(C({err:z(be([C({}),O()])),logs:z(F(O())),accounts:Z(z(F(z(C({executable:qe(),owner:O(),lamports:I(),data:F(O()),rentEpoch:Z(I())}))))),unitsConsumed:Z(I()),returnData:Z(z(C({programId:O(),data:Xs([O(),pt("base64")])}))),innerInstructions:Z(z(F(C({index:I(),instructions:F(be([cl,ul]))}))))})),fl=bt(C({byIdentity:ea(O(),F(I())),range:C({firstSlot:I(),lastSlot:I()})}));function ll(r,t,e,n,i,s){const a=e||$f;let l;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(x,k)=>{const S=await new Promise((v,_)=>{try{n(x,k,(B,A)=>v([B,A]))}catch(B){_(B)}});return await a(...S)}),new cf(async(x,k)=>{const S={method:"POST",body:x,agent:l,headers:Object.assign({"Content-Type":"application/json"},t||{},lh)};try{let v=5,_,B=500;for(;f?_=await f(r,S):_=await a(r,S),!(_.status!==429||i===!0||(v-=1,v===0));)console.error(`Server responded with ${_.status} ${_.statusText}.  Retrying after ${B}ms delay...`),await kn(B),B*=2;const A=await _.text();_.ok?k(null,A):k(new Error(`${_.status} ${_.statusText}: ${A}`))}catch(v){v instanceof Error&&k(v)}},{})}function hl(r){return(t,e)=>new Promise((n,i)=>{r.request(t,e,(s,a)=>{if(s){i(s);return}n(a)})})}function dl(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const i=t.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}e(a)})})}const gl=st(Jf),pl=st(el),ml=st(tl),yl=st(nl),wl=st(rl),bl=st(sl),vl=st(I()),xl=bt(C({total:I(),circulating:I(),nonCirculating:I(),nonCirculatingAccounts:F(mt)})),Ms=C({amount:O(),uiAmount:z(I()),decimals:I(),uiAmountString:Z(O())}),Sl=bt(F(C({address:mt,amount:O(),uiAmount:z(I()),decimals:I(),uiAmountString:Z(O())}))),_l=bt(F(C({pubkey:mt,account:C({executable:qe(),owner:mt,lamports:I(),data:si,rentEpoch:I()})}))),Rs=C({program:O(),parsed:Pn(),space:I()}),El=bt(F(C({pubkey:mt,account:C({executable:qe(),owner:mt,lamports:I(),data:Rs,rentEpoch:I()})}))),kl=bt(F(C({lamports:I(),address:mt}))),Gn=C({executable:qe(),owner:mt,lamports:I(),data:si,rentEpoch:I()}),Bl=C({pubkey:mt,account:Gn}),Al=er(be([Ys(nt.Buffer),Rs]),be([_a,Rs]),r=>Array.isArray(r)?P(r,si):r),Ls=C({executable:qe(),owner:mt,lamports:I(),data:Al,rentEpoch:I()}),Il=C({pubkey:mt,account:Ls}),Ml=C({state:be([pt("active"),pt("inactive"),pt("activating"),pt("deactivating")]),active:I(),inactive:I()}),Rl=st(F(C({signature:O(),slot:I(),err:wn,memo:z(O()),blockTime:Z(z(I()))}))),Ll=st(F(C({signature:O(),slot:I(),err:wn,memo:z(O()),blockTime:Z(z(I()))}))),Tl=C({subscription:I(),result:Cr(Gn)}),Cl=C({pubkey:mt,account:Gn}),Ul=C({subscription:I(),result:Cr(Cl)}),Ol=C({parent:I(),slot:I(),root:I()}),Nl=C({subscription:I(),result:Ol}),Pl=be([C({type:be([pt("firstShredReceived"),pt("completed"),pt("optimisticConfirmation"),pt("root")]),slot:I(),timestamp:I()}),C({type:pt("createdBank"),parent:I(),slot:I(),timestamp:I()}),C({type:pt("frozen"),slot:I(),timestamp:I(),stats:C({numTransactionEntries:I(),numSuccessfulTransactions:I(),numFailedTransactions:I(),maxTransactionsPerEntry:I()})}),C({type:pt("dead"),slot:I(),timestamp:I(),err:O()})]),ql=C({subscription:I(),result:Pl}),Fl=C({subscription:I(),result:Cr(be([il,ol]))}),zl=C({subscription:I(),result:I()}),Dl=C({pubkey:O(),gossip:z(O()),tpu:z(O()),rpc:z(O()),version:z(O())}),Zi=C({votePubkey:O(),nodePubkey:O(),activatedStake:I(),epochVoteAccount:qe(),epochCredits:F(Xs([I(),I(),I()])),commission:I(),lastVote:I(),rootSlot:z(I())}),Kl=st(C({current:F(Zi),delinquent:F(Zi)})),Hl=be([pt("processed"),pt("confirmed"),pt("finalized")]),$l=C({slot:I(),confirmations:z(I()),err:wn,confirmationStatus:Z(Hl)}),Wl=bt(F(z($l))),Vl=st(I()),Ba=C({accountKey:mt,writableIndexes:F(I()),readonlyIndexes:F(I())}),ii=C({signatures:F(O()),message:C({accountKeys:F(O()),header:C({numRequiredSignatures:I(),numReadonlySignedAccounts:I(),numReadonlyUnsignedAccounts:I()}),instructions:F(C({accounts:F(I()),data:O(),programIdIndex:I()})),recentBlockhash:O(),addressTableLookups:Z(F(Ba))})}),Aa=C({pubkey:mt,signer:qe(),writable:qe(),source:Z(be([pt("transaction"),pt("lookupTable")]))}),Ia=C({accountKeys:F(Aa),signatures:F(O())}),Ma=C({parsed:Pn(),program:O(),programId:mt}),Ra=C({accounts:F(mt),data:O(),programId:mt}),jl=be([Ra,Ma]),Gl=be([C({parsed:Pn(),program:O(),programId:O()}),C({accounts:F(O()),data:O(),programId:O()})]),La=er(jl,Gl,r=>"accounts"in r?P(r,Ra):P(r,Ma)),Ta=C({signatures:F(O()),message:C({accountKeys:F(Aa),instructions:F(La),recentBlockhash:O(),addressTableLookups:Z(z(F(Ba)))})}),xr=C({accountIndex:I(),mint:O(),owner:Z(O()),programId:Z(O()),uiTokenAmount:Ms}),Ca=C({writable:F(mt),readonly:F(mt)}),Ur=C({err:wn,fee:I(),innerInstructions:Z(z(F(C({index:I(),instructions:F(C({accounts:F(I()),data:O(),programIdIndex:I()}))})))),preBalances:F(I()),postBalances:F(I()),logMessages:Z(z(F(O()))),preTokenBalances:Z(z(F(xr))),postTokenBalances:Z(z(F(xr))),loadedAddresses:Z(Ca),computeUnitsConsumed:Z(I()),costUnits:Z(I())}),oi=C({err:wn,fee:I(),innerInstructions:Z(z(F(C({index:I(),instructions:F(La)})))),preBalances:F(I()),postBalances:F(I()),logMessages:Z(z(F(O()))),preTokenBalances:Z(z(F(xr))),postTokenBalances:Z(z(F(xr))),loadedAddresses:Z(Ca),computeUnitsConsumed:Z(I()),costUnits:Z(I())}),qn=be([pt(0),pt("legacy")]),bn=C({pubkey:O(),lamports:I(),postBalance:z(I()),rewardType:z(O()),commission:Z(z(I()))}),Zl=st(z(C({blockhash:O(),previousBlockhash:O(),parentSlot:I(),transactions:F(C({transaction:ii,meta:z(Ur),version:Z(qn)})),rewards:Z(F(bn)),blockTime:z(I()),blockHeight:z(I())}))),Yl=st(z(C({blockhash:O(),previousBlockhash:O(),parentSlot:I(),rewards:Z(F(bn)),blockTime:z(I()),blockHeight:z(I())}))),Xl=st(z(C({blockhash:O(),previousBlockhash:O(),parentSlot:I(),transactions:F(C({transaction:Ia,meta:z(Ur),version:Z(qn)})),rewards:Z(F(bn)),blockTime:z(I()),blockHeight:z(I())}))),Jl=st(z(C({blockhash:O(),previousBlockhash:O(),parentSlot:I(),transactions:F(C({transaction:Ta,meta:z(oi),version:Z(qn)})),rewards:Z(F(bn)),blockTime:z(I()),blockHeight:z(I())}))),Ql=st(z(C({blockhash:O(),previousBlockhash:O(),parentSlot:I(),transactions:F(C({transaction:Ia,meta:z(oi),version:Z(qn)})),rewards:Z(F(bn)),blockTime:z(I()),blockHeight:z(I())}))),th=st(z(C({blockhash:O(),previousBlockhash:O(),parentSlot:I(),rewards:Z(F(bn)),blockTime:z(I()),blockHeight:z(I())}))),eh=st(z(C({blockhash:O(),previousBlockhash:O(),parentSlot:I(),transactions:F(C({transaction:ii,meta:z(Ur)})),rewards:Z(F(bn)),blockTime:z(I())}))),Yi=st(z(C({blockhash:O(),previousBlockhash:O(),parentSlot:I(),signatures:F(O()),blockTime:z(I())}))),ys=st(z(C({slot:I(),meta:z(Ur),blockTime:Z(z(I())),transaction:ii,version:Z(qn)}))),ur=st(z(C({slot:I(),transaction:Ta,meta:z(oi),blockTime:Z(z(I())),version:Z(qn)}))),nh=bt(C({blockhash:O(),lastValidBlockHeight:I()})),rh=bt(qe()),sh=C({slot:I(),numTransactions:I(),numSlots:I(),samplePeriodSecs:I()}),ih=st(F(sh)),oh=bt(z(C({feeCalculator:C({lamportsPerSignature:I()})}))),ah=st(O()),ch=st(O()),uh=C({err:wn,logs:F(O()),signature:O()}),fh=C({result:Cr(uh),subscription:I()}),lh={"solana-client":"js/1.0.0-maintenance"};class hh{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const y={};return async x=>{const{commitment:k,config:S}=ft(x),v=this._buildArgs([],k,void 0,S),_=Wi(v);return y[_]=y[_]??(async()=>{try{const B=await this._rpcRequest("getBlockHeight",v),A=P(B,st(I()));if("error"in A)throw new j(A.error,"failed to get block height information");return A.result}finally{delete y[_]}})(),await y[_]}})();let n,i,s,a,l,f;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,i=e.httpHeaders,s=e.fetch,a=e.fetchMiddleware,l=e.disableRetryOnRateLimit,f=e.httpAgent),this._rpcEndpoint=Yf(t),this._rpcWsEndpoint=n||Zf(t),this._rpcClient=ll(t,i,s,a,l,f),this._rpcRequest=hl(this._rpcClient),this._rpcBatchRequest=dl(this._rpcClient),this._rpcWebSocket=new Wf(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:i}=ft(e),s=this._buildArgs([t.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),l=P(a,bt(I()));if("error"in l)throw new j(l.error,`failed to get balance for ${t.toBase58()}`);return l.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=P(e,st(z(I())));if("error"in n)throw new j(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=P(t,st(I()));if("error"in e)throw new j(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=P(t,vl);if("error"in e)throw new j(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),i=P(n,xl);if("error"in i)throw new j(i.error,"failed to get supply");return i.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenSupply",n),s=P(i,bt(Ms));if("error"in s)throw new j(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenAccountBalance",n),s=P(i,bt(Ms));if("error"in s)throw new j(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(t,e,n){const{commitment:i,config:s}=ft(n);let a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});const l=this._buildArgs(a,i,"base64",s),f=await this._rpcRequest("getTokenAccountsByOwner",l),y=P(f,_l);if("error"in y)throw new j(y.error,`failed to get token accounts owned by account ${t.toBase58()}`);return y.result}async getParsedTokenAccountsByOwner(t,e,n){let i=[t.toBase58()];"mint"in e?i.push({mint:e.mint.toBase58()}):i.push({programId:e.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),l=P(a,El);if("error"in l)throw new j(l.error,`failed to get token accounts owned by account ${t.toBase58()}`);return l.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],i=await this._rpcRequest("getLargestAccounts",n),s=P(i,kl);if("error"in s)throw new j(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenLargestAccounts",n),s=P(i,Sl);if("error"in s)throw new j(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:i}=ft(e),s=this._buildArgs([t.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),l=P(a,bt(z(Gn)));if("error"in l)throw new j(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getParsedAccountInfo(t,e){const{commitment:n,config:i}=ft(e),s=this._buildArgs([t.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),l=P(a,bt(z(Ls)));if("error"in l)throw new j(l.error,`failed to get info about account ${t.toBase58()}`);return l.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:i}=ft(e),s=t.map(y=>y.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),l=await this._rpcRequest("getMultipleAccounts",a),f=P(l,bt(F(z(Ls))));if("error"in f)throw new j(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:i}=ft(e),s=t.map(y=>y.toBase58()),a=this._buildArgs([s],n,"base64",i),l=await this._rpcRequest("getMultipleAccounts",a),f=P(l,bt(F(z(Gn))));if("error"in f)throw new j(f.error,`failed to get info for accounts ${s}`);return f.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:i,config:s}=ft(e),a=this._buildArgs([t.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),l=await this._rpcRequest("getStakeActivation",a),f=P(l,st(Ml));if("error"in f)throw new j(f.error,`failed to get Stake Activation ${t.toBase58()}`);return f.result}async getProgramAccounts(t,e){const{commitment:n,config:i}=ft(e),{encoding:s,...a}=i||{},l=this._buildArgs([t.toBase58()],n,s||"base64",{...a,...a.filters?{filters:ji(a.filters)}:null}),f=await this._rpcRequest("getProgramAccounts",l),y=F(Bl),x=a.withContext===!0?P(f,bt(y)):P(f,st(y));if("error"in x)throw new j(x.error,`failed to get accounts owned by program ${t.toBase58()}`);return x.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:i}=ft(e),s=this._buildArgs([t.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),l=P(a,st(F(Il)));if("error"in l)throw new j(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async confirmTransaction(t,e){var s;let n;if(typeof t=="string")n=t;else{const a=t;if((s=a.abortSignal)!=null&&s.aborted)return Promise.reject(a.abortSignal.reason);n=a.signature}let i;try{i=ue.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return lt(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,i,s=!1;const a=new Promise((f,y)=>{try{n=this.onSignature(e,(k,S)=>{n=void 0;const v={context:S,value:k};f({__type:$e.PROCESSED,response:v})},t);const x=new Promise(k=>{n==null?k():i=this._onSubscriptionStateChange(n,S=>{S==="subscribed"&&k()})});(async()=>{if(await x,s)return;const k=await this.getSignatureStatus(e);if(s||k==null)return;const{context:S,value:v}=k;if(v!=null)if(v!=null&&v.err)y(v.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(v.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(v.confirmationStatus==="processed"||v.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,f({__type:$e.PROCESSED,response:{context:S,value:v}})}})()}catch(x){y(x)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(k=>{const S=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let v=await S();if(!s){for(;v<=n;)if(await kn(1e3),s||(v=await S(),s))return;k({__type:$e.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),y=this.getCancellationPromise(e);let x;try{const k=await Promise.race([y,f,a]);if(k.__type===$e.PROCESSED)x=k.response;else throw new Qs(i)}finally{s=!0,l()}return x}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let l=!1;const f=new Promise(v=>{let _=s,B=null;const A=async()=>{try{const{context:M,value:U}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:n});return B=M.slot,U==null?void 0:U.nonce}catch{return _}};(async()=>{if(_=await A(),!l)for(;;){if(s!==_){v({__type:$e.NONCE_INVALID,slotInWhichNonceDidAdvance:B});return}if(await kn(2e3),l||(_=await A(),l))return}})()}),{abortConfirmation:y,confirmationPromise:x}=this.getTransactionConfirmationPromise({commitment:t,signature:a}),k=this.getCancellationPromise(e);let S;try{const v=await Promise.race([k,x,f]);if(v.__type===$e.PROCESSED)S=v.response;else{let _;for(;;){const B=await this.getSignatureStatus(a);if(B==null)break;if(B.context.slot<(v.slotInWhichNonceDidAdvance??n)){await kn(400);continue}_=B;break}if(_!=null&&_.value){const B=t||"finalized",{confirmationStatus:A}=_.value;switch(B){case"processed":case"recent":if(A!=="processed"&&A!=="confirmed"&&A!=="finalized")throw new An(a);break;case"confirmed":case"single":case"singleGossip":if(A!=="confirmed"&&A!=="finalized")throw new An(a);break;case"finalized":case"max":case"root":if(A!=="finalized")throw new An(a);break;default:}S={context:_.context,value:{err:_.value.err}}}else throw new An(a)}}finally{l=!0,y()}return S}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const i=new Promise(f=>{let y=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{y=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:$e.TIMED_OUT,timeoutMs:y}),y)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let l;try{const f=await Promise.race([a,i]);if(f.__type===$e.PROCESSED)l=f.response;else throw new ti(e,f.timeoutMs/1e3)}finally{clearTimeout(n),s()}return l}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=P(t,st(F(Dl)));if("error"in e)throw new j(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),i=P(n,Kl);if("error"in i)throw new j(i.error,"failed to get vote accounts");return i.result}async getSlot(t){const{commitment:e,config:n}=ft(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getSlot",i),a=P(s,st(I()));if("error"in a)throw new j(a.error,"failed to get slot");return a.result}async getSlotLeader(t){const{commitment:e,config:n}=ft(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=P(s,st(O()));if("error"in a)throw new j(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(t,e){const n=[t,e],i=await this._rpcRequest("getSlotLeaders",n),s=P(i,st(F(mt)));if("error"in s)throw new j(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(t,e){const{context:n,value:i}=await this.getSignatureStatuses([t],e);lt(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const i=await this._rpcRequest("getSignatureStatuses",n),s=P(i,Wl);if("error"in s)throw new j(s.error,"failed to get signature status");return s.result}async getTransactionCount(t){const{commitment:e,config:n}=ft(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=P(s,st(I()));if("error"in a)throw new j(a.error,"failed to get transaction count");return a.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),i=P(n,gl);if("error"in i)throw new j(i.error,"failed to get inflation");return i.result}async getInflationReward(t,e,n){const{commitment:i,config:s}=ft(n),a=this._buildArgs([t.map(y=>y.toBase58())],i,void 0,{...s,epoch:e??(s==null?void 0:s.epoch)}),l=await this._rpcRequest("getInflationReward",a),f=P(l,Qf);if("error"in f)throw new j(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=P(t,pl);if("error"in e)throw new j(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=ft(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=P(s,yl);if("error"in a)throw new j(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=P(t,wl);if("error"in e)throw new j(e.error,"failed to get epoch schedule");const n=e.result;return new Sa(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=P(t,bl);if("error"in e)throw new j(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=P(i,Vl);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=P(e,ih);if("error"in n)throw new j(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=P(i,oh);if("error"in s)throw new j(s.error,"failed to get fee calculator");const{context:a,value:l}=s.result;return{context:a,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(t,e){const n=se(t.serialize()).toString("base64"),i=this._buildArgs([n],e),s=await this._rpcRequest("getFeeForMessage",i),a=P(s,bt(z(I())));if("error"in a)throw new j(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(t){var a;const e=(a=t==null?void 0:t.lockedWritableAccounts)==null?void 0:a.map(l=>l.toBase58()),n=e!=null&&e.length?[e]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=P(i,ml);if("error"in s)throw new j(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=ft(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=P(s,nh);if("error"in a)throw new j(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(t,e){const{commitment:n,config:i}=ft(e),s=this._buildArgs([t],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),l=P(a,rh);if("error"in l)throw new j(l.error,"failed to determine if the blockhash `"+t+"`is valid");return l.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=P(t,st(al));if("error"in e)throw new j(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=P(t,st(O()));if("error"in e)throw new j(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:i}=ft(e),s=this._buildArgsAtLeastConfirmed([t],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const l=P(a,Xl);if("error"in l)throw l.error;return l.result}case"none":{const l=P(a,Yl);if("error"in l)throw l.error;return l.result}default:{const l=P(a,Zl);if("error"in l)throw l.error;const{result:f}=l;return f?{...f,transactions:f.transactions.map(({transaction:y,meta:x,version:k})=>({meta:x,transaction:{...y,message:ms(k,y.message)},version:k}))}:null}}}catch(l){throw new j(l,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:i}=ft(e),s=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const l=P(a,Ql);if("error"in l)throw l.error;return l.result}case"none":{const l=P(a,th);if("error"in l)throw l.error;return l.result}default:{const l=P(a,Jl);if("error"in l)throw l.error;return l.result}}}catch(l){throw new j(l,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:l,...f}=t;n=l,e=f}const i=this._buildArgs([],n,"base64",e),s=await this._rpcRequest("getBlockProduction",i),a=P(s,fl);if("error"in a)throw new j(a.error,"failed to get block production information");return a.result}async getTransaction(t,e){const{commitment:n,config:i}=ft(e),s=this._buildArgsAtLeastConfirmed([t],n,void 0,i),a=await this._rpcRequest("getTransaction",s),l=P(a,ys);if("error"in l)throw new j(l.error,"failed to get transaction");const f=l.result;return f&&{...f,transaction:{...f.transaction,message:ms(f.version,f.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:i}=ft(e),s=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),l=P(a,ur);if("error"in l)throw new j(l.error,"failed to get transaction");return l.result}async getParsedTransactions(t,e){const{commitment:n,config:i}=ft(e),s=t.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(f=>{const y=P(f,ur);if("error"in y)throw new j(y.error,"failed to get transactions");return y.result})}async getTransactions(t,e){const{commitment:n,config:i}=ft(e),s=t.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(f=>{const y=P(f,ys);if("error"in y)throw new j(y.error,"failed to get transactions");const x=y.result;return x&&{...x,transaction:{...x.transaction,message:ms(x.version,x.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getBlock",n),s=P(i,eh);if("error"in s)throw new j(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+t+" not found");const l={...a,transactions:a.transactions.map(({transaction:f,meta:y})=>{const x=new Ue(f.message);return{meta:y,transaction:{...f,message:x}}})};return{...l,transactions:l.transactions.map(({transaction:f,meta:y})=>({meta:y,transaction:Pe.populate(f.message,f.signatures)}))}}async getBlocks(t,e,n){const i=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),s=await this._rpcRequest("getBlocks",i),a=P(s,st(F(I())));if("error"in a)throw new j(a.error,"failed to get blocks");return a.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=P(i,Yi);if("error"in s)throw new j(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+t+" not found");return a}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=P(i,Yi);if("error"in s)throw new j(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+t+" not found");return a}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getTransaction",n),s=P(i,ys);if("error"in s)throw new j(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const l=new Ue(a.transaction.message),f=a.transaction.signatures;return{...a,transaction:Pe.populate(l,f)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=P(i,ur);if("error"in s)throw new j(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(t,e){const n=t.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(a=>{const l=P(a,ur);if("error"in l)throw new j(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(t,e,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(e--,!(e<=0||e<s));)try{const f=await this.getConfirmedBlockSignatures(e,"finalized");f.signatures.length>0&&(i.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(i.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=P(s,Rl);if("error"in a)throw new j(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(t,e,n){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),s=await this._rpcRequest("getSignaturesForAddress",i),a=P(s,Ll);if("error"in a)throw new j(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(t,e){const{context:n,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=new Is({key:t,state:Is.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(t,e){const{context:n,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=Tr.fromAccountData(i.data)),{context:n,value:s}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),i=P(n,ah);if("error"in i)throw new j(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await kn(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Ea;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await kn(Ff/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=ft(t),i=this._buildArgs([],e,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=P(s,bt(I()));if("error"in a)throw new j(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(t,e,n){if("message"in t){const B=t.serialize(),A=nt.Buffer.from(B).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const M=e||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(M.innerInstructions=e.innerInstructions);const U=[A,M],L=await this._rpcRequest("simulateTransaction",U),q=P(L,Gi);if("error"in q)throw new Error("failed to simulate transaction: "+q.error.message);return q.result}let i;if(t instanceof Pe){let _=t;i=new Pe,i.feePayer=_.feePayer,i.instructions=t.instructions,i.nonceInfo=_.nonceInfo,i.signatures=_.signatures}else i=Pe.populate(t),i._message=i._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let _=this._disableBlockhashCaching;for(;;){const B=await this._blockhashWithExpiryBlockHeight(_);if(i.lastValidBlockHeight=B.lastValidBlockHeight,i.recentBlockhash=B.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const A=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(A)&&!this._blockhashInfo.transactionSignatures.includes(A)){this._blockhashInfo.simulatedSignatures.push(A);break}else _=!0}}const a=i._compile(),l=a.serialize(),y=i._serialize(l).toString("base64"),x={encoding:"base64",commitment:this.commitment};if(n){const _=(Array.isArray(n)?n:a.nonProgramIds()).map(B=>B.toBase58());x.accounts={encoding:"base64",addresses:_}}s&&(x.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(x.innerInstructions=e.innerInstructions);const k=[y,x],S=await this._rpcRequest("simulateTransaction",k),v=P(S,Gi);if("error"in v){let _;if("data"in v.error&&(_=v.error.data.logs,_&&Array.isArray(_))){const B=`
    `,A=B+_.join(B);console.error(v.error.message,A)}throw new Bs({action:"simulate",signature:"",transactionMessage:v.error.message,logs:_})}return v.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const a=t.serialize();return await this.sendRawTransaction(a,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(t.nonceInfo)t.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const l=await this._blockhashWithExpiryBlockHeight(a);if(t.lastValidBlockHeight=l.lastValidBlockHeight,t.recentBlockhash=l.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");const f=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))a=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const s=t.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(t,e){const n=se(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},i=e&&e.skipPreflight,s=i===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[t,n],l=await this._rpcRequest("sendTransaction",a),f=P(l,ch);if("error"in f){let y;throw"data"in f.error&&(y=f.error.data.logs),new Bs({action:i?"send":"simulate",signature:"",transactionMessage:f.error.message,logs:y})}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var i;const n=(i=this._subscriptionsByHash[t])==null?void 0:i.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(a=>{try{a(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var s;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return i.add(e),()=>{i.delete(e),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const l=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=i.callbacks,await this._updateSubscriptions()}catch(l){if(console.error(`Received ${l instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:s,error:l}),!e())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(l){if(l instanceof Error&&console.error(`${a} error:`,l.message),!e())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(i=>{try{i(...e)}catch(s){console.error(s)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=P(t,Tl);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,i=Wi([t.method,e]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:s.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];lt(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:i,config:s}=ft(n),a=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=P(t,Ul);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,i){const{commitment:s,config:a}=ft(n),l=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",a||(i?{filters:ji(i)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},l)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=P(t,fh);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=P(t,Nl);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=P(t,ql);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,i){const s=e||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),t.push(a)}return t}_buildArgsAtLeastConfirmed(t,e,n,i){const s=e||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,i)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=P(t,Fl);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const i=this._buildArgs([t],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,l)=>{if(a.type==="status"){e(a.result,l);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(t,e,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([t],i,void 0,s),l=this._makeSubscription({callback:(f,y)=>{e(f,y);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return l}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=P(t,zl);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:V([Y("instruction"),Un("recentSlot"),ct("bumpSeed")])},FreezeLookupTable:{index:1,layout:V([Y("instruction")])},ExtendLookupTable:{index:2,layout:V([Y("instruction"),Un(),ye(it(),fn(Y(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:V([Y("instruction")])},CloseLookupTable:{index:4,layout:V([Y("instruction")])}});new J("AddressLookupTab1e1111111111111111111111111");const Dn=Object.freeze({RequestUnits:{index:0,layout:V([ct("instruction"),Y("units"),Y("additionalFee")])},RequestHeapFrame:{index:1,layout:V([ct("instruction"),Y("bytes")])},SetComputeUnitLimit:{index:2,layout:V([ct("instruction"),Y("units")])},SetComputeUnitPrice:{index:3,layout:V([ct("instruction"),Un("microLamports")])}});class Ua{constructor(){}static requestUnits(t){const e=Dn.RequestUnits,n=me(e,t);return new ae({keys:[],programId:this.programId,data:n})}static requestHeapFrame(t){const e=Dn.RequestHeapFrame,n=me(e,t);return new ae({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(t){const e=Dn.SetComputeUnitLimit,n=me(e,t);return new ae({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(t){const e=Dn.SetComputeUnitPrice,n=me(e,{microLamports:BigInt(t.microLamports)});return new ae({keys:[],programId:this.programId,data:n})}}Ua.programId=new J("ComputeBudget111111111111111111111111111111");V([ct("numSignatures"),ct("padding"),Ie("signatureOffset"),Ie("signatureInstructionIndex"),Ie("publicKeyOffset"),Ie("publicKeyInstructionIndex"),Ie("messageDataOffset"),Ie("messageDataSize"),Ie("messageInstructionIndex")]);new J("Ed25519SigVerify111111111111111111111111111");Af.utils.isValidPrivateKey;V([ct("numSignatures"),Ie("signatureOffset"),ct("signatureInstructionIndex"),Ie("ethAddressOffset"),ct("ethAddressInstructionIndex"),Ie("messageDataOffset"),Ie("messageDataSize"),ct("messageInstructionIndex"),dt(20,"ethAddress"),dt(64,"signature"),ct("recoveryId")]);new J("KeccakSecp256k11111111111111111111111111111");var Oa;new J("StakeConfig11111111111111111111111111111111");class ai{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}Oa=ai;ai.default=new Oa(0,0,J.default);Object.freeze({Initialize:{index:0,layout:V([Y("instruction"),Lf(),Tf()])},Authorize:{index:1,layout:V([Y("instruction"),it("newAuthorized"),Y("stakeAuthorizationType")])},Delegate:{index:2,layout:V([Y("instruction")])},Split:{index:3,layout:V([Y("instruction"),_e("lamports")])},Withdraw:{index:4,layout:V([Y("instruction"),_e("lamports")])},Deactivate:{index:5,layout:V([Y("instruction")])},Merge:{index:7,layout:V([Y("instruction")])},AuthorizeWithSeed:{index:8,layout:V([Y("instruction"),it("newAuthorized"),Y("stakeAuthorizationType"),In("authoritySeed"),it("authorityOwner")])}});new J("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:V([Y("instruction"),Cf()])},Authorize:{index:1,layout:V([Y("instruction"),it("newAuthorized"),Y("voteAuthorizationType")])},Withdraw:{index:3,layout:V([Y("instruction"),_e("lamports")])},UpdateValidatorIdentity:{index:4,layout:V([Y("instruction")])},AuthorizeWithSeed:{index:10,layout:V([Y("instruction"),Uf()])}});new J("Vote111111111111111111111111111111111111111");new J("Va1idator1nfo111111111111111111111111111111");C({name:O(),website:Z(O()),details:Z(O()),iconUrl:Z(O()),keybaseUsername:Z(O())});new J("Vote111111111111111111111111111111111111111");V([it("nodePubkey"),it("authorizedWithdrawer"),ct("commission"),oe(),ye(V([oe("slot"),Y("confirmationCount")]),fn(Y(),-8),"votes"),ct("rootSlotValid"),oe("rootSlot"),oe(),ye(V([oe("epoch"),it("authorizedVoter")]),fn(Y(),-8),"authorizedVoters"),V([ye(V([it("authorizedPubkey"),oe("epochOfLastAuthorizedSwitch"),oe("targetEpoch")]),32,"buf"),oe("idx"),ct("isEmpty")],"priorVoters"),oe(),ye(V([oe("epoch"),oe("credits"),oe("prevCredits")]),fn(Y(),-8),"epochCredits"),V([oe("slot"),oe("timestamp")],"lastTimestamp")]);const yh=Object.freeze(Object.defineProperty({__proto__:null,AddressLookupTableAccount:Is,BLOCKHASH_CACHE_TIMEOUT_MS:Ea,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Dn,ComputeBudgetProgram:Ua,Connection:hh,EpochSchedule:Sa,FeeCalculatorLayout:va,Lockup:ai,MAX_SEED_LENGTH:ya,Message:Ue,MessageAccountKeys:Vn,MessageV0:dn,NONCE_ACCOUNT_LENGTH:As,NonceAccount:Tr,PACKET_DATA_SIZE:ln,PUBLIC_KEY_LENGTH:Ze,PublicKey:J,SIGNATURE_LENGTH_IN_BYTES:Wn,SOLANA_SCHEMA:Kn,SYSTEM_INSTRUCTION_LAYOUTS:Se,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:fr,SYSVAR_RENT_PUBKEY:ks,SendTransactionError:Bs,SolanaJSONRPCError:j,Struct:pa,SystemProgram:jn,Transaction:Pe,TransactionExpiredBlockheightExceededError:Qs,TransactionExpiredNonceInvalidError:An,TransactionExpiredTimeoutError:ti,TransactionInstruction:ae,TransactionMessage:ni,TransactionStatus:$e,VERSION_PREFIX_MASK:Rr,VersionedMessage:ei,VersionedTransaction:ri},Symbol.toStringTag,{value:"Module"}));export{J as P,ae as T,yh as i,V as s,ct as u};
