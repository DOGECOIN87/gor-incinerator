var aa=Object.defineProperty;var ua=(r,t,e)=>t in r?aa(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var Vr=(r,t,e)=>ua(r,typeof t!="symbol"?t+"":t,e);import{g as pi,a as As,c as Ie,b as et}from"./index-Cr1ob37M.js";const dn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Dn(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ii(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function an(r,...t){if(!Dn(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function Is(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ii(r.outputLen),ii(r.blockLen)}function er(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function ca(r,t){an(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function En(...r){for(let t=0;t<r.length;t++)r[t].fill(0)}function Hr(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Re(r,t){return r<<32-t|r>>>t}const ks=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",fa=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function nn(r){if(an(r),ks)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=fa[r[e]];return t}const Ne={_0:48,_9:57,A:65,F:70,a:97,f:102};function ss(r){if(r>=Ne._0&&r<=Ne._9)return r-Ne._0;if(r>=Ne.A&&r<=Ne.F)return r-(Ne.A-10);if(r>=Ne.a&&r<=Ne.f)return r-(Ne.a-10)}function nr(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(ks)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const c=ss(r.charCodeAt(i)),d=ss(r.charCodeAt(i+1));if(c===void 0||d===void 0){const l=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}n[s]=c*16+d}return n}function la(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function gi(r){return typeof r=="string"&&(r=la(r)),an(r),r}function Le(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];an(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class _s{}function Rs(r){const t=n=>r().update(gi(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function yi(r=32){if(dn&&typeof dn.getRandomValues=="function")return dn.getRandomValues(new Uint8Array(r));if(dn&&typeof dn.randomBytes=="function")return Uint8Array.from(dn.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function ha(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),c=Number(e>>s&i),d=Number(e&i),l=n?4:0,b=n?0:4;r.setUint32(t+l,c,n),r.setUint32(t+b,d,n)}function da(r,t,e){return r&t^~r&e}function pa(r,t,e){return r&t^r&e^t&e}class Ls extends _s{constructor(t,e,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Hr(this.buffer)}update(t){er(this),t=gi(t),an(t);const{view:e,buffer:n,blockLen:s}=this,i=t.length;for(let c=0;c<i;){const d=Math.min(s-this.pos,i-c);if(d===s){const l=Hr(t);for(;s<=i-c;c+=s)this.process(l,c);continue}n.set(t.subarray(c,c+d),this.pos),this.pos+=d,c+=d,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){er(this),ca(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:c}=this;e[c++]=128,En(this.buffer.subarray(c)),this.padOffset>s-c&&(this.process(n,0),c=0);for(let B=c;B<s;B++)e[B]=0;ha(n,s-8,BigInt(this.length*8),i),this.process(n,0);const d=Hr(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=l/4,S=this.get();if(b>S.length)throw new Error("_sha2: outputLen bigger than state");for(let B=0;B<b;B++)d.setUint32(4*B,S[B],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:c,pos:d}=this;return t.destroyed=c,t.finished=i,t.length=s,t.pos=d,s%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Ve=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ie=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Wn=BigInt(2**32-1),os=BigInt(32);function ga(r,t=!1){return t?{h:Number(r&Wn),l:Number(r>>os&Wn)}:{h:Number(r>>os&Wn)|0,l:Number(r&Wn)|0}}function ya(r,t=!1){const e=r.length;let n=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:c,l:d}=ga(r[i],t);[n[i],s[i]]=[c,d]}return[n,s]}const as=(r,t,e)=>r>>>e,us=(r,t,e)=>r<<32-e|t>>>e,pn=(r,t,e)=>r>>>e|t<<32-e,gn=(r,t,e)=>r<<32-e|t>>>e,jn=(r,t,e)=>r<<64-e|t>>>e-32,Gn=(r,t,e)=>r>>>e-32|t<<64-e;function Ke(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const ma=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),wa=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,ba=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),va=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,xa=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Ea=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,Sa=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),He=new Uint32Array(64);class Ba extends Ls{constructor(t=32){super(64,t,8,!1),this.A=Ve[0]|0,this.B=Ve[1]|0,this.C=Ve[2]|0,this.D=Ve[3]|0,this.E=Ve[4]|0,this.F=Ve[5]|0,this.G=Ve[6]|0,this.H=Ve[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:c,G:d,H:l}=this;return[t,e,n,s,i,c,d,l]}set(t,e,n,s,i,c,d,l){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=c|0,this.G=d|0,this.H=l|0}process(t,e){for(let B=0;B<16;B++,e+=4)He[B]=t.getUint32(e,!1);for(let B=16;B<64;B++){const x=He[B-15],E=He[B-2],M=Re(x,7)^Re(x,18)^x>>>3,k=Re(E,17)^Re(E,19)^E>>>10;He[B]=k+He[B-7]+M+He[B-16]|0}let{A:n,B:s,C:i,D:c,E:d,F:l,G:b,H:S}=this;for(let B=0;B<64;B++){const x=Re(d,6)^Re(d,11)^Re(d,25),E=S+x+da(d,l,b)+Sa[B]+He[B]|0,k=(Re(n,2)^Re(n,13)^Re(n,22))+pa(n,s,i)|0;S=b,b=l,l=d,d=c+E|0,c=i,i=s,s=n,n=E+k|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,c=c+this.D|0,d=d+this.E|0,l=l+this.F|0,b=b+this.G|0,S=S+this.H|0,this.set(n,s,i,c,d,l,b,S)}roundClean(){En(He)}destroy(){this.set(0,0,0,0,0,0,0,0),En(this.buffer)}}const Us=ya(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Ma=Us[0],Aa=Us[1],$e=new Uint32Array(80),Ze=new Uint32Array(80);class Ia extends Ls{constructor(t=64){super(128,t,16,!1),this.Ah=ie[0]|0,this.Al=ie[1]|0,this.Bh=ie[2]|0,this.Bl=ie[3]|0,this.Ch=ie[4]|0,this.Cl=ie[5]|0,this.Dh=ie[6]|0,this.Dl=ie[7]|0,this.Eh=ie[8]|0,this.El=ie[9]|0,this.Fh=ie[10]|0,this.Fl=ie[11]|0,this.Gh=ie[12]|0,this.Gl=ie[13]|0,this.Hh=ie[14]|0,this.Hl=ie[15]|0}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:c,Dh:d,Dl:l,Eh:b,El:S,Fh:B,Fl:x,Gh:E,Gl:M,Hh:k,Hl:R}=this;return[t,e,n,s,i,c,d,l,b,S,B,x,E,M,k,R]}set(t,e,n,s,i,c,d,l,b,S,B,x,E,M,k,R){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=c|0,this.Dh=d|0,this.Dl=l|0,this.Eh=b|0,this.El=S|0,this.Fh=B|0,this.Fl=x|0,this.Gh=E|0,this.Gl=M|0,this.Hh=k|0,this.Hl=R|0}process(t,e){for(let L=0;L<16;L++,e+=4)$e[L]=t.getUint32(e),Ze[L]=t.getUint32(e+=4);for(let L=16;L<80;L++){const z=$e[L-15]|0,Z=Ze[L-15]|0,G=pn(z,Z,1)^pn(z,Z,8)^as(z,Z,7),J=gn(z,Z,1)^gn(z,Z,8)^us(z,Z,7),Y=$e[L-2]|0,U=Ze[L-2]|0,H=pn(Y,U,19)^jn(Y,U,61)^as(Y,U,6),F=gn(Y,U,19)^Gn(Y,U,61)^us(Y,U,6),V=ba(J,F,Ze[L-7],Ze[L-16]),h=va(V,G,H,$e[L-7],$e[L-16]);$e[L]=h|0,Ze[L]=V|0}let{Ah:n,Al:s,Bh:i,Bl:c,Ch:d,Cl:l,Dh:b,Dl:S,Eh:B,El:x,Fh:E,Fl:M,Gh:k,Gl:R,Hh:_,Hl:T}=this;for(let L=0;L<80;L++){const z=pn(B,x,14)^pn(B,x,18)^jn(B,x,41),Z=gn(B,x,14)^gn(B,x,18)^Gn(B,x,41),G=B&E^~B&k,J=x&M^~x&R,Y=xa(T,Z,J,Aa[L],Ze[L]),U=Ea(Y,_,z,G,Ma[L],$e[L]),H=Y|0,F=pn(n,s,28)^jn(n,s,34)^jn(n,s,39),V=gn(n,s,28)^Gn(n,s,34)^Gn(n,s,39),h=n&i^n&d^i&d,o=s&c^s&l^c&l;_=k|0,T=R|0,k=E|0,R=M|0,E=B|0,M=x|0,{h:B,l:x}=Ke(b|0,S|0,U|0,H|0),b=d|0,S=l|0,d=i|0,l=c|0,i=n|0,c=s|0;const a=ma(H,V,o);n=wa(a,U,F,h),s=a|0}({h:n,l:s}=Ke(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:c}=Ke(this.Bh|0,this.Bl|0,i|0,c|0),{h:d,l}=Ke(this.Ch|0,this.Cl|0,d|0,l|0),{h:b,l:S}=Ke(this.Dh|0,this.Dl|0,b|0,S|0),{h:B,l:x}=Ke(this.Eh|0,this.El|0,B|0,x|0),{h:E,l:M}=Ke(this.Fh|0,this.Fl|0,E|0,M|0),{h:k,l:R}=Ke(this.Gh|0,this.Gl|0,k|0,R|0),{h:_,l:T}=Ke(this.Hh|0,this.Hl|0,_|0,T|0),this.set(n,s,i,c,d,l,b,S,B,x,E,M,k,R,_,T)}roundClean(){En($e,Ze)}destroy(){En(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Os=Rs(()=>new Ba),ka=Rs(()=>new Ia);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mi=BigInt(0),si=BigInt(1);function on(r,t=""){if(typeof r!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof r)}return r}function Me(r,t,e=""){const n=Dn(r),s=r==null?void 0:r.length,i=t!==void 0;if(!n||i&&s!==t){const c=e&&`"${e}" `,d=i?` of length ${t}`:"",l=n?`length=${s}`:`type=${typeof r}`;throw new Error(c+"expected Uint8Array"+d+", got "+l)}return r}function Yn(r){const t=r.toString(16);return t.length&1?"0"+t:t}function Ts(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?mi:BigInt("0x"+r)}function dr(r){return Ts(nn(r))}function Tn(r){return an(r),Ts(nn(Uint8Array.from(r).reverse()))}function wi(r,t){return nr(r.toString(16).padStart(t*2,"0"))}function Cs(r,t){return wi(r,t).reverse()}function dt(r,t,e){let n;if(typeof t=="string")try{n=nr(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(Dn(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}function cs(r){return Uint8Array.from(r)}const $r=r=>typeof r=="bigint"&&mi<=r;function _a(r,t,e){return $r(r)&&$r(t)&&$r(e)&&t<=r&&r<e}function oi(r,t,e,n){if(!_a(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function Ns(r){let t;for(t=0;r>mi;r>>=si,t+=1);return t}const qn=r=>(si<<BigInt(r))-si;function Ra(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const n=E=>new Uint8Array(E),s=E=>Uint8Array.of(E);let i=n(r),c=n(r),d=0;const l=()=>{i.fill(1),c.fill(0),d=0},b=(...E)=>e(c,i,...E),S=(E=n(0))=>{c=b(s(0),E),i=b(),E.length!==0&&(c=b(s(1),E),i=b())},B=()=>{if(d++>=1e3)throw new Error("drbg: tried 1000 values");let E=0;const M=[];for(;E<t;){i=b();const k=i.slice();M.push(k),E+=i.length}return Le(...M)};return(E,M)=>{l(),S(E);let k;for(;!(k=M(B()));)S();return l(),k}}function Pn(r,t,e={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,c){const d=r[s];if(c&&d===void 0)return;const l=typeof d;if(l!==i||d===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${l}`)}Object.entries(t).forEach(([s,i])=>n(s,i,!1)),Object.entries(e).forEach(([s,i])=>n(s,i,!0))}function rr(r){const t=new WeakMap;return(e,...n)=>{const s=t.get(e);if(s!==void 0)return s;const i=r(e,...n);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ye=BigInt(0),re=BigInt(1),Qe=BigInt(2),Ks=BigInt(3),zs=BigInt(4),Fs=BigInt(5),La=BigInt(7),Ds=BigInt(8),Ua=BigInt(9),qs=BigInt(16);function Yt(r,t){const e=r%t;return e>=ye?e:t+e}function ht(r,t,e){let n=r;for(;t-- >ye;)n*=n,n%=e;return n}function fs(r,t){if(r===ye)throw new Error("invert: expected non-zero number");if(t<=ye)throw new Error("invert: expected positive modulus, got "+t);let e=Yt(r,t),n=t,s=ye,i=re;for(;e!==ye;){const d=n/e,l=n%e,b=s-i*d;n=e,e=l,s=i,i=b}if(n!==re)throw new Error("invert: does not exist");return Yt(s,t)}function bi(r,t,e){if(!r.eql(r.sqr(t),e))throw new Error("Cannot find square root")}function Ps(r,t){const e=(r.ORDER+re)/zs,n=r.pow(t,e);return bi(r,n,t),n}function Oa(r,t){const e=(r.ORDER-Fs)/Ds,n=r.mul(t,Qe),s=r.pow(n,e),i=r.mul(t,s),c=r.mul(r.mul(i,Qe),s),d=r.mul(i,r.sub(c,r.ONE));return bi(r,d,t),d}function Ta(r){const t=un(r),e=Vs(r),n=e(t,t.neg(t.ONE)),s=e(t,n),i=e(t,t.neg(n)),c=(r+La)/qs;return(d,l)=>{let b=d.pow(l,c),S=d.mul(b,n);const B=d.mul(b,s),x=d.mul(b,i),E=d.eql(d.sqr(S),l),M=d.eql(d.sqr(B),l);b=d.cmov(b,S,E),S=d.cmov(x,B,M);const k=d.eql(d.sqr(S),l),R=d.cmov(b,S,k);return bi(d,R,l),R}}function Vs(r){if(r<Ks)throw new Error("sqrt is not defined for small field");let t=r-re,e=0;for(;t%Qe===ye;)t/=Qe,e++;let n=Qe;const s=un(r);for(;ls(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Ps;let i=s.pow(n,t);const c=(t+re)/Qe;return function(l,b){if(l.is0(b))return b;if(ls(l,b)!==1)throw new Error("Cannot find square root");let S=e,B=l.mul(l.ONE,i),x=l.pow(b,t),E=l.pow(b,c);for(;!l.eql(x,l.ONE);){if(l.is0(x))return l.ZERO;let M=1,k=l.sqr(x);for(;!l.eql(k,l.ONE);)if(M++,k=l.sqr(k),M===S)throw new Error("Cannot find square root");const R=re<<BigInt(S-M-1),_=l.pow(B,R);S=M,B=l.sqr(_),x=l.mul(x,B),E=l.mul(E,_)}return E}}function Ca(r){return r%zs===Ks?Ps:r%Ds===Fs?Oa:r%qs===Ua?Ta(r):Vs(r)}const Na=(r,t)=>(Yt(r,t)&re)===re,Ka=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function za(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=Ka.reduce((n,s)=>(n[s]="function",n),t);return Pn(r,e),r}function Fa(r,t,e){if(e<ye)throw new Error("invalid exponent, negatives unsupported");if(e===ye)return r.ONE;if(e===re)return t;let n=r.ONE,s=t;for(;e>ye;)e&re&&(n=r.mul(n,s)),s=r.sqr(s),e>>=re;return n}function Hs(r,t,e=!1){const n=new Array(t.length).fill(e?r.ZERO:void 0),s=t.reduce((c,d,l)=>r.is0(d)?c:(n[l]=c,r.mul(c,d)),r.ONE),i=r.inv(s);return t.reduceRight((c,d,l)=>r.is0(d)?c:(n[l]=r.mul(c,n[l]),r.mul(c,d)),i),n}function ls(r,t){const e=(r.ORDER-re)/Qe,n=r.pow(t,e),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),c=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!c)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function $s(r,t){t!==void 0&&ii(t);const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function un(r,t,e=!1,n={}){if(r<=ye)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i,c=!1,d;if(typeof t=="object"&&t!=null){if(n.sqrt||e)throw new Error("cannot specify opts in two arguments");const x=t;x.BITS&&(s=x.BITS),x.sqrt&&(i=x.sqrt),typeof x.isLE=="boolean"&&(e=x.isLE),typeof x.modFromBytes=="boolean"&&(c=x.modFromBytes),d=x.allowedLengths}else typeof t=="number"&&(s=t),n.sqrt&&(i=n.sqrt);const{nBitLength:l,nByteLength:b}=$s(r,s);if(b>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let S;const B=Object.freeze({ORDER:r,isLE:e,BITS:l,BYTES:b,MASK:qn(l),ZERO:ye,ONE:re,allowedLengths:d,create:x=>Yt(x,r),isValid:x=>{if(typeof x!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof x);return ye<=x&&x<r},is0:x=>x===ye,isValidNot0:x=>!B.is0(x)&&B.isValid(x),isOdd:x=>(x&re)===re,neg:x=>Yt(-x,r),eql:(x,E)=>x===E,sqr:x=>Yt(x*x,r),add:(x,E)=>Yt(x+E,r),sub:(x,E)=>Yt(x-E,r),mul:(x,E)=>Yt(x*E,r),pow:(x,E)=>Fa(B,x,E),div:(x,E)=>Yt(x*fs(E,r),r),sqrN:x=>x*x,addN:(x,E)=>x+E,subN:(x,E)=>x-E,mulN:(x,E)=>x*E,inv:x=>fs(x,r),sqrt:i||(x=>(S||(S=Ca(r)),S(B,x))),toBytes:x=>e?Cs(x,b):wi(x,b),fromBytes:(x,E=!0)=>{if(d){if(!d.includes(x.length)||x.length>b)throw new Error("Field.fromBytes: expected "+d+" bytes, got "+x.length);const k=new Uint8Array(b);k.set(x,e?0:k.length-x.length),x=k}if(x.length!==b)throw new Error("Field.fromBytes: expected "+b+" bytes, got "+x.length);let M=e?Tn(x):dr(x);if(c&&(M=Yt(M,r)),!E&&!B.isValid(M))throw new Error("invalid field element: outside of range 0..ORDER");return M},invertBatch:x=>Hs(B,x),cmov:(x,E,M)=>M?E:x});return Object.freeze(B)}function Zs(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Ws(r){const t=Zs(r);return t+Math.ceil(t/2)}function Da(r,t,e=!1){const n=r.length,s=Zs(t),i=Ws(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const c=e?Tn(r):dr(r),d=Yt(c,t-re)+re;return e?Cs(d,s):wi(d,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sn=BigInt(0),tn=BigInt(1);function ir(r,t){const e=t.negate();return r?e:t}function en(r,t){const e=Hs(r.Fp,t.map(n=>n.Z));return t.map((n,s)=>r.fromAffine(n.toAffine(e[s])))}function js(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function Zr(r,t){js(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),s=2**r,i=qn(r),c=BigInt(r);return{windows:e,windowSize:n,mask:i,maxNumber:s,shiftBy:c}}function hs(r,t,e){const{windowSize:n,mask:s,maxNumber:i,shiftBy:c}=e;let d=Number(r&s),l=r>>c;d>n&&(d-=i,l+=tn);const b=t*n,S=b+Math.abs(d)-1,B=d===0,x=d<0,E=t%2!==0;return{nextN:l,offset:S,isZero:B,isNeg:x,isNegF:E,offsetF:b}}function qa(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function Pa(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const Wr=new WeakMap,Gs=new WeakMap;function jr(r){return Gs.get(r)||1}function ds(r){if(r!==Sn)throw new Error("invalid wNAF")}class Ys{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,n=this.ZERO){let s=t;for(;e>Sn;)e&tn&&(n=n.add(s)),s=s.double(),e>>=tn;return n}precomputeWindow(t,e){const{windows:n,windowSize:s}=Zr(e,this.bits),i=[];let c=t,d=c;for(let l=0;l<n;l++){d=c,i.push(d);for(let b=1;b<s;b++)d=d.add(c),i.push(d);c=d.double()}return i}wNAF(t,e,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const c=Zr(t,this.bits);for(let d=0;d<c.windows;d++){const{nextN:l,offset:b,isZero:S,isNeg:B,isNegF:x,offsetF:E}=hs(n,d,c);n=l,S?i=i.add(ir(x,e[E])):s=s.add(ir(B,e[b]))}return ds(n),{p:s,f:i}}wNAFUnsafe(t,e,n,s=this.ZERO){const i=Zr(t,this.bits);for(let c=0;c<i.windows&&n!==Sn;c++){const{nextN:d,offset:l,isZero:b,isNeg:S}=hs(n,c,i);if(n=d,!b){const B=e[l];s=s.add(S?B.negate():B)}}return ds(n),s}getPrecomputes(t,e,n){let s=Wr.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof n=="function"&&(s=n(s)),Wr.set(e,s))),s}cached(t,e,n){const s=jr(t);return this.wNAF(s,this.getPrecomputes(s,t,n),e)}unsafe(t,e,n,s){const i=jr(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,s)}createCache(t,e){js(e,this.bits),Gs.set(t,e),Wr.delete(t)}hasCache(t){return jr(t)!==1}}function Va(r,t,e,n){let s=t,i=r.ZERO,c=r.ZERO;for(;e>Sn||n>Sn;)e&tn&&(i=i.add(s)),n&tn&&(c=c.add(s)),s=s.double(),e>>=tn,n>>=tn;return{p1:i,p2:c}}function Xs(r,t,e,n){qa(e,r),Pa(n,t);const s=e.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const c=r.ZERO,d=Ns(BigInt(s));let l=1;d>12?l=d-3:d>4?l=d-2:d>0&&(l=2);const b=qn(l),S=new Array(Number(b)+1).fill(c),B=Math.floor((t.BITS-1)/l)*l;let x=c;for(let E=B;E>=0;E-=l){S.fill(c);for(let k=0;k<i;k++){const R=n[k],_=Number(R>>BigInt(E)&b);S[_]=S[_].add(e[k])}let M=c;for(let k=S.length-1,R=c;k>0;k--)R=R.add(S[k]),M=M.add(R);if(x=x.add(M),E!==0)for(let k=0;k<l;k++)x=x.double()}return x}function ps(r,t,e){if(t){if(t.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return za(t),t}else return un(r,{isLE:e})}function Js(r,t,e={},n){if(n===void 0&&(n=r==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${r} CURVE object`);for(const l of["p","n","h"]){const b=t[l];if(!(typeof b=="bigint"&&b>Sn))throw new Error(`CURVE.${l} must be positive bigint`)}const s=ps(t.p,e.Fp,n),i=ps(t.n,e.Fn,n),d=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const l of d)if(!s.isValid(t[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const We=BigInt(0),Jt=BigInt(1),Gr=BigInt(2),Ha=BigInt(8);function $a(r,t,e,n){const s=r.sqr(e),i=r.sqr(n),c=r.add(r.mul(t.a,s),i),d=r.add(r.ONE,r.mul(t.d,r.mul(s,i)));return r.eql(c,d)}function Za(r,t={}){const e=Js("edwards",r,t,t.FpFnLE),{Fp:n,Fn:s}=e;let i=e.CURVE;const{h:c}=i;Pn(t,{},{uvRatio:"function"});const d=Gr<<BigInt(s.BYTES*8)-Jt,l=R=>n.create(R),b=t.uvRatio||((R,_)=>{try{return{isValid:!0,value:n.sqrt(n.div(R,_))}}catch{return{isValid:!1,value:We}}});if(!$a(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function S(R,_,T=!1){const L=T?Jt:We;return oi("coordinate "+R,_,L,d),_}function B(R){if(!(R instanceof M))throw new Error("ExtendedPoint expected")}const x=rr((R,_)=>{const{X:T,Y:L,Z:z}=R,Z=R.is0();_==null&&(_=Z?Ha:n.inv(z));const G=l(T*_),J=l(L*_),Y=n.mul(z,_);if(Z)return{x:We,y:Jt};if(Y!==Jt)throw new Error("invZ was invalid");return{x:G,y:J}}),E=rr(R=>{const{a:_,d:T}=i;if(R.is0())throw new Error("bad point: ZERO");const{X:L,Y:z,Z,T:G}=R,J=l(L*L),Y=l(z*z),U=l(Z*Z),H=l(U*U),F=l(J*_),V=l(U*l(F+Y)),h=l(H+l(T*l(J*Y)));if(V!==h)throw new Error("bad point: equation left != right (1)");const o=l(L*z),a=l(Z*G);if(o!==a)throw new Error("bad point: equation left != right (2)");return!0});class M{constructor(_,T,L,z){this.X=S("x",_),this.Y=S("y",T),this.Z=S("z",L,!0),this.T=S("t",z),Object.freeze(this)}static CURVE(){return i}static fromAffine(_){if(_ instanceof M)throw new Error("extended point not allowed");const{x:T,y:L}=_||{};return S("x",T),S("y",L),new M(T,L,Jt,l(T*L))}static fromBytes(_,T=!1){const L=n.BYTES,{a:z,d:Z}=i;_=cs(Me(_,L,"point")),on(T,"zip215");const G=cs(_),J=_[L-1];G[L-1]=J&-129;const Y=Tn(G),U=T?d:n.ORDER;oi("point.y",Y,We,U);const H=l(Y*Y),F=l(H-Jt),V=l(Z*H-z);let{isValid:h,value:o}=b(F,V);if(!h)throw new Error("bad point: invalid y coordinate");const a=(o&Jt)===Jt,f=(J&128)!==0;if(!T&&o===We&&f)throw new Error("bad point: x=0 and x_0=1");return f!==a&&(o=l(-o)),M.fromAffine({x:o,y:Y})}static fromHex(_,T=!1){return M.fromBytes(dt("point",_),T)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(_=8,T=!0){return k.createCache(this,_),T||this.multiply(Gr),this}assertValidity(){E(this)}equals(_){B(_);const{X:T,Y:L,Z:z}=this,{X:Z,Y:G,Z:J}=_,Y=l(T*J),U=l(Z*z),H=l(L*J),F=l(G*z);return Y===U&&H===F}is0(){return this.equals(M.ZERO)}negate(){return new M(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:_}=i,{X:T,Y:L,Z:z}=this,Z=l(T*T),G=l(L*L),J=l(Gr*l(z*z)),Y=l(_*Z),U=T+L,H=l(l(U*U)-Z-G),F=Y+G,V=F-J,h=Y-G,o=l(H*V),a=l(F*h),f=l(H*h),p=l(V*F);return new M(o,a,p,f)}add(_){B(_);const{a:T,d:L}=i,{X:z,Y:Z,Z:G,T:J}=this,{X:Y,Y:U,Z:H,T:F}=_,V=l(z*Y),h=l(Z*U),o=l(J*L*F),a=l(G*H),f=l((z+Z)*(Y+U)-V-h),p=a-o,y=a+o,w=l(h-T*V),v=l(f*p),g=l(y*w),u=l(f*w),m=l(p*y);return new M(v,g,m,u)}subtract(_){return this.add(_.negate())}multiply(_){if(!s.isValidNot0(_))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:T,f:L}=k.cached(this,_,z=>en(M,z));return en(M,[T,L])[0]}multiplyUnsafe(_,T=M.ZERO){if(!s.isValid(_))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return _===We?M.ZERO:this.is0()||_===Jt?this:k.unsafe(this,_,L=>en(M,L),T)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return k.unsafe(this,i.n).is0()}toAffine(_){return x(this,_)}clearCofactor(){return c===Jt?this:this.multiplyUnsafe(c)}toBytes(){const{x:_,y:T}=this.toAffine(),L=n.toBytes(T);return L[L.length-1]|=_&Jt?128:0,L}toHex(){return nn(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(_){return en(M,_)}static msm(_,T){return Xs(M,s,_,T)}_setWindowSize(_){this.precompute(_)}toRawBytes(){return this.toBytes()}}M.BASE=new M(i.Gx,i.Gy,Jt,l(i.Gx*i.Gy)),M.ZERO=new M(We,Jt,Jt,We),M.Fp=n,M.Fn=s;const k=new Ys(M,s.BITS);return M.BASE.precompute(8),M}function Wa(r,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');Pn(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=e,{BASE:s,Fp:i,Fn:c}=r,d=e.randomBytes||yi,l=e.adjustScalarBytes||(U=>U),b=e.domain||((U,H,F)=>{if(on(F,"phflag"),H.length||F)throw new Error("Contexts/pre-hash are not supported");return U});function S(U){return c.create(Tn(U))}function B(U){const H=L.secretKey;U=dt("private key",U,H);const F=dt("hashed private key",t(U),2*H),V=l(F.slice(0,H)),h=F.slice(H,2*H),o=S(V);return{head:V,prefix:h,scalar:o}}function x(U){const{head:H,prefix:F,scalar:V}=B(U),h=s.multiply(V),o=h.toBytes();return{head:H,prefix:F,scalar:V,point:h,pointBytes:o}}function E(U){return x(U).pointBytes}function M(U=Uint8Array.of(),...H){const F=Le(...H);return S(t(b(F,dt("context",U),!!n)))}function k(U,H,F={}){U=dt("message",U),n&&(U=n(U));const{prefix:V,scalar:h,pointBytes:o}=x(H),a=M(F.context,V,U),f=s.multiply(a).toBytes(),p=M(F.context,f,o,U),y=c.create(a+p*h);if(!c.isValid(y))throw new Error("sign failed: invalid s");const w=Le(f,c.toBytes(y));return Me(w,L.signature,"result")}const R={zip215:!0};function _(U,H,F,V=R){const{context:h,zip215:o}=V,a=L.signature;U=dt("signature",U,a),H=dt("message",H),F=dt("publicKey",F,L.publicKey),o!==void 0&&on(o,"zip215"),n&&(H=n(H));const f=a/2,p=U.subarray(0,f),y=Tn(U.subarray(f,a));let w,v,g;try{w=r.fromBytes(F,o),v=r.fromBytes(p,o),g=s.multiplyUnsafe(y)}catch{return!1}if(!o&&w.isSmallOrder())return!1;const u=M(h,v.toBytes(),w.toBytes(),H);return v.add(w.multiplyUnsafe(u)).subtract(g).clearCofactor().is0()}const T=i.BYTES,L={secretKey:T,publicKey:T,signature:2*T,seed:T};function z(U=d(L.seed)){return Me(U,L.seed,"seed")}function Z(U){const H=Y.randomSecretKey(U);return{secretKey:H,publicKey:E(H)}}function G(U){return Dn(U)&&U.length===c.BYTES}function J(U,H){try{return!!r.fromBytes(U,H)}catch{return!1}}const Y={getExtendedPublicKey:x,randomSecretKey:z,isValidSecretKey:G,isValidPublicKey:J,toMontgomery(U){const{y:H}=r.fromBytes(U),F=L.publicKey,V=F===32;if(!V&&F!==57)throw new Error("only defined for 25519 and 448");const h=V?i.div(Jt+H,Jt-H):i.div(H-Jt,H+Jt);return i.toBytes(h)},toMontgomerySecret(U){const H=L.secretKey;Me(U,H);const F=t(U.subarray(0,H));return l(F).subarray(0,H)},randomPrivateKey:z,precompute(U=8,H=r.BASE){return H.precompute(U,!1)}};return Object.freeze({keygen:Z,getPublicKey:E,sign:k,verify:_,utils:Y,Point:r,lengths:L})}function ja(r){const t={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=un(t.n,r.nBitLength,!0),s={Fp:e,Fn:n,uvRatio:r.uvRatio},i={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:t,curveOpts:s,hash:r.hash,eddsaOpts:i}}function Ga(r,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:r,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function Ya(r){const{CURVE:t,curveOpts:e,hash:n,eddsaOpts:s}=ja(r),i=Za(t,e),c=Wa(i,n,s);return Ga(r,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xa=BigInt(1),gs=BigInt(2);BigInt(3);const Ja=BigInt(5),Qa=BigInt(8),vi=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Qs={p:vi,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Qa,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function tu(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=vi,d=r*r%i*r%i,l=ht(d,gs,i)*d%i,b=ht(l,Xa,i)*r%i,S=ht(b,Ja,i)*b%i,B=ht(S,t,i)*S%i,x=ht(B,e,i)*B%i,E=ht(x,n,i)*x%i,M=ht(E,s,i)*E%i,k=ht(M,s,i)*E%i,R=ht(k,t,i)*S%i;return{pow_p_5_8:ht(R,gs,i)*r%i,b2:d}}function eu(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const ys=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function nu(r,t){const e=vi,n=Yt(t*t*t,e),s=Yt(n*n*t,e),i=tu(r*s).pow_p_5_8;let c=Yt(r*n*i,e);const d=Yt(t*c*c,e),l=c,b=Yt(c*ys,e),S=d===r,B=d===Yt(-r,e),x=d===Yt(-r*ys,e);return S&&(c=l),(B||x)&&(c=b),Na(c,e)&&(c=Yt(-c,e)),{isValid:S||B,value:c}}const ru=un(Qs.p,{isLE:!0}),iu={...Qs,Fp:ru,hash:ka,adjustScalarBytes:eu,uvRatio:nu},Vn=Ya(iu);var xi={exports:{}};const su={},ou=Object.freeze(Object.defineProperty({__proto__:null,default:su},Symbol.toStringTag,{value:"Module"})),au=pi(ou);xi.exports;(function(r){(function(t,e){function n(h,o){if(!h)throw new Error(o||"Assertion failed")}function s(h,o){h.super_=o;var a=function(){};a.prototype=o.prototype,h.prototype=new a,h.prototype.constructor=h}function i(h,o,a){if(i.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((o==="le"||o==="be")&&(a=o,o=10),this._init(h||0,o||10,a||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=au.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,a){return o.cmp(a)>0?o:a},i.min=function(o,a){return o.cmp(a)<0?o:a},i.prototype._init=function(o,a,f){if(typeof o=="number")return this._initNumber(o,a,f);if(typeof o=="object")return this._initArray(o,a,f);a==="hex"&&(a=16),n(a===(a|0)&&a>=2&&a<=36),o=o.toString().replace(/\s+/g,"");var p=0;o[0]==="-"&&(p++,this.negative=1),p<o.length&&(a===16?this._parseHex(o,p,f):(this._parseBase(o,a,p),f==="le"&&this._initArray(this.toArray(),a,f)))},i.prototype._initNumber=function(o,a,f){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),a,f)},i.prototype._initArray=function(o,a,f){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var y,w,v=0;if(f==="be")for(p=o.length-1,y=0;p>=0;p-=3)w=o[p]|o[p-1]<<8|o[p-2]<<16,this.words[y]|=w<<v&67108863,this.words[y+1]=w>>>26-v&67108863,v+=24,v>=26&&(v-=26,y++);else if(f==="le")for(p=0,y=0;p<o.length;p+=3)w=o[p]|o[p+1]<<8|o[p+2]<<16,this.words[y]|=w<<v&67108863,this.words[y+1]=w>>>26-v&67108863,v+=24,v>=26&&(v-=26,y++);return this._strip()};function d(h,o){var a=h.charCodeAt(o);if(a>=48&&a<=57)return a-48;if(a>=65&&a<=70)return a-55;if(a>=97&&a<=102)return a-87;n(!1,"Invalid character in "+h)}function l(h,o,a){var f=d(h,a);return a-1>=o&&(f|=d(h,a-1)<<4),f}i.prototype._parseHex=function(o,a,f){this.length=Math.ceil((o.length-a)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var y=0,w=0,v;if(f==="be")for(p=o.length-1;p>=a;p-=2)v=l(o,a,p)<<y,this.words[w]|=v&67108863,y>=18?(y-=18,w+=1,this.words[w]|=v>>>26):y+=8;else{var g=o.length-a;for(p=g%2===0?a+1:a;p<o.length;p+=2)v=l(o,a,p)<<y,this.words[w]|=v&67108863,y>=18?(y-=18,w+=1,this.words[w]|=v>>>26):y+=8}this._strip()};function b(h,o,a,f){for(var p=0,y=0,w=Math.min(h.length,a),v=o;v<w;v++){var g=h.charCodeAt(v)-48;p*=f,g>=49?y=g-49+10:g>=17?y=g-17+10:y=g,n(g>=0&&y<f,"Invalid character"),p+=y}return p}i.prototype._parseBase=function(o,a,f){this.words=[0],this.length=1;for(var p=0,y=1;y<=67108863;y*=a)p++;p--,y=y/a|0;for(var w=o.length-f,v=w%p,g=Math.min(w,w-v)+f,u=0,m=f;m<g;m+=p)u=b(o,m,m+p,a),this.imuln(y),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(v!==0){var K=1;for(u=b(o,m,o.length,a),m=0;m<v;m++)K*=a;this.imuln(K),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var a=0;a<this.length;a++)o.words[a]=this.words[a];o.length=this.length,o.negative=this.negative,o.red=this.red};function S(h,o){h.words=o.words,h.length=o.length,h.negative=o.negative,h.red=o.red}if(i.prototype._move=function(o){S(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=B}catch{i.prototype.inspect=B}else i.prototype.inspect=B;function B(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,a){o=o||10,a=a|0||1;var f;if(o===16||o==="hex"){f="";for(var p=0,y=0,w=0;w<this.length;w++){var v=this.words[w],g=((v<<p|y)&16777215).toString(16);y=v>>>24-p&16777215,p+=2,p>=26&&(p-=26,w--),y!==0||w!==this.length-1?f=x[6-g.length]+g+f:f=g+f}for(y!==0&&(f=y.toString(16)+f);f.length%a!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(o===(o|0)&&o>=2&&o<=36){var u=E[o],m=M[o];f="";var K=this.clone();for(K.negative=0;!K.isZero();){var N=K.modrn(m).toString(o);K=K.idivn(m),K.isZero()?f=N+f:f=x[u-N.length]+N+f}for(this.isZero()&&(f="0"+f);f.length%a!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},c&&(i.prototype.toBuffer=function(o,a){return this.toArrayLike(c,o,a)}),i.prototype.toArray=function(o,a){return this.toArrayLike(Array,o,a)};var k=function(o,a){return o.allocUnsafe?o.allocUnsafe(a):new o(a)};i.prototype.toArrayLike=function(o,a,f){this._strip();var p=this.byteLength(),y=f||Math.max(1,p);n(p<=y,"byte array longer than desired length"),n(y>0,"Requested array length <= 0");var w=k(o,y),v=a==="le"?"LE":"BE";return this["_toArrayLike"+v](w,p),w},i.prototype._toArrayLikeLE=function(o,a){for(var f=0,p=0,y=0,w=0;y<this.length;y++){var v=this.words[y]<<w|p;o[f++]=v&255,f<o.length&&(o[f++]=v>>8&255),f<o.length&&(o[f++]=v>>16&255),w===6?(f<o.length&&(o[f++]=v>>24&255),p=0,w=0):(p=v>>>24,w+=2)}if(f<o.length)for(o[f++]=p;f<o.length;)o[f++]=0},i.prototype._toArrayLikeBE=function(o,a){for(var f=o.length-1,p=0,y=0,w=0;y<this.length;y++){var v=this.words[y]<<w|p;o[f--]=v&255,f>=0&&(o[f--]=v>>8&255),f>=0&&(o[f--]=v>>16&255),w===6?(f>=0&&(o[f--]=v>>24&255),p=0,w=0):(p=v>>>24,w+=2)}if(f>=0)for(o[f--]=p;f>=0;)o[f--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var a=o,f=0;return a>=4096&&(f+=13,a>>>=13),a>=64&&(f+=7,a>>>=7),a>=8&&(f+=4,a>>>=4),a>=2&&(f+=2,a>>>=2),f+a},i.prototype._zeroBits=function(o){if(o===0)return 26;var a=o,f=0;return a&8191||(f+=13,a>>>=13),a&127||(f+=7,a>>>=7),a&15||(f+=4,a>>>=4),a&3||(f+=2,a>>>=2),a&1||f++,f},i.prototype.bitLength=function(){var o=this.words[this.length-1],a=this._countBits(o);return(this.length-1)*26+a};function R(h){for(var o=new Array(h.bitLength()),a=0;a<o.length;a++){var f=a/26|0,p=a%26;o[a]=h.words[f]>>>p&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,a=0;a<this.length;a++){var f=this._zeroBits(this.words[a]);if(o+=f,f!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var a=0;a<o.length;a++)this.words[a]=this.words[a]|o.words[a];return this._strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var a;this.length>o.length?a=o:a=this;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]&o.words[f];return this.length=a.length,this._strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var a,f;this.length>o.length?(a=this,f=o):(a=o,f=this);for(var p=0;p<f.length;p++)this.words[p]=a.words[p]^f.words[p];if(this!==a)for(;p<a.length;p++)this.words[p]=a.words[p];return this.length=a.length,this._strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var a=Math.ceil(o/26)|0,f=o%26;this._expand(a),f>0&&a--;for(var p=0;p<a;p++)this.words[p]=~this.words[p]&67108863;return f>0&&(this.words[p]=~this.words[p]&67108863>>26-f),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,a){n(typeof o=="number"&&o>=0);var f=o/26|0,p=o%26;return this._expand(f+1),a?this.words[f]=this.words[f]|1<<p:this.words[f]=this.words[f]&~(1<<p),this._strip()},i.prototype.iadd=function(o){var a;if(this.negative!==0&&o.negative===0)return this.negative=0,a=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,a=this.isub(o),o.negative=1,a._normSign();var f,p;this.length>o.length?(f=this,p=o):(f=o,p=this);for(var y=0,w=0;w<p.length;w++)a=(f.words[w]|0)+(p.words[w]|0)+y,this.words[w]=a&67108863,y=a>>>26;for(;y!==0&&w<f.length;w++)a=(f.words[w]|0)+y,this.words[w]=a&67108863,y=a>>>26;if(this.length=f.length,y!==0)this.words[this.length]=y,this.length++;else if(f!==this)for(;w<f.length;w++)this.words[w]=f.words[w];return this},i.prototype.add=function(o){var a;return o.negative!==0&&this.negative===0?(o.negative=0,a=this.sub(o),o.negative^=1,a):o.negative===0&&this.negative!==0?(this.negative=0,a=o.sub(this),this.negative=1,a):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var a=this.iadd(o);return o.negative=1,a._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var f=this.cmp(o);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,y;f>0?(p=this,y=o):(p=o,y=this);for(var w=0,v=0;v<y.length;v++)a=(p.words[v]|0)-(y.words[v]|0)+w,w=a>>26,this.words[v]=a&67108863;for(;w!==0&&v<p.length;v++)a=(p.words[v]|0)+w,w=a>>26,this.words[v]=a&67108863;if(w===0&&v<p.length&&p!==this)for(;v<p.length;v++)this.words[v]=p.words[v];return this.length=Math.max(this.length,v),p!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function _(h,o,a){a.negative=o.negative^h.negative;var f=h.length+o.length|0;a.length=f,f=f-1|0;var p=h.words[0]|0,y=o.words[0]|0,w=p*y,v=w&67108863,g=w/67108864|0;a.words[0]=v;for(var u=1;u<f;u++){for(var m=g>>>26,K=g&67108863,N=Math.min(u,o.length-1),P=Math.max(0,u-h.length+1);P<=N;P++){var nt=u-P|0;p=h.words[nt]|0,y=o.words[P]|0,w=p*y+K,m+=w/67108864|0,K=w&67108863}a.words[u]=K|0,g=m|0}return g!==0?a.words[u]=g|0:a.length--,a._strip()}var T=function(o,a,f){var p=o.words,y=a.words,w=f.words,v=0,g,u,m,K=p[0]|0,N=K&8191,P=K>>>13,nt=p[1]|0,tt=nt&8191,X=nt>>>13,Xt=p[2]|0,ut=Xt&8191,ft=Xt>>>13,Ln=p[3]|0,yt=Ln&8191,mt=Ln>>>13,Vi=p[4]|0,wt=Vi&8191,bt=Vi>>>13,Hi=p[5]|0,vt=Hi&8191,xt=Hi>>>13,$i=p[6]|0,Et=$i&8191,St=$i>>>13,Zi=p[7]|0,Bt=Zi&8191,Mt=Zi>>>13,Wi=p[8]|0,At=Wi&8191,It=Wi>>>13,ji=p[9]|0,kt=ji&8191,_t=ji>>>13,Gi=y[0]|0,Rt=Gi&8191,Lt=Gi>>>13,Yi=y[1]|0,Ut=Yi&8191,Ot=Yi>>>13,Xi=y[2]|0,Tt=Xi&8191,Ct=Xi>>>13,Ji=y[3]|0,Nt=Ji&8191,Kt=Ji>>>13,Qi=y[4]|0,zt=Qi&8191,Ft=Qi>>>13,ts=y[5]|0,Dt=ts&8191,qt=ts>>>13,es=y[6]|0,Pt=es&8191,Vt=es>>>13,ns=y[7]|0,Ht=ns&8191,$t=ns>>>13,rs=y[8]|0,Zt=rs&8191,Wt=rs>>>13,is=y[9]|0,jt=is&8191,Gt=is>>>13;f.negative=o.negative^a.negative,f.length=19,g=Math.imul(N,Rt),u=Math.imul(N,Lt),u=u+Math.imul(P,Rt)|0,m=Math.imul(P,Lt);var Br=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Br>>>26)|0,Br&=67108863,g=Math.imul(tt,Rt),u=Math.imul(tt,Lt),u=u+Math.imul(X,Rt)|0,m=Math.imul(X,Lt),g=g+Math.imul(N,Ut)|0,u=u+Math.imul(N,Ot)|0,u=u+Math.imul(P,Ut)|0,m=m+Math.imul(P,Ot)|0;var Mr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,g=Math.imul(ut,Rt),u=Math.imul(ut,Lt),u=u+Math.imul(ft,Rt)|0,m=Math.imul(ft,Lt),g=g+Math.imul(tt,Ut)|0,u=u+Math.imul(tt,Ot)|0,u=u+Math.imul(X,Ut)|0,m=m+Math.imul(X,Ot)|0,g=g+Math.imul(N,Tt)|0,u=u+Math.imul(N,Ct)|0,u=u+Math.imul(P,Tt)|0,m=m+Math.imul(P,Ct)|0;var Ar=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,g=Math.imul(yt,Rt),u=Math.imul(yt,Lt),u=u+Math.imul(mt,Rt)|0,m=Math.imul(mt,Lt),g=g+Math.imul(ut,Ut)|0,u=u+Math.imul(ut,Ot)|0,u=u+Math.imul(ft,Ut)|0,m=m+Math.imul(ft,Ot)|0,g=g+Math.imul(tt,Tt)|0,u=u+Math.imul(tt,Ct)|0,u=u+Math.imul(X,Tt)|0,m=m+Math.imul(X,Ct)|0,g=g+Math.imul(N,Nt)|0,u=u+Math.imul(N,Kt)|0,u=u+Math.imul(P,Nt)|0,m=m+Math.imul(P,Kt)|0;var Ir=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,g=Math.imul(wt,Rt),u=Math.imul(wt,Lt),u=u+Math.imul(bt,Rt)|0,m=Math.imul(bt,Lt),g=g+Math.imul(yt,Ut)|0,u=u+Math.imul(yt,Ot)|0,u=u+Math.imul(mt,Ut)|0,m=m+Math.imul(mt,Ot)|0,g=g+Math.imul(ut,Tt)|0,u=u+Math.imul(ut,Ct)|0,u=u+Math.imul(ft,Tt)|0,m=m+Math.imul(ft,Ct)|0,g=g+Math.imul(tt,Nt)|0,u=u+Math.imul(tt,Kt)|0,u=u+Math.imul(X,Nt)|0,m=m+Math.imul(X,Kt)|0,g=g+Math.imul(N,zt)|0,u=u+Math.imul(N,Ft)|0,u=u+Math.imul(P,zt)|0,m=m+Math.imul(P,Ft)|0;var kr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(kr>>>26)|0,kr&=67108863,g=Math.imul(vt,Rt),u=Math.imul(vt,Lt),u=u+Math.imul(xt,Rt)|0,m=Math.imul(xt,Lt),g=g+Math.imul(wt,Ut)|0,u=u+Math.imul(wt,Ot)|0,u=u+Math.imul(bt,Ut)|0,m=m+Math.imul(bt,Ot)|0,g=g+Math.imul(yt,Tt)|0,u=u+Math.imul(yt,Ct)|0,u=u+Math.imul(mt,Tt)|0,m=m+Math.imul(mt,Ct)|0,g=g+Math.imul(ut,Nt)|0,u=u+Math.imul(ut,Kt)|0,u=u+Math.imul(ft,Nt)|0,m=m+Math.imul(ft,Kt)|0,g=g+Math.imul(tt,zt)|0,u=u+Math.imul(tt,Ft)|0,u=u+Math.imul(X,zt)|0,m=m+Math.imul(X,Ft)|0,g=g+Math.imul(N,Dt)|0,u=u+Math.imul(N,qt)|0,u=u+Math.imul(P,Dt)|0,m=m+Math.imul(P,qt)|0;var _r=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(_r>>>26)|0,_r&=67108863,g=Math.imul(Et,Rt),u=Math.imul(Et,Lt),u=u+Math.imul(St,Rt)|0,m=Math.imul(St,Lt),g=g+Math.imul(vt,Ut)|0,u=u+Math.imul(vt,Ot)|0,u=u+Math.imul(xt,Ut)|0,m=m+Math.imul(xt,Ot)|0,g=g+Math.imul(wt,Tt)|0,u=u+Math.imul(wt,Ct)|0,u=u+Math.imul(bt,Tt)|0,m=m+Math.imul(bt,Ct)|0,g=g+Math.imul(yt,Nt)|0,u=u+Math.imul(yt,Kt)|0,u=u+Math.imul(mt,Nt)|0,m=m+Math.imul(mt,Kt)|0,g=g+Math.imul(ut,zt)|0,u=u+Math.imul(ut,Ft)|0,u=u+Math.imul(ft,zt)|0,m=m+Math.imul(ft,Ft)|0,g=g+Math.imul(tt,Dt)|0,u=u+Math.imul(tt,qt)|0,u=u+Math.imul(X,Dt)|0,m=m+Math.imul(X,qt)|0,g=g+Math.imul(N,Pt)|0,u=u+Math.imul(N,Vt)|0,u=u+Math.imul(P,Pt)|0,m=m+Math.imul(P,Vt)|0;var Rr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,g=Math.imul(Bt,Rt),u=Math.imul(Bt,Lt),u=u+Math.imul(Mt,Rt)|0,m=Math.imul(Mt,Lt),g=g+Math.imul(Et,Ut)|0,u=u+Math.imul(Et,Ot)|0,u=u+Math.imul(St,Ut)|0,m=m+Math.imul(St,Ot)|0,g=g+Math.imul(vt,Tt)|0,u=u+Math.imul(vt,Ct)|0,u=u+Math.imul(xt,Tt)|0,m=m+Math.imul(xt,Ct)|0,g=g+Math.imul(wt,Nt)|0,u=u+Math.imul(wt,Kt)|0,u=u+Math.imul(bt,Nt)|0,m=m+Math.imul(bt,Kt)|0,g=g+Math.imul(yt,zt)|0,u=u+Math.imul(yt,Ft)|0,u=u+Math.imul(mt,zt)|0,m=m+Math.imul(mt,Ft)|0,g=g+Math.imul(ut,Dt)|0,u=u+Math.imul(ut,qt)|0,u=u+Math.imul(ft,Dt)|0,m=m+Math.imul(ft,qt)|0,g=g+Math.imul(tt,Pt)|0,u=u+Math.imul(tt,Vt)|0,u=u+Math.imul(X,Pt)|0,m=m+Math.imul(X,Vt)|0,g=g+Math.imul(N,Ht)|0,u=u+Math.imul(N,$t)|0,u=u+Math.imul(P,Ht)|0,m=m+Math.imul(P,$t)|0;var Lr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,g=Math.imul(At,Rt),u=Math.imul(At,Lt),u=u+Math.imul(It,Rt)|0,m=Math.imul(It,Lt),g=g+Math.imul(Bt,Ut)|0,u=u+Math.imul(Bt,Ot)|0,u=u+Math.imul(Mt,Ut)|0,m=m+Math.imul(Mt,Ot)|0,g=g+Math.imul(Et,Tt)|0,u=u+Math.imul(Et,Ct)|0,u=u+Math.imul(St,Tt)|0,m=m+Math.imul(St,Ct)|0,g=g+Math.imul(vt,Nt)|0,u=u+Math.imul(vt,Kt)|0,u=u+Math.imul(xt,Nt)|0,m=m+Math.imul(xt,Kt)|0,g=g+Math.imul(wt,zt)|0,u=u+Math.imul(wt,Ft)|0,u=u+Math.imul(bt,zt)|0,m=m+Math.imul(bt,Ft)|0,g=g+Math.imul(yt,Dt)|0,u=u+Math.imul(yt,qt)|0,u=u+Math.imul(mt,Dt)|0,m=m+Math.imul(mt,qt)|0,g=g+Math.imul(ut,Pt)|0,u=u+Math.imul(ut,Vt)|0,u=u+Math.imul(ft,Pt)|0,m=m+Math.imul(ft,Vt)|0,g=g+Math.imul(tt,Ht)|0,u=u+Math.imul(tt,$t)|0,u=u+Math.imul(X,Ht)|0,m=m+Math.imul(X,$t)|0,g=g+Math.imul(N,Zt)|0,u=u+Math.imul(N,Wt)|0,u=u+Math.imul(P,Zt)|0,m=m+Math.imul(P,Wt)|0;var Ur=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,g=Math.imul(kt,Rt),u=Math.imul(kt,Lt),u=u+Math.imul(_t,Rt)|0,m=Math.imul(_t,Lt),g=g+Math.imul(At,Ut)|0,u=u+Math.imul(At,Ot)|0,u=u+Math.imul(It,Ut)|0,m=m+Math.imul(It,Ot)|0,g=g+Math.imul(Bt,Tt)|0,u=u+Math.imul(Bt,Ct)|0,u=u+Math.imul(Mt,Tt)|0,m=m+Math.imul(Mt,Ct)|0,g=g+Math.imul(Et,Nt)|0,u=u+Math.imul(Et,Kt)|0,u=u+Math.imul(St,Nt)|0,m=m+Math.imul(St,Kt)|0,g=g+Math.imul(vt,zt)|0,u=u+Math.imul(vt,Ft)|0,u=u+Math.imul(xt,zt)|0,m=m+Math.imul(xt,Ft)|0,g=g+Math.imul(wt,Dt)|0,u=u+Math.imul(wt,qt)|0,u=u+Math.imul(bt,Dt)|0,m=m+Math.imul(bt,qt)|0,g=g+Math.imul(yt,Pt)|0,u=u+Math.imul(yt,Vt)|0,u=u+Math.imul(mt,Pt)|0,m=m+Math.imul(mt,Vt)|0,g=g+Math.imul(ut,Ht)|0,u=u+Math.imul(ut,$t)|0,u=u+Math.imul(ft,Ht)|0,m=m+Math.imul(ft,$t)|0,g=g+Math.imul(tt,Zt)|0,u=u+Math.imul(tt,Wt)|0,u=u+Math.imul(X,Zt)|0,m=m+Math.imul(X,Wt)|0,g=g+Math.imul(N,jt)|0,u=u+Math.imul(N,Gt)|0,u=u+Math.imul(P,jt)|0,m=m+Math.imul(P,Gt)|0;var Or=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Or>>>26)|0,Or&=67108863,g=Math.imul(kt,Ut),u=Math.imul(kt,Ot),u=u+Math.imul(_t,Ut)|0,m=Math.imul(_t,Ot),g=g+Math.imul(At,Tt)|0,u=u+Math.imul(At,Ct)|0,u=u+Math.imul(It,Tt)|0,m=m+Math.imul(It,Ct)|0,g=g+Math.imul(Bt,Nt)|0,u=u+Math.imul(Bt,Kt)|0,u=u+Math.imul(Mt,Nt)|0,m=m+Math.imul(Mt,Kt)|0,g=g+Math.imul(Et,zt)|0,u=u+Math.imul(Et,Ft)|0,u=u+Math.imul(St,zt)|0,m=m+Math.imul(St,Ft)|0,g=g+Math.imul(vt,Dt)|0,u=u+Math.imul(vt,qt)|0,u=u+Math.imul(xt,Dt)|0,m=m+Math.imul(xt,qt)|0,g=g+Math.imul(wt,Pt)|0,u=u+Math.imul(wt,Vt)|0,u=u+Math.imul(bt,Pt)|0,m=m+Math.imul(bt,Vt)|0,g=g+Math.imul(yt,Ht)|0,u=u+Math.imul(yt,$t)|0,u=u+Math.imul(mt,Ht)|0,m=m+Math.imul(mt,$t)|0,g=g+Math.imul(ut,Zt)|0,u=u+Math.imul(ut,Wt)|0,u=u+Math.imul(ft,Zt)|0,m=m+Math.imul(ft,Wt)|0,g=g+Math.imul(tt,jt)|0,u=u+Math.imul(tt,Gt)|0,u=u+Math.imul(X,jt)|0,m=m+Math.imul(X,Gt)|0;var Tr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,g=Math.imul(kt,Tt),u=Math.imul(kt,Ct),u=u+Math.imul(_t,Tt)|0,m=Math.imul(_t,Ct),g=g+Math.imul(At,Nt)|0,u=u+Math.imul(At,Kt)|0,u=u+Math.imul(It,Nt)|0,m=m+Math.imul(It,Kt)|0,g=g+Math.imul(Bt,zt)|0,u=u+Math.imul(Bt,Ft)|0,u=u+Math.imul(Mt,zt)|0,m=m+Math.imul(Mt,Ft)|0,g=g+Math.imul(Et,Dt)|0,u=u+Math.imul(Et,qt)|0,u=u+Math.imul(St,Dt)|0,m=m+Math.imul(St,qt)|0,g=g+Math.imul(vt,Pt)|0,u=u+Math.imul(vt,Vt)|0,u=u+Math.imul(xt,Pt)|0,m=m+Math.imul(xt,Vt)|0,g=g+Math.imul(wt,Ht)|0,u=u+Math.imul(wt,$t)|0,u=u+Math.imul(bt,Ht)|0,m=m+Math.imul(bt,$t)|0,g=g+Math.imul(yt,Zt)|0,u=u+Math.imul(yt,Wt)|0,u=u+Math.imul(mt,Zt)|0,m=m+Math.imul(mt,Wt)|0,g=g+Math.imul(ut,jt)|0,u=u+Math.imul(ut,Gt)|0,u=u+Math.imul(ft,jt)|0,m=m+Math.imul(ft,Gt)|0;var Cr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,g=Math.imul(kt,Nt),u=Math.imul(kt,Kt),u=u+Math.imul(_t,Nt)|0,m=Math.imul(_t,Kt),g=g+Math.imul(At,zt)|0,u=u+Math.imul(At,Ft)|0,u=u+Math.imul(It,zt)|0,m=m+Math.imul(It,Ft)|0,g=g+Math.imul(Bt,Dt)|0,u=u+Math.imul(Bt,qt)|0,u=u+Math.imul(Mt,Dt)|0,m=m+Math.imul(Mt,qt)|0,g=g+Math.imul(Et,Pt)|0,u=u+Math.imul(Et,Vt)|0,u=u+Math.imul(St,Pt)|0,m=m+Math.imul(St,Vt)|0,g=g+Math.imul(vt,Ht)|0,u=u+Math.imul(vt,$t)|0,u=u+Math.imul(xt,Ht)|0,m=m+Math.imul(xt,$t)|0,g=g+Math.imul(wt,Zt)|0,u=u+Math.imul(wt,Wt)|0,u=u+Math.imul(bt,Zt)|0,m=m+Math.imul(bt,Wt)|0,g=g+Math.imul(yt,jt)|0,u=u+Math.imul(yt,Gt)|0,u=u+Math.imul(mt,jt)|0,m=m+Math.imul(mt,Gt)|0;var Nr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,g=Math.imul(kt,zt),u=Math.imul(kt,Ft),u=u+Math.imul(_t,zt)|0,m=Math.imul(_t,Ft),g=g+Math.imul(At,Dt)|0,u=u+Math.imul(At,qt)|0,u=u+Math.imul(It,Dt)|0,m=m+Math.imul(It,qt)|0,g=g+Math.imul(Bt,Pt)|0,u=u+Math.imul(Bt,Vt)|0,u=u+Math.imul(Mt,Pt)|0,m=m+Math.imul(Mt,Vt)|0,g=g+Math.imul(Et,Ht)|0,u=u+Math.imul(Et,$t)|0,u=u+Math.imul(St,Ht)|0,m=m+Math.imul(St,$t)|0,g=g+Math.imul(vt,Zt)|0,u=u+Math.imul(vt,Wt)|0,u=u+Math.imul(xt,Zt)|0,m=m+Math.imul(xt,Wt)|0,g=g+Math.imul(wt,jt)|0,u=u+Math.imul(wt,Gt)|0,u=u+Math.imul(bt,jt)|0,m=m+Math.imul(bt,Gt)|0;var Kr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,g=Math.imul(kt,Dt),u=Math.imul(kt,qt),u=u+Math.imul(_t,Dt)|0,m=Math.imul(_t,qt),g=g+Math.imul(At,Pt)|0,u=u+Math.imul(At,Vt)|0,u=u+Math.imul(It,Pt)|0,m=m+Math.imul(It,Vt)|0,g=g+Math.imul(Bt,Ht)|0,u=u+Math.imul(Bt,$t)|0,u=u+Math.imul(Mt,Ht)|0,m=m+Math.imul(Mt,$t)|0,g=g+Math.imul(Et,Zt)|0,u=u+Math.imul(Et,Wt)|0,u=u+Math.imul(St,Zt)|0,m=m+Math.imul(St,Wt)|0,g=g+Math.imul(vt,jt)|0,u=u+Math.imul(vt,Gt)|0,u=u+Math.imul(xt,jt)|0,m=m+Math.imul(xt,Gt)|0;var zr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(zr>>>26)|0,zr&=67108863,g=Math.imul(kt,Pt),u=Math.imul(kt,Vt),u=u+Math.imul(_t,Pt)|0,m=Math.imul(_t,Vt),g=g+Math.imul(At,Ht)|0,u=u+Math.imul(At,$t)|0,u=u+Math.imul(It,Ht)|0,m=m+Math.imul(It,$t)|0,g=g+Math.imul(Bt,Zt)|0,u=u+Math.imul(Bt,Wt)|0,u=u+Math.imul(Mt,Zt)|0,m=m+Math.imul(Mt,Wt)|0,g=g+Math.imul(Et,jt)|0,u=u+Math.imul(Et,Gt)|0,u=u+Math.imul(St,jt)|0,m=m+Math.imul(St,Gt)|0;var Fr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,g=Math.imul(kt,Ht),u=Math.imul(kt,$t),u=u+Math.imul(_t,Ht)|0,m=Math.imul(_t,$t),g=g+Math.imul(At,Zt)|0,u=u+Math.imul(At,Wt)|0,u=u+Math.imul(It,Zt)|0,m=m+Math.imul(It,Wt)|0,g=g+Math.imul(Bt,jt)|0,u=u+Math.imul(Bt,Gt)|0,u=u+Math.imul(Mt,jt)|0,m=m+Math.imul(Mt,Gt)|0;var Dr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,g=Math.imul(kt,Zt),u=Math.imul(kt,Wt),u=u+Math.imul(_t,Zt)|0,m=Math.imul(_t,Wt),g=g+Math.imul(At,jt)|0,u=u+Math.imul(At,Gt)|0,u=u+Math.imul(It,jt)|0,m=m+Math.imul(It,Gt)|0;var qr=(v+g|0)+((u&8191)<<13)|0;v=(m+(u>>>13)|0)+(qr>>>26)|0,qr&=67108863,g=Math.imul(kt,jt),u=Math.imul(kt,Gt),u=u+Math.imul(_t,jt)|0,m=Math.imul(_t,Gt);var Pr=(v+g|0)+((u&8191)<<13)|0;return v=(m+(u>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,w[0]=Br,w[1]=Mr,w[2]=Ar,w[3]=Ir,w[4]=kr,w[5]=_r,w[6]=Rr,w[7]=Lr,w[8]=Ur,w[9]=Or,w[10]=Tr,w[11]=Cr,w[12]=Nr,w[13]=Kr,w[14]=zr,w[15]=Fr,w[16]=Dr,w[17]=qr,w[18]=Pr,v!==0&&(w[19]=v,f.length++),f};Math.imul||(T=_);function L(h,o,a){a.negative=o.negative^h.negative,a.length=h.length+o.length;for(var f=0,p=0,y=0;y<a.length-1;y++){var w=p;p=0;for(var v=f&67108863,g=Math.min(y,o.length-1),u=Math.max(0,y-h.length+1);u<=g;u++){var m=y-u,K=h.words[m]|0,N=o.words[u]|0,P=K*N,nt=P&67108863;w=w+(P/67108864|0)|0,nt=nt+v|0,v=nt&67108863,w=w+(nt>>>26)|0,p+=w>>>26,w&=67108863}a.words[y]=v,f=w,w=p}return f!==0?a.words[y]=f:a.length--,a._strip()}function z(h,o,a){return L(h,o,a)}i.prototype.mulTo=function(o,a){var f,p=this.length+o.length;return this.length===10&&o.length===10?f=T(this,o,a):p<63?f=_(this,o,a):p<1024?f=L(this,o,a):f=z(this,o,a),f},i.prototype.mul=function(o){var a=new i(null);return a.words=new Array(this.length+o.length),this.mulTo(o,a)},i.prototype.mulf=function(o){var a=new i(null);return a.words=new Array(this.length+o.length),z(this,o,a)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var a=o<0;a&&(o=-o),n(typeof o=="number"),n(o<67108864);for(var f=0,p=0;p<this.length;p++){var y=(this.words[p]|0)*o,w=(y&67108863)+(f&67108863);f>>=26,f+=y/67108864|0,f+=w>>>26,this.words[p]=w&67108863}return f!==0&&(this.words[p]=f,this.length++),this.length=o===0?1:this.length,a?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var a=R(o);if(a.length===0)return new i(1);for(var f=this,p=0;p<a.length&&a[p]===0;p++,f=f.sqr());if(++p<a.length)for(var y=f.sqr();p<a.length;p++,y=y.sqr())a[p]!==0&&(f=f.mul(y));return f},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var a=o%26,f=(o-a)/26,p=67108863>>>26-a<<26-a,y;if(a!==0){var w=0;for(y=0;y<this.length;y++){var v=this.words[y]&p,g=(this.words[y]|0)-v<<a;this.words[y]=g|w,w=v>>>26-a}w&&(this.words[y]=w,this.length++)}if(f!==0){for(y=this.length-1;y>=0;y--)this.words[y+f]=this.words[y];for(y=0;y<f;y++)this.words[y]=0;this.length+=f}return this._strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,a,f){n(typeof o=="number"&&o>=0);var p;a?p=(a-a%26)/26:p=0;var y=o%26,w=Math.min((o-y)/26,this.length),v=67108863^67108863>>>y<<y,g=f;if(p-=w,p=Math.max(0,p),g){for(var u=0;u<w;u++)g.words[u]=this.words[u];g.length=w}if(w!==0)if(this.length>w)for(this.length-=w,u=0;u<this.length;u++)this.words[u]=this.words[u+w];else this.words[0]=0,this.length=1;var m=0;for(u=this.length-1;u>=0&&(m!==0||u>=p);u--){var K=this.words[u]|0;this.words[u]=m<<26-y|K>>>y,m=K&v}return g&&m!==0&&(g.words[g.length++]=m),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,a,f){return n(this.negative===0),this.iushrn(o,a,f)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var a=o%26,f=(o-a)/26,p=1<<a;if(this.length<=f)return!1;var y=this.words[f];return!!(y&p)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var a=o%26,f=(o-a)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(a!==0&&f++,this.length=Math.min(f,this.length),a!==0){var p=67108863^67108863>>>a<<a;this.words[this.length-1]&=p}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var a=0;a<this.length&&this.words[a]>=67108864;a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=Math.max(this.length,a+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&this.words[a]<0;a++)this.words[a]+=67108864,this.words[a+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,a,f){var p=o.length+f,y;this._expand(p);var w,v=0;for(y=0;y<o.length;y++){w=(this.words[y+f]|0)+v;var g=(o.words[y]|0)*a;w-=g&67108863,v=(w>>26)-(g/67108864|0),this.words[y+f]=w&67108863}for(;y<this.length-f;y++)w=(this.words[y+f]|0)+v,v=w>>26,this.words[y+f]=w&67108863;if(v===0)return this._strip();for(n(v===-1),v=0,y=0;y<this.length;y++)w=-(this.words[y]|0)+v,v=w>>26,this.words[y]=w&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,a){var f=this.length-o.length,p=this.clone(),y=o,w=y.words[y.length-1]|0,v=this._countBits(w);f=26-v,f!==0&&(y=y.ushln(f),p.iushln(f),w=y.words[y.length-1]|0);var g=p.length-y.length,u;if(a!=="mod"){u=new i(null),u.length=g+1,u.words=new Array(u.length);for(var m=0;m<u.length;m++)u.words[m]=0}var K=p.clone()._ishlnsubmul(y,1,g);K.negative===0&&(p=K,u&&(u.words[g]=1));for(var N=g-1;N>=0;N--){var P=(p.words[y.length+N]|0)*67108864+(p.words[y.length+N-1]|0);for(P=Math.min(P/w|0,67108863),p._ishlnsubmul(y,P,N);p.negative!==0;)P--,p.negative=0,p._ishlnsubmul(y,1,N),p.isZero()||(p.negative^=1);u&&(u.words[N]=P)}return u&&u._strip(),p._strip(),a!=="div"&&f!==0&&p.iushrn(f),{div:u||null,mod:p}},i.prototype.divmod=function(o,a,f){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var p,y,w;return this.negative!==0&&o.negative===0?(w=this.neg().divmod(o,a),a!=="mod"&&(p=w.div.neg()),a!=="div"&&(y=w.mod.neg(),f&&y.negative!==0&&y.iadd(o)),{div:p,mod:y}):this.negative===0&&o.negative!==0?(w=this.divmod(o.neg(),a),a!=="mod"&&(p=w.div.neg()),{div:p,mod:w.mod}):this.negative&o.negative?(w=this.neg().divmod(o.neg(),a),a!=="div"&&(y=w.mod.neg(),f&&y.negative!==0&&y.isub(o)),{div:w.div,mod:y}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?a==="div"?{div:this.divn(o.words[0]),mod:null}:a==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,a)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var a=this.divmod(o);if(a.mod.isZero())return a.div;var f=a.div.negative!==0?a.mod.isub(o):a.mod,p=o.ushrn(1),y=o.andln(1),w=f.cmp(p);return w<0||y===1&&w===0?a.div:a.div.negative!==0?a.div.isubn(1):a.div.iaddn(1)},i.prototype.modrn=function(o){var a=o<0;a&&(o=-o),n(o<=67108863);for(var f=(1<<26)%o,p=0,y=this.length-1;y>=0;y--)p=(f*p+(this.words[y]|0))%o;return a?-p:p},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var a=o<0;a&&(o=-o),n(o<=67108863);for(var f=0,p=this.length-1;p>=0;p--){var y=(this.words[p]|0)+f*67108864;this.words[p]=y/o|0,f=y%o}return this._strip(),a?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var a=this,f=o.clone();a.negative!==0?a=a.umod(o):a=a.clone();for(var p=new i(1),y=new i(0),w=new i(0),v=new i(1),g=0;a.isEven()&&f.isEven();)a.iushrn(1),f.iushrn(1),++g;for(var u=f.clone(),m=a.clone();!a.isZero();){for(var K=0,N=1;!(a.words[0]&N)&&K<26;++K,N<<=1);if(K>0)for(a.iushrn(K);K-- >0;)(p.isOdd()||y.isOdd())&&(p.iadd(u),y.isub(m)),p.iushrn(1),y.iushrn(1);for(var P=0,nt=1;!(f.words[0]&nt)&&P<26;++P,nt<<=1);if(P>0)for(f.iushrn(P);P-- >0;)(w.isOdd()||v.isOdd())&&(w.iadd(u),v.isub(m)),w.iushrn(1),v.iushrn(1);a.cmp(f)>=0?(a.isub(f),p.isub(w),y.isub(v)):(f.isub(a),w.isub(p),v.isub(y))}return{a:w,b:v,gcd:f.iushln(g)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var a=this,f=o.clone();a.negative!==0?a=a.umod(o):a=a.clone();for(var p=new i(1),y=new i(0),w=f.clone();a.cmpn(1)>0&&f.cmpn(1)>0;){for(var v=0,g=1;!(a.words[0]&g)&&v<26;++v,g<<=1);if(v>0)for(a.iushrn(v);v-- >0;)p.isOdd()&&p.iadd(w),p.iushrn(1);for(var u=0,m=1;!(f.words[0]&m)&&u<26;++u,m<<=1);if(u>0)for(f.iushrn(u);u-- >0;)y.isOdd()&&y.iadd(w),y.iushrn(1);a.cmp(f)>=0?(a.isub(f),p.isub(y)):(f.isub(a),y.isub(p))}var K;return a.cmpn(1)===0?K=p:K=y,K.cmpn(0)<0&&K.iadd(o),K},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var a=this.clone(),f=o.clone();a.negative=0,f.negative=0;for(var p=0;a.isEven()&&f.isEven();p++)a.iushrn(1),f.iushrn(1);do{for(;a.isEven();)a.iushrn(1);for(;f.isEven();)f.iushrn(1);var y=a.cmp(f);if(y<0){var w=a;a=f,f=w}else if(y===0||f.cmpn(1)===0)break;a.isub(f)}while(!0);return f.iushln(p)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var a=o%26,f=(o-a)/26,p=1<<a;if(this.length<=f)return this._expand(f+1),this.words[f]|=p,this;for(var y=p,w=f;y!==0&&w<this.length;w++){var v=this.words[w]|0;v+=y,y=v>>>26,v&=67108863,this.words[w]=v}return y!==0&&(this.words[w]=y,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var a=o<0;if(this.negative!==0&&!a)return-1;if(this.negative===0&&a)return 1;this._strip();var f;if(this.length>1)f=1;else{a&&(o=-o),n(o<=67108863,"Number is too big");var p=this.words[0]|0;f=p===o?0:p<o?-1:1}return this.negative!==0?-f|0:f},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var a=this.ucmp(o);return this.negative!==0?-a|0:a},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var a=0,f=this.length-1;f>=0;f--){var p=this.words[f]|0,y=o.words[f]|0;if(p!==y){p<y?a=-1:p>y&&(a=1);break}}return a},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new F(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Z={k256:null,p224:null,p192:null,p25519:null};function G(h,o){this.name=h,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},G.prototype.ireduce=function(o){var a=o,f;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),f=a.bitLength();while(f>this.n);var p=f<this.n?-1:a.ucmp(this.p);return p===0?(a.words[0]=0,a.length=1):p>0?a.isub(this.p):a.strip!==void 0?a.strip():a._strip(),a},G.prototype.split=function(o,a){o.iushrn(this.n,0,a)},G.prototype.imulK=function(o){return o.imul(this.k)};function J(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(J,G),J.prototype.split=function(o,a){for(var f=4194303,p=Math.min(o.length,9),y=0;y<p;y++)a.words[y]=o.words[y];if(a.length=p,o.length<=9){o.words[0]=0,o.length=1;return}var w=o.words[9];for(a.words[a.length++]=w&f,y=10;y<o.length;y++){var v=o.words[y]|0;o.words[y-10]=(v&f)<<4|w>>>22,w=v}w>>>=22,o.words[y-10]=w,w===0&&o.length>10?o.length-=10:o.length-=9},J.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var a=0,f=0;f<o.length;f++){var p=o.words[f]|0;a+=p*977,o.words[f]=a&67108863,a=p*64+(a/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function Y(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(Y,G);function U(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(U,G);function H(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(H,G),H.prototype.imulK=function(o){for(var a=0,f=0;f<o.length;f++){var p=(o.words[f]|0)*19+a,y=p&67108863;p>>>=26,o.words[f]=y,a=p}return a!==0&&(o.words[o.length++]=a),o},i._prime=function(o){if(Z[o])return Z[o];var a;if(o==="k256")a=new J;else if(o==="p224")a=new Y;else if(o==="p192")a=new U;else if(o==="p25519")a=new H;else throw new Error("Unknown prime "+o);return Z[o]=a,a};function F(h){if(typeof h=="string"){var o=i._prime(h);this.m=o.p,this.prime=o}else n(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}F.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},F.prototype._verify2=function(o,a){n((o.negative|a.negative)===0,"red works only with positives"),n(o.red&&o.red===a.red,"red works only with red numbers")},F.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(S(o,o.umod(this.m)._forceRed(this)),o)},F.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},F.prototype.add=function(o,a){this._verify2(o,a);var f=o.add(a);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},F.prototype.iadd=function(o,a){this._verify2(o,a);var f=o.iadd(a);return f.cmp(this.m)>=0&&f.isub(this.m),f},F.prototype.sub=function(o,a){this._verify2(o,a);var f=o.sub(a);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},F.prototype.isub=function(o,a){this._verify2(o,a);var f=o.isub(a);return f.cmpn(0)<0&&f.iadd(this.m),f},F.prototype.shl=function(o,a){return this._verify1(o),this.imod(o.ushln(a))},F.prototype.imul=function(o,a){return this._verify2(o,a),this.imod(o.imul(a))},F.prototype.mul=function(o,a){return this._verify2(o,a),this.imod(o.mul(a))},F.prototype.isqr=function(o){return this.imul(o,o.clone())},F.prototype.sqr=function(o){return this.mul(o,o)},F.prototype.sqrt=function(o){if(o.isZero())return o.clone();var a=this.m.andln(3);if(n(a%2===1),a===3){var f=this.m.add(new i(1)).iushrn(2);return this.pow(o,f)}for(var p=this.m.subn(1),y=0;!p.isZero()&&p.andln(1)===0;)y++,p.iushrn(1);n(!p.isZero());var w=new i(1).toRed(this),v=w.redNeg(),g=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);this.pow(u,g).cmp(v)!==0;)u.redIAdd(v);for(var m=this.pow(u,p),K=this.pow(o,p.addn(1).iushrn(1)),N=this.pow(o,p),P=y;N.cmp(w)!==0;){for(var nt=N,tt=0;nt.cmp(w)!==0;tt++)nt=nt.redSqr();n(tt<P);var X=this.pow(m,new i(1).iushln(P-tt-1));K=K.redMul(X),m=X.redSqr(),N=N.redMul(m),P=tt}return K},F.prototype.invm=function(o){var a=o._invmp(this.m);return a.negative!==0?(a.negative=0,this.imod(a).redNeg()):this.imod(a)},F.prototype.pow=function(o,a){if(a.isZero())return new i(1).toRed(this);if(a.cmpn(1)===0)return o.clone();var f=4,p=new Array(1<<f);p[0]=new i(1).toRed(this),p[1]=o;for(var y=2;y<p.length;y++)p[y]=this.mul(p[y-1],o);var w=p[0],v=0,g=0,u=a.bitLength()%26;for(u===0&&(u=26),y=a.length-1;y>=0;y--){for(var m=a.words[y],K=u-1;K>=0;K--){var N=m>>K&1;if(w!==p[0]&&(w=this.sqr(w)),N===0&&v===0){g=0;continue}v<<=1,v|=N,g++,!(g!==f&&(y!==0||K!==0))&&(w=this.mul(w,p[v]),g=0,v=0)}u=26}return w},F.prototype.convertTo=function(o){var a=o.umod(this.m);return a===o?a.clone():a},F.prototype.convertFrom=function(o){var a=o.clone();return a.red=null,a},i.mont=function(o){return new V(o)};function V(h){F.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(V,F),V.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},V.prototype.convertFrom=function(o){var a=this.imod(o.mul(this.rinv));return a.red=null,a},V.prototype.imul=function(o,a){if(o.isZero()||a.isZero())return o.words[0]=0,o.length=1,o;var f=o.imul(a),p=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=f.isub(p).iushrn(this.shift),w=y;return y.cmp(this.m)>=0?w=y.isub(this.m):y.cmpn(0)<0&&(w=y.iadd(this.m)),w._forceRed(this)},V.prototype.mul=function(o,a){if(o.isZero()||a.isZero())return new i(0)._forceRed(this);var f=o.mul(a),p=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=f.isub(p).iushrn(this.shift),w=y;return y.cmp(this.m)>=0?w=y.isub(this.m):y.cmpn(0)<0&&(w=y.iadd(this.m)),w._forceRed(this)},V.prototype.invm=function(o){var a=this.imod(o._invmp(this.m).mul(this.r2));return a._forceRed(this)}})(r,Ie)})(xi);var to=xi.exports;const ms=As(to);var ai={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,t){var e=et,n=e.Buffer;function s(c,d){for(var l in c)d[l]=c[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(c,d,l){return n(c,d,l)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(c,d,l){if(typeof c=="number")throw new TypeError("Argument must not be a number");return n(c,d,l)},i.alloc=function(c,d,l){if(typeof c!="number")throw new TypeError("Argument must be a number");var b=n(c);return d!==void 0?typeof l=="string"?b.fill(d,l):b.fill(d):b.fill(0),b},i.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return n(c)},i.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(c)}})(ai,ai.exports);var uu=ai.exports,Xn=uu.Buffer;function cu(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var c=r.length,d=r.charAt(0),l=Math.log(c)/Math.log(256),b=Math.log(256)/Math.log(c);function S(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=Xn.from(E)),!Xn.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var M=0,k=0,R=0,_=E.length;R!==_&&E[R]===0;)R++,M++;for(var T=(_-R)*b+1>>>0,L=new Uint8Array(T);R!==_;){for(var z=E[R],Z=0,G=T-1;(z!==0||Z<k)&&G!==-1;G--,Z++)z+=256*L[G]>>>0,L[G]=z%c>>>0,z=z/c>>>0;if(z!==0)throw new Error("Non-zero carry");k=Z,R++}for(var J=T-k;J!==T&&L[J]===0;)J++;for(var Y=d.repeat(M);J<T;++J)Y+=r.charAt(L[J]);return Y}function B(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return Xn.alloc(0);for(var M=0,k=0,R=0;E[M]===d;)k++,M++;for(var _=(E.length-M)*l+1>>>0,T=new Uint8Array(_);M<E.length;){var L=E.charCodeAt(M);if(L>255)return;var z=t[L];if(z===255)return;for(var Z=0,G=_-1;(z!==0||Z<R)&&G!==-1;G--,Z++)z+=c*T[G]>>>0,T[G]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");R=Z,M++}for(var J=_-R;J!==_&&T[J]===0;)J++;var Y=Xn.allocUnsafe(k+(_-J));Y.fill(0,0,k);for(var U=k;J!==_;)Y[U++]=T[J++];return Y}function x(E){var M=B(E);if(M)return M;throw new Error("Non-base"+c+" character")}return{encode:S,decodeUnsafe:B,decode:x}}var fu=cu,lu=fu,hu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",eo=lu(hu);const le=As(eo),ws=Os;var ne={};function Fe(r,t,e){return t<=r&&r<=e}function pr(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function du(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var c=r.charCodeAt(n+1);if(56320<=c&&c<=57343){var d=i&1023,l=c&1023;s.push(65536+(d<<10)+l),n+=1}else s.push(65533)}n+=1}return s}function pu(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var sr=-1;function Ei(r){this.tokens=[].slice.call(r)}Ei.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():sr},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var Bn=-1;function Yr(r,t){if(r)throw TypeError("Decoder error");return t||65533}var or="utf-8";function ar(r,t){if(!(this instanceof ar))return new ar(r,t);if(r=r!==void 0?String(r).toLowerCase():or,r!==or)throw new Error("Encoding not supported. Only utf-8 is supported");t=pr(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ar.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=pr(e),this._streaming||(this._decoder=new gu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Ei(n),i=[],c;!s.endOfStream()&&(c=this._decoder.handler(s,s.read()),c!==Bn);)c!==null&&(Array.isArray(c)?i.push.apply(i,c):i.push(c));if(!this._streaming){do{if(c=this._decoder.handler(s,s.read()),c===Bn)break;c!==null&&(Array.isArray(c)?i.push.apply(i,c):i.push(c))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),pu(i)}};function ur(r,t){if(!(this instanceof ur))return new ur(r,t);if(r=r!==void 0?String(r).toLowerCase():or,r!==or)throw new Error("Encoding not supported. Only utf-8 is supported");t=pr(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}ur.prototype={encode:function(t,e){t=t?String(t):"",e=pr(e),this._streaming||(this._encoder=new yu(this._options)),this._streaming=!!e.stream;for(var n=[],s=new Ei(du(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Bn);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Bn;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function gu(r){var t=r.fatal,e=0,n=0,s=0,i=128,c=191;this.handler=function(d,l){if(l===sr&&s!==0)return s=0,Yr(t);if(l===sr)return Bn;if(s===0){if(Fe(l,0,127))return l;if(Fe(l,194,223))s=1,e=l-192;else if(Fe(l,224,239))l===224&&(i=160),l===237&&(c=159),s=2,e=l-224;else if(Fe(l,240,244))l===240&&(i=144),l===244&&(c=143),s=3,e=l-240;else return Yr(t);return e=e<<6*s,null}if(!Fe(l,i,c))return e=s=n=0,i=128,c=191,d.prepend(l),Yr(t);if(i=128,c=191,n+=1,e+=l-128<<6*(s-n),n!==s)return null;var b=e;return e=s=n=0,b}}function yu(r){r.fatal,this.handler=function(t,e){if(e===sr)return Bn;if(Fe(e,0,127))return e;var n,s;Fe(e,128,2047)?(n=1,s=192):Fe(e,2048,65535)?(n=2,s=224):Fe(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var c=e>>6*(n-1);i.push(128|c&63),n-=1}return i}}const mu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ar,TextEncoder:ur},Symbol.toStringTag,{value:"Module"})),wu=pi(mu);var bu=Ie&&Ie.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),vu=Ie&&Ie.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Oe=Ie&&Ie.__decorate||function(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var d=r.length-1;d>=0;d--)(c=r[d])&&(i=(s<3?c(i):s>3?c(t,e,i):c(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},xu=Ie&&Ie.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&bu(t,r,e);return vu(t,r),t},no=Ie&&Ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ne,"__esModule",{value:!0});var ro=ne.deserializeUnchecked=co=ne.deserialize=uo=ne.serialize=ne.BinaryReader=ne.BinaryWriter=ne.BorshError=ne.baseDecode=ne.baseEncode=void 0;const je=no(to),io=no(eo),Eu=xu(wu),Su=typeof TextDecoder!="function"?Eu.TextDecoder:TextDecoder,Bu=new Su("utf-8",{fatal:!0});function Mu(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),io.default.encode(Buffer.from(r))}ne.baseEncode=Mu;function Au(r){return Buffer.from(io.default.decode(r))}ne.baseDecode=Au;const Xr=1024;class he extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ne.BorshError=he;class so{constructor(){this.buf=Buffer.alloc(Xr),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Xr)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new je.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new je.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new je.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new je.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Xr)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}ne.BinaryWriter=so;function Te(r,t,e){const n=e.value;e.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const c=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(c)>=0)throw new he("Reached the end of buffer when deserializing")}throw i}}}class Ee{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new je.default(t,"le")}readU128(){const t=this.readBuffer(16);return new je.default(t,"le")}readU256(){const t=this.readBuffer(32);return new je.default(t,"le")}readU512(){const t=this.readBuffer(64);return new je.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new he(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Bu.decode(e)}catch(n){throw new he(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let s=0;s<e;++s)n.push(t());return n}}Oe([Te],Ee.prototype,"readU8",null);Oe([Te],Ee.prototype,"readU16",null);Oe([Te],Ee.prototype,"readU32",null);Oe([Te],Ee.prototype,"readU64",null);Oe([Te],Ee.prototype,"readU128",null);Oe([Te],Ee.prototype,"readU256",null);Oe([Te],Ee.prototype,"readU512",null);Oe([Te],Ee.prototype,"readString",null);Oe([Te],Ee.prototype,"readFixedArray",null);Oe([Te],Ee.prototype,"readArray",null);ne.BinaryReader=Ee;function oo(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Xe(r,t,e,n,s){try{if(typeof n=="string")s[`write${oo(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new he(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new he(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let i=0;i<n[1];i++)Xe(r,null,e[i],n[0],s)}else s.writeArray(e,i=>{Xe(r,t,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),Xe(r,t,e,n.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,c)=>{Xe(r,t,c,n.key,s),Xe(r,t,i,n.value,s)});break}default:throw new he(`FieldType ${n} unrecognized`)}else ao(r,e,s)}catch(i){throw i instanceof he&&i.addToFieldPath(t),i}}function ao(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new he(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{Xe(r,s,t[s],i,e)});else if(n.kind==="enum"){const s=t[n.field];for(let i=0;i<n.values.length;++i){const[c,d]=n.values[i];if(c===s){e.writeU8(i),Xe(r,c,t[c],d,e);break}}}else throw new he(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Iu(r,t,e=so){const n=new e;return ao(r,t,n),n.toArray()}var uo=ne.serialize=Iu;function Je(r,t,e,n){try{if(typeof e=="string")return n[`read${oo(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(Je(r,null,e[0],n));return s}else return n.readArray(()=>Je(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?Je(r,t,e.type,n):void 0;if(e.kind==="map"){let s=new Map;const i=n.readU32();for(let c=0;c<i;c++){const d=Je(r,t,e.key,n),l=Je(r,t,e.value,n);s.set(d,l)}return s}return Si(r,e,n)}catch(s){throw s instanceof he&&s.addToFieldPath(t),s}}function Si(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new he(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,c]of r.get(t).fields)s[i]=Je(r,i,c,e);return new t(s)}if(n.kind==="enum"){const s=e.readU8();if(s>=n.values.length)throw new he(`Enum index: ${s} is out of range`);const[i,c]=n.values[s],d=Je(r,i,c,e);return new t({[i]:d})}throw new he(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function ku(r,t,e,n=Ee){const s=new n(e),i=Si(r,t,s);if(s.offset<e.length)throw new he(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var co=ne.deserialize=ku;function _u(r,t,e,n=Ee){const s=new n(e);return Si(r,t,s)}ro=ne.deserializeUnchecked=_u;var I={};Object.defineProperty(I,"__esModule",{value:!0});I.s16=I.s8=I.nu64be=I.u48be=I.u40be=I.u32be=I.u24be=I.u16be=te=I.nu64=I.u48=I.u40=j=I.u32=I.u24=Se=I.u16=st=I.u8=rn=I.offset=I.greedy=I.Constant=I.UTF8=I.CString=I.Blob=I.Boolean=I.BitField=I.BitStructure=I.VariantLayout=I.Union=I.UnionLayoutDiscriminator=I.UnionDiscriminator=I.Structure=I.Sequence=I.DoubleBE=I.Double=I.FloatBE=I.Float=I.NearInt64BE=I.NearInt64=I.NearUInt64BE=I.NearUInt64=I.IntBE=I.Int=I.UIntBE=I.UInt=I.OffsetLayout=I.GreedyCount=I.ExternalLayout=I.bindConstructorLayout=I.nameWithProperty=I.Layout=I.uint8ArrayToBuffer=I.checkUint8Array=void 0;I.constant=I.utf8=I.cstr=ct=I.blob=I.unionLayoutDiscriminator=I.union=de=I.seq=I.bits=$=I.struct=I.f64be=I.f64=I.f32be=I.f32=I.ns64be=I.s48be=I.s40be=I.s32be=I.s24be=I.s16be=we=I.ns64=I.s48=I.s40=I.s32=I.s24=void 0;const Bi=et;function In(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}I.checkUint8Array=In;function it(r){return In(r),Bi.Buffer.from(r.buffer,r.byteOffset,r.length)}I.uint8ArrayToBuffer=it;class ot{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}I.Layout=ot;function Mi(r,t){return t.property?r+"["+t.property+"]":r}I.nameWithProperty=Mi;function Ru(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof ot))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}I.bindConstructorLayout=Ru;class ge extends ot{isCount(){throw new Error("ExternalLayout is abstract")}}I.ExternalLayout=ge;class fo extends ge{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){In(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}I.GreedyCount=fo;class Ai extends ge{constructor(t,e=0,n){if(!(t instanceof ot))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Be||this.layout instanceof Ae}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}I.OffsetLayout=Ai;class Be extends ot{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readUIntLE(e,this.span)}encode(t,e,n=0){return it(e).writeUIntLE(t,n,this.span),this.span}}I.UInt=Be;class Ae extends ot{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readUIntBE(e,this.span)}encode(t,e,n=0){return it(e).writeUIntBE(t,n,this.span),this.span}}I.UIntBE=Ae;class cn extends ot{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readIntLE(e,this.span)}encode(t,e,n=0){return it(e).writeIntLE(t,n,this.span),this.span}}I.Int=cn;class kn extends ot{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return it(t).readIntBE(e,this.span)}encode(t,e,n=0){return it(e).writeIntBE(t,n,this.span),this.span}}I.IntBE=kn;const ui=Math.pow(2,32);function gr(r){const t=Math.floor(r/ui),e=r-t*ui;return{hi32:t,lo32:e}}function yr(r,t){return r*ui+t}class lo extends ot{constructor(t){super(8,t)}decode(t,e=0){const n=it(t),s=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return yr(i,s)}encode(t,e,n=0){const s=gr(t),i=it(e);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}I.NearUInt64=lo;class ho extends ot{constructor(t){super(8,t)}decode(t,e=0){const n=it(t),s=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return yr(s,i)}encode(t,e,n=0){const s=gr(t),i=it(e);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}I.NearUInt64BE=ho;class po extends ot{constructor(t){super(8,t)}decode(t,e=0){const n=it(t),s=n.readUInt32LE(e),i=n.readInt32LE(e+4);return yr(i,s)}encode(t,e,n=0){const s=gr(t),i=it(e);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}I.NearInt64=po;class go extends ot{constructor(t){super(8,t)}decode(t,e=0){const n=it(t),s=n.readInt32BE(e),i=n.readUInt32BE(e+4);return yr(s,i)}encode(t,e,n=0){const s=gr(t),i=it(e);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}I.NearInt64BE=go;class yo extends ot{constructor(t){super(4,t)}decode(t,e=0){return it(t).readFloatLE(e)}encode(t,e,n=0){return it(e).writeFloatLE(t,n),4}}I.Float=yo;class mo extends ot{constructor(t){super(4,t)}decode(t,e=0){return it(t).readFloatBE(e)}encode(t,e,n=0){return it(e).writeFloatBE(t,n),4}}I.FloatBE=mo;class wo extends ot{constructor(t){super(8,t)}decode(t,e=0){return it(t).readDoubleLE(e)}encode(t,e,n=0){return it(e).writeDoubleLE(t,n),8}}I.Double=wo;class bo extends ot{constructor(t){super(8,t)}decode(t,e=0){return it(t).readDoubleBE(e)}encode(t,e,n=0){return it(e).writeDoubleBE(t,n),8}}I.DoubleBE=bo;class vo extends ot{constructor(t,e,n){if(!(t instanceof ot))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof ge&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof ge)&&0<t.span&&(s=e*t.span),super(s,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof ge&&(s=s.decode(t,e)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let s=0,i=this.count;for(i instanceof ge&&(i=i.decode(t,e));s<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return n}encode(t,e,n=0){const s=this.elementLayout,i=t.reduce((c,d)=>c+s.encode(d,e,n+c),0);return this.count instanceof ge&&this.count.encode(t.length,e,n),i}}I.Sequence=vo;class xo extends ot{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,c)=>i&&c instanceof ot,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,c)=>i+c.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const c=i.getSpan(t,e);return e+=c,s+c},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){In(t);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const s=n;let i=0,c=0;for(const d of this.fields){let l=d.span;if(c=0<l?l:0,d.property!==void 0){const b=t[d.property];b!==void 0&&(c=d.encode(b,e,n),0>l&&(l=d.getSpan(e,n)))}i=n,n+=l}return i+c-s}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}I.Structure=xo;class Ii{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}I.UnionDiscriminator=Ii;class cr extends Ii{constructor(t,e){if(!(t instanceof ge&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}I.UnionLayoutDiscriminator=cr;class ki extends ot{constructor(t,e,n){let s;if(t instanceof Be||t instanceof Ae)s=new cr(new Ai(t));else if(t instanceof ge&&t.isCount())s=new cr(t);else if(t instanceof Ii)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof ot))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Be||t instanceof Ae)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof Be||t instanceof Ae,this.defaultLayout=e,this.registry={};let c=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(d){return c(d)},this.configGetSourceVariant=function(d){c=d.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const s=this.discriminator,i=s.decode(t,e),c=this.registry[i];if(c===void 0){const d=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[d.property]=d.decode(t,e+l)}else n=c.decode(t,e);return n}encode(t,e,n=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,c=this.defaultLayout;let d=0;return this.usesPrefixDiscriminator&&(d=i.layout.span),i.encode(t[i.property],e,n),d+c.encode(t[c.property],e,n+d)}return s.encode(t,e,n)}addVariant(t,e,n){const s=new Eo(this,t,e,n);return this.registry[t]=s,s}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}I.Union=ki;class Eo extends ot{constructor(t,e,n,s){if(!(t instanceof ki))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof ot))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+n)),n+s}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,n+s),i+=this.layout.getSpan(e,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}I.VariantLayout=Eo;function mn(r){return 0>r&&(r+=4294967296),r}class _i extends ot{constructor(t,e,n){if(!(t instanceof Be||t instanceof Ae))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=mn(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const n=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){const s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const c=t[i.property];c!==void 0&&i.encode(c)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new Ri(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new So(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}I.BitStructure=_i;class Ri{constructor(t,e,n){if(!(t instanceof _i))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((c,d)=>c+d.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=mn(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return mn(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==mn(t&this.valueMask))throw new TypeError(Mi("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=mn(t<<this.start);this.container._packedSetValue(mn(e&~this.wordMask)|n)}}I.BitField=Ri;let So=class extends Ri{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};I.Boolean=So;class Bo extends ot{constructor(t,e){if(!(t instanceof ge&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof ge||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),it(t).slice(e,e+n)}encode(t,e,n){let s=this.length;if(this.length instanceof ge&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(Mi("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=it(t);return it(e).write(i.toString("hex"),n,s,"hex"),this.length instanceof ge&&this.length.encode(s,e,n),s}}I.Blob=Bo;class Mo extends ot{constructor(t){super(-1,t)}getSpan(t,e=0){In(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return it(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Bi.Buffer.from(t,"utf8"),i=s.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");const c=it(e);return s.copy(c,n),c[n+i]=0,i+1}}I.CString=Mo;class Ao extends ot{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return In(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return it(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=Bi.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(it(e),n),i}}I.UTF8=Ao;class Io extends ot{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}I.Constant=Io;I.greedy=(r,t)=>new fo(r,t);var rn=I.offset=(r,t,e)=>new Ai(r,t,e),st=I.u8=r=>new Be(1,r),Se=I.u16=r=>new Be(2,r);I.u24=r=>new Be(3,r);var j=I.u32=r=>new Be(4,r);I.u40=r=>new Be(5,r);I.u48=r=>new Be(6,r);var te=I.nu64=r=>new lo(r);I.u16be=r=>new Ae(2,r);I.u24be=r=>new Ae(3,r);I.u32be=r=>new Ae(4,r);I.u40be=r=>new Ae(5,r);I.u48be=r=>new Ae(6,r);I.nu64be=r=>new ho(r);I.s8=r=>new cn(1,r);I.s16=r=>new cn(2,r);I.s24=r=>new cn(3,r);I.s32=r=>new cn(4,r);I.s40=r=>new cn(5,r);I.s48=r=>new cn(6,r);var we=I.ns64=r=>new po(r);I.s16be=r=>new kn(2,r);I.s24be=r=>new kn(3,r);I.s32be=r=>new kn(4,r);I.s40be=r=>new kn(5,r);I.s48be=r=>new kn(6,r);I.ns64be=r=>new go(r);I.f32=r=>new yo(r);I.f32be=r=>new mo(r);I.f64=r=>new wo(r);I.f64be=r=>new bo(r);var $=I.struct=(r,t,e)=>new xo(r,t,e);I.bits=(r,t,e)=>new _i(r,t,e);var de=I.seq=(r,t,e)=>new vo(r,t,e);I.union=(r,t,e)=>new ki(r,t,e);I.unionLayoutDiscriminator=(r,t)=>new cr(r,t);var ct=I.blob=(r,t)=>new Bo(r,t);I.cstr=r=>new Mo(r);I.utf8=(r,t)=>new Ao(r,t);I.constant=(r,t)=>new Io(r,t);var Lu=8078e3,Uu=8078001,Ou=8078004,Tu=8078005,Cu=8078006,Nu=8078011;function ko(r){return Array.isArray(r)?"%5B"+r.map(ko).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function Ku([r,t]){return`${r}=${ko(t)}`}function zu(r){const t=Object.entries(r).map(Ku).join("&");return btoa(t)}function Fu(r,t={}){{let e=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(t).length&&(e+=` '${zu(t)}'`),`${e}\``}}var vn=class extends Error{constructor(...[t,e]){let n,s;if(e){const{cause:c,...d}=e;c&&(s={cause:c}),Object.keys(d).length>0&&(n=d)}const i=Fu(t,n);super(i,s);Vr(this,"cause",this.cause);Vr(this,"context");this.context={__code:t,...n},this.name="SolanaError"}};function Du(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function qu(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(Du(t,r));return r.write(t,e,0),e}})}function Pu(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function yn(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function Vu(r,t){if(yn(r)!==yn(t))throw new vn(Ou);if(yn(r)&&yn(t)&&r.fixedSize!==t.fixedSize)throw new vn(Tu,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!yn(r)&&!yn(t)&&r.maxSize!==t.maxSize)throw new vn(Cu,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function Hu(r,t,e=0){if(t.length-e<=0)throw new vn(Lu,{codecDescription:r})}function $u(r,t,e,n=0){const s=e.length-n;if(s<t)throw new vn(Uu,{bytesLength:s,codecDescription:r,expected:t})}function Zu(r,t,e,n){if(n<t||n>e)throw new vn(Nu,{codecDescription:r,max:e,min:t,value:n})}function _o(r){return(r==null?void 0:r.endian)!==1}function Wu(r){return qu({fixedSize:r.size,write(t,e,n){r.range&&Zu(r.name,r.range[0],r.range[1],t);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),t,_o(r.config)),e.set(new Uint8Array(s),n),n+r.size}})}function ju(r){return Pu({fixedSize:r.size,read(t,e=0){Hu(r.name,t,e),$u(r.name,r.size,t,e);const n=new DataView(Gu(t,e,r.size));return[r.get(n,_o(r.config)),e+r.size]}})}function Gu(r,t,e){const n=r.byteOffset+(t??0),s=e??r.byteLength;return r.buffer.slice(n,n+s)}var Yu=(r={})=>Wu({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),Xu=(r={})=>ju({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Ju=(r={})=>Vu(Yu(r),Xu(r));class Qu extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...c}=t,{path:d}=t,l=d.length===0?s:`At path: ${d.join(".")} -- ${s}`;super(i??l),i!=null&&(this.cause=l),Object.assign(this,c),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function tc(r){return Hn(r)&&typeof r[Symbol.iterator]=="function"}function Hn(r){return typeof r=="object"&&r!=null}function fr(r){return Hn(r)&&!Array.isArray(r)}function ke(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function ec(r){const{done:t,value:e}=r.next();return t?void 0:e}function nc(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:c}=e,{refinement:d,message:l=`Expected a value of type \`${c}\`${d?` with refinement \`${d}\``:""}, but received: \`${ke(n)}\``}=r;return{value:n,type:c,refinement:d,key:s[s.length-1],path:s,branch:i,...r,message:l}}function*bs(r,t,e,n){tc(r)||(r=[r]);for(const s of r){const i=nc(s,t,e,n);i&&(yield i)}}function*Li(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:c=!1}=e,d={path:n,branch:s,mask:c};i&&(r=t.coercer(r,d));let l="valid";for(const b of t.validator(r,d))b.explanation=e.message,l="not_valid",yield[b,void 0];for(let[b,S,B]of t.entries(r,d)){const x=Li(S,B,{path:b===void 0?n:[...n,b],branch:b===void 0?s:[...s,S],coerce:i,mask:c,message:e.message});for(const E of x)E[0]?(l=E[0].refinement!=null?"not_refined":"not_valid",yield[E[0],void 0]):i&&(S=E[1],b===void 0?r=S:r instanceof Map?r.set(b,S):r instanceof Set?r.add(S):Hn(r)&&(S!==void 0||b in r)&&(r[b]=S))}if(l!=="not_valid")for(const b of t.refiner(r,d))b.explanation=e.message,l="not_refined",yield[b,void 0];l==="valid"&&(yield[void 0,r])}let Ce=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:c=l=>l,entries:d=function*(){}}=t;this.type=e,this.schema=n,this.entries=d,this.coercer=c,s?this.validator=(l,b)=>{const S=s(l,b);return bs(S,b,this,l)}:this.validator=()=>[],i?this.refiner=(l,b)=>{const S=i(l,b);return bs(S,b,this,l)}:this.refiner=()=>[]}assert(t,e){return rc(t,this,e)}create(t,e){return Cn(t,this,e)}is(t){return Ro(t,this)}mask(t,e){return ic(t,this,e)}validate(t,e={}){return $n(t,this,e)}};function rc(r,t,e){const n=$n(r,t,{message:e});if(n[0])throw n[0]}function Cn(r,t,e){const n=$n(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function ic(r,t,e){const n=$n(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function Ro(r,t){return!$n(r,t)[0]}function $n(r,t,e={}){const n=Li(r,t,e),s=ec(n);return s[0]?[new Qu(s[0],function*(){for(const c of n)c[0]&&(yield c[0])}),void 0]:[void 0,s[1]]}function fn(r,t){return new Ce({type:r,schema:null,validator:t})}function sc(){return fn("any",()=>!0)}function D(r){return new Ce({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${ke(t)}`}})}function Ue(){return fn("boolean",r=>typeof r=="boolean")}function Ui(r){return fn("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${ke(t)}`)}function lt(r){const t=ke(r),e=typeof r;return new Ce({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${ke(n)}`}})}function oc(){return fn("never",()=>!1)}function q(r){return new Ce({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function A(){return fn("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${ke(r)}`)}function W(r){return new Ce({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function Lo(r,t){return new Ce({type:"record",schema:null,*entries(e){if(Hn(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return fr(e)||`Expected an object, but received: ${ke(e)}`},coercer(e){return fr(e)?{...e}:e}})}function C(){return fn("string",r=>typeof r=="string"||`Expected a string, but received: ${ke(r)}`)}function Oi(r){const t=oc();return new Ce({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${ke(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function O(r){const t=Object.keys(r);return new Ce({type:"type",schema:r,*entries(e){if(Hn(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return fr(e)||`Expected an object, but received: ${ke(e)}`},coercer(e){return fr(e)?{...e}:e}})}function pe(r){const t=r.map(e=>e.type).join(" | ");return new Ce({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,c]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return c}return e},validator(e,n){const s=[];for(const i of r){const[...c]=Li(e,i,n),[d]=c;if(d[0])for(const[l]of c)l&&s.push(l);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ke(e)}`,...s]}})}function _n(){return fn("unknown",()=>!0)}function Zn(r,t,e){return new Ce({...r,coercer:(n,s)=>Ro(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var Jn,ac=new Uint8Array(16);function Uo(){if(!Jn&&(Jn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Jn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jn(ac)}const uc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function mr(r){return typeof r=="string"&&uc.test(r)}var Qt=[];for(var Jr=0;Jr<256;++Jr)Qt.push((Jr+256).toString(16).substr(1));function wr(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Qt[r[t+0]]+Qt[r[t+1]]+Qt[r[t+2]]+Qt[r[t+3]]+"-"+Qt[r[t+4]]+Qt[r[t+5]]+"-"+Qt[r[t+6]]+Qt[r[t+7]]+"-"+Qt[r[t+8]]+Qt[r[t+9]]+"-"+Qt[r[t+10]]+Qt[r[t+11]]+Qt[r[t+12]]+Qt[r[t+13]]+Qt[r[t+14]]+Qt[r[t+15]]).toLowerCase();if(!mr(e))throw TypeError("Stringified UUID is invalid");return e}var vs,Qr,ti=0,ei=0;function cc(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||vs,c=r.clockseq!==void 0?r.clockseq:Qr;if(i==null||c==null){var d=r.random||(r.rng||Uo)();i==null&&(i=vs=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),c==null&&(c=Qr=(d[6]<<8|d[7])&16383)}var l=r.msecs!==void 0?r.msecs:Date.now(),b=r.nsecs!==void 0?r.nsecs:ei+1,S=l-ti+(b-ei)/1e4;if(S<0&&r.clockseq===void 0&&(c=c+1&16383),(S<0||l>ti)&&r.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ti=l,ei=b,Qr=c,l+=122192928e5;var B=((l&268435455)*1e4+b)%4294967296;s[n++]=B>>>24&255,s[n++]=B>>>16&255,s[n++]=B>>>8&255,s[n++]=B&255;var x=l/4294967296*1e4&268435455;s[n++]=x>>>8&255,s[n++]=x&255,s[n++]=x>>>24&15|16,s[n++]=x>>>16&255,s[n++]=c>>>8|128,s[n++]=c&255;for(var E=0;E<6;++E)s[n+E]=i[E];return t||wr(s)}function Oo(r){if(!mr(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function fc(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var lc="6ba7b810-9dad-11d1-80b4-00c04fd430c8",hc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function To(r,t,e){function n(s,i,c,d){if(typeof s=="string"&&(s=fc(s)),typeof i=="string"&&(i=Oo(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+s.length);if(l.set(i),l.set(s,i.length),l=e(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,c){d=d||0;for(var b=0;b<16;++b)c[d+b]=l[b];return c}return wr(l)}try{n.name=r}catch{}return n.DNS=lc,n.URL=hc,n}function dc(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return pc(gc(yc(r),r.length*8))}function pc(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,c=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(c)}return t}function Co(r){return(r+64>>>9<<4)+14+1}function gc(r,t){r[t>>5]|=128<<t%32,r[Co(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,c=0;c<r.length;c+=16){var d=e,l=n,b=s,S=i;e=se(e,n,s,i,r[c],7,-680876936),i=se(i,e,n,s,r[c+1],12,-389564586),s=se(s,i,e,n,r[c+2],17,606105819),n=se(n,s,i,e,r[c+3],22,-1044525330),e=se(e,n,s,i,r[c+4],7,-176418897),i=se(i,e,n,s,r[c+5],12,1200080426),s=se(s,i,e,n,r[c+6],17,-1473231341),n=se(n,s,i,e,r[c+7],22,-45705983),e=se(e,n,s,i,r[c+8],7,1770035416),i=se(i,e,n,s,r[c+9],12,-1958414417),s=se(s,i,e,n,r[c+10],17,-42063),n=se(n,s,i,e,r[c+11],22,-1990404162),e=se(e,n,s,i,r[c+12],7,1804603682),i=se(i,e,n,s,r[c+13],12,-40341101),s=se(s,i,e,n,r[c+14],17,-1502002290),n=se(n,s,i,e,r[c+15],22,1236535329),e=oe(e,n,s,i,r[c+1],5,-165796510),i=oe(i,e,n,s,r[c+6],9,-1069501632),s=oe(s,i,e,n,r[c+11],14,643717713),n=oe(n,s,i,e,r[c],20,-373897302),e=oe(e,n,s,i,r[c+5],5,-701558691),i=oe(i,e,n,s,r[c+10],9,38016083),s=oe(s,i,e,n,r[c+15],14,-660478335),n=oe(n,s,i,e,r[c+4],20,-405537848),e=oe(e,n,s,i,r[c+9],5,568446438),i=oe(i,e,n,s,r[c+14],9,-1019803690),s=oe(s,i,e,n,r[c+3],14,-187363961),n=oe(n,s,i,e,r[c+8],20,1163531501),e=oe(e,n,s,i,r[c+13],5,-1444681467),i=oe(i,e,n,s,r[c+2],9,-51403784),s=oe(s,i,e,n,r[c+7],14,1735328473),n=oe(n,s,i,e,r[c+12],20,-1926607734),e=ae(e,n,s,i,r[c+5],4,-378558),i=ae(i,e,n,s,r[c+8],11,-2022574463),s=ae(s,i,e,n,r[c+11],16,1839030562),n=ae(n,s,i,e,r[c+14],23,-35309556),e=ae(e,n,s,i,r[c+1],4,-1530992060),i=ae(i,e,n,s,r[c+4],11,1272893353),s=ae(s,i,e,n,r[c+7],16,-155497632),n=ae(n,s,i,e,r[c+10],23,-1094730640),e=ae(e,n,s,i,r[c+13],4,681279174),i=ae(i,e,n,s,r[c],11,-358537222),s=ae(s,i,e,n,r[c+3],16,-722521979),n=ae(n,s,i,e,r[c+6],23,76029189),e=ae(e,n,s,i,r[c+9],4,-640364487),i=ae(i,e,n,s,r[c+12],11,-421815835),s=ae(s,i,e,n,r[c+15],16,530742520),n=ae(n,s,i,e,r[c+2],23,-995338651),e=ue(e,n,s,i,r[c],6,-198630844),i=ue(i,e,n,s,r[c+7],10,1126891415),s=ue(s,i,e,n,r[c+14],15,-1416354905),n=ue(n,s,i,e,r[c+5],21,-57434055),e=ue(e,n,s,i,r[c+12],6,1700485571),i=ue(i,e,n,s,r[c+3],10,-1894986606),s=ue(s,i,e,n,r[c+10],15,-1051523),n=ue(n,s,i,e,r[c+1],21,-2054922799),e=ue(e,n,s,i,r[c+8],6,1873313359),i=ue(i,e,n,s,r[c+15],10,-30611744),s=ue(s,i,e,n,r[c+6],15,-1560198380),n=ue(n,s,i,e,r[c+13],21,1309151649),e=ue(e,n,s,i,r[c+4],6,-145523070),i=ue(i,e,n,s,r[c+11],10,-1120210379),s=ue(s,i,e,n,r[c+2],15,718787259),n=ue(n,s,i,e,r[c+9],21,-343485551),e=Ge(e,d),n=Ge(n,l),s=Ge(s,b),i=Ge(i,S)}return[e,n,s,i]}function yc(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Co(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function Ge(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function mc(r,t){return r<<t|r>>>32-t}function br(r,t,e,n,s,i){return Ge(mc(Ge(Ge(t,r),Ge(n,i)),s),e)}function se(r,t,e,n,s,i,c){return br(t&e|~t&n,r,t,s,i,c)}function oe(r,t,e,n,s,i,c){return br(t&n|e&~n,r,t,s,i,c)}function ae(r,t,e,n,s,i,c){return br(t^e^n,r,t,s,i,c)}function ue(r,t,e,n,s,i,c){return br(e^(t|~n),r,t,s,i,c)}var wc=To("v3",48,dc);function bc(r,t,e){r=r||{};var n=r.random||(r.rng||Uo)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return wr(n)}function vc(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function ni(r,t){return r<<t|r>>>32-t}function xc(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,c=Math.ceil(i/16),d=new Array(c),l=0;l<c;++l){for(var b=new Uint32Array(16),S=0;S<16;++S)b[S]=r[l*64+S*4]<<24|r[l*64+S*4+1]<<16|r[l*64+S*4+2]<<8|r[l*64+S*4+3];d[l]=b}d[c-1][14]=(r.length-1)*8/Math.pow(2,32),d[c-1][14]=Math.floor(d[c-1][14]),d[c-1][15]=(r.length-1)*8&4294967295;for(var B=0;B<c;++B){for(var x=new Uint32Array(80),E=0;E<16;++E)x[E]=d[B][E];for(var M=16;M<80;++M)x[M]=ni(x[M-3]^x[M-8]^x[M-14]^x[M-16],1);for(var k=e[0],R=e[1],_=e[2],T=e[3],L=e[4],z=0;z<80;++z){var Z=Math.floor(z/20),G=ni(k,5)+vc(Z,R,_,T)+L+t[Z]+x[z]>>>0;L=T,T=_,_=ni(R,30)>>>0,R=k,k=G}e[0]=e[0]+k>>>0,e[1]=e[1]+R>>>0,e[2]=e[2]+_>>>0,e[3]=e[3]+T>>>0,e[4]=e[4]+L>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Ec=To("v5",80,xc);const Sc="00000000-0000-0000-0000-000000000000";function Bc(r){if(!mr(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const Mc=Object.freeze(Object.defineProperty({__proto__:null,NIL:Sc,parse:Oo,stringify:wr,v1:cc,v3:wc,v4:bc,v5:Ec,validate:mr,version:Bc},Symbol.toStringTag,{value:"Module"})),No=pi(Mc),Ac=No.v4,Ic=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:r};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const c=typeof n.generator=="function"?n.generator:function(){return Ac()};i.id=c(i,n)}else s===2&&e===null?n.notificationIdNull&&(i.id=null):i.id=e;return i};var kc=Ic;const _c=No.v4,Rc=kc,lr=function(r,t){if(!(this instanceof lr))return new lr(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return _c()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};lr.prototype.request=function(r,t,e,n){const s=this;let i=null;const c=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&c)throw new TypeError("JSON-RPC 1.0 does not support batching");if(c||!c&&r&&typeof r=="object"&&typeof t=="function")n=t,i=r;else{typeof e=="function"&&(n=e,e=void 0);const b=typeof n=="function";try{i=Rc(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(b)return n(S);throw S}if(!b)return i}let l;try{l=JSON.stringify(i,this.options.replacer)}catch(b){return n(b)}return this.callServer(l,function(b,S){s._parseResponse(b,S,n)}),i};lr.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(n)){const s=function(c){return typeof c.error<"u"},i=function(c){return!s(c)};return e(null,n.filter(s),n.filter(i))}else return e(null,n.error,n.result);e(null,n)};var Lc={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(l,b,S){this.fn=l,this.context=b,this.once=S||!1}function i(l,b,S,B,x){if(typeof S!="function")throw new TypeError("The listener must be a function");var E=new s(S,B||l,x),M=e?e+b:b;return l._events[M]?l._events[M].fn?l._events[M]=[l._events[M],E]:l._events[M].push(E):(l._events[M]=E,l._eventsCount++),l}function c(l,b){--l._eventsCount===0?l._events=new n:delete l._events[b]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var b=[],S,B;if(this._eventsCount===0)return b;for(B in S=this._events)t.call(S,B)&&b.push(e?B.slice(1):B);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(S)):b},d.prototype.listeners=function(b){var S=e?e+b:b,B=this._events[S];if(!B)return[];if(B.fn)return[B.fn];for(var x=0,E=B.length,M=new Array(E);x<E;x++)M[x]=B[x].fn;return M},d.prototype.listenerCount=function(b){var S=e?e+b:b,B=this._events[S];return B?B.fn?1:B.length:0},d.prototype.emit=function(b,S,B,x,E,M){var k=e?e+b:b;if(!this._events[k])return!1;var R=this._events[k],_=arguments.length,T,L;if(R.fn){switch(R.once&&this.removeListener(b,R.fn,void 0,!0),_){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,S),!0;case 3:return R.fn.call(R.context,S,B),!0;case 4:return R.fn.call(R.context,S,B,x),!0;case 5:return R.fn.call(R.context,S,B,x,E),!0;case 6:return R.fn.call(R.context,S,B,x,E,M),!0}for(L=1,T=new Array(_-1);L<_;L++)T[L-1]=arguments[L];R.fn.apply(R.context,T)}else{var z=R.length,Z;for(L=0;L<z;L++)switch(R[L].once&&this.removeListener(b,R[L].fn,void 0,!0),_){case 1:R[L].fn.call(R[L].context);break;case 2:R[L].fn.call(R[L].context,S);break;case 3:R[L].fn.call(R[L].context,S,B);break;case 4:R[L].fn.call(R[L].context,S,B,x);break;default:if(!T)for(Z=1,T=new Array(_-1);Z<_;Z++)T[Z-1]=arguments[Z];R[L].fn.apply(R[L].context,T)}}return!0},d.prototype.on=function(b,S,B){return i(this,b,S,B,!1)},d.prototype.once=function(b,S,B){return i(this,b,S,B,!0)},d.prototype.removeListener=function(b,S,B,x){var E=e?e+b:b;if(!this._events[E])return this;if(!S)return c(this,E),this;var M=this._events[E];if(M.fn)M.fn===S&&(!x||M.once)&&(!B||M.context===B)&&c(this,E);else{for(var k=0,R=[],_=M.length;k<_;k++)(M[k].fn!==S||x&&!M[k].once||B&&M[k].context!==B)&&R.push(M[k]);R.length?this._events[E]=R.length===1?R[0]:R:c(this,E)}return this},d.prototype.removeAllListeners=function(b){var S;return b?(S=e?e+b:b,this._events[S]&&c(this,S)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=e,d.EventEmitter=d,r.exports=d})(Lc);class Ko extends _s{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Is(t);const n=gi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let c=0;c<i.length;c++)i[c]^=54;this.iHash.update(i),this.oHash=t.create();for(let c=0;c<i.length;c++)i[c]^=106;this.oHash.update(i),En(i)}update(t){return er(this),this.iHash.update(t),this}digestInto(t){er(this),an(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:c,outputLen:d}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=c,t.outputLen=d,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zo=(r,t,e)=>new Ko(r,t).update(e).digest();zo.create=(r,t)=>new Ko(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xs=(r,t)=>(r+(r>=0?t:-t)/Fo)/t;function Uc(r,t,e){const[[n,s],[i,c]]=t,d=xs(c*r,e),l=xs(-s*r,e);let b=r-d*n-l*i,S=-d*s-l*c;const B=b<qe,x=S<qe;B&&(b=-b),x&&(S=-S);const E=qn(Math.ceil(Ns(e)/2))+xn;if(b<qe||b>=E||S<qe||S>=E)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:B,k1:b,k2neg:x,k2:S}}function ci(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function ri(r,t){const e={};for(let n of Object.keys(t))e[n]=r[n]===void 0?t[n]:r[n];return on(e.lowS,"lowS"),on(e.prehash,"prehash"),e.format!==void 0&&ci(e.format),e}class Oc extends Error{constructor(t=""){super(t)}}const ze={Err:Oc,_tlv:{encode:(r,t)=>{const{Err:e}=ze;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,s=Yn(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=n>127?Yn(s.length/2|128):"";return Yn(r)+i+s+t},decode(r,t){const{Err:e}=ze;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let c=0;if(!i)c=s;else{const l=s&127;if(!l)throw new e("tlv.decode(long): indefinite length not supported");if(l>4)throw new e("tlv.decode(long): byte length is too big");const b=t.subarray(n,n+l);if(b.length!==l)throw new e("tlv.decode: length bytes not complete");if(b[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const S of b)c=c<<8|S;if(n+=l,c<128)throw new e("tlv.decode(long): not minimal encoding")}const d=t.subarray(n,n+c);if(d.length!==c)throw new e("tlv.decode: wrong value length");return{v:d,l:t.subarray(n+c)}}},_int:{encode(r){const{Err:t}=ze;if(r<qe)throw new t("integer: negative integers are not allowed");let e=Yn(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=ze;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return dr(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=ze,s=dt("signature",r),{v:i,l:c}=n.decode(48,s);if(c.length)throw new t("invalid signature: left bytes after parsing");const{v:d,l}=n.decode(2,i),{v:b,l:S}=n.decode(2,l);if(S.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(d),s:e.decode(b)}},hexFromSig(r){const{_tlv:t,_int:e}=ze,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}},qe=BigInt(0),xn=BigInt(1),Fo=BigInt(2),Qn=BigInt(3),Tc=BigInt(4);function wn(r,t){const{BYTES:e}=r;let n;if(typeof t=="bigint")n=t;else{let s=dt("private key",t);try{n=r.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function Cc(r,t={}){const e=Js("weierstrass",r,t),{Fp:n,Fn:s}=e;let i=e.CURVE;const{h:c,n:d}=i;Pn(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=t;if(l&&(!n.is0(i.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const b=qo(n,s);function S(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function B(V,h,o){const{x:a,y:f}=h.toAffine(),p=n.toBytes(a);if(on(o,"isCompressed"),o){S();const y=!n.isOdd(f);return Le(Do(y),p)}else return Le(Uint8Array.of(4),p,n.toBytes(f))}function x(V){Me(V,void 0,"Point");const{publicKey:h,publicKeyUncompressed:o}=b,a=V.length,f=V[0],p=V.subarray(1);if(a===h&&(f===2||f===3)){const y=n.fromBytes(p);if(!n.isValid(y))throw new Error("bad point: is not on curve, wrong x");const w=k(y);let v;try{v=n.sqrt(w)}catch(m){const K=m instanceof Error?": "+m.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}S();const g=n.isOdd(v);return(f&1)===1!==g&&(v=n.neg(v)),{x:y,y:v}}else if(a===o&&f===4){const y=n.BYTES,w=n.fromBytes(p.subarray(0,y)),v=n.fromBytes(p.subarray(y,y*2));if(!R(w,v))throw new Error("bad point: is not on curve");return{x:w,y:v}}else throw new Error(`bad point: got length ${a}, expected compressed=${h} or uncompressed=${o}`)}const E=t.toBytes||B,M=t.fromBytes||x;function k(V){const h=n.sqr(V),o=n.mul(h,V);return n.add(n.add(o,n.mul(V,i.a)),i.b)}function R(V,h){const o=n.sqr(h),a=k(V);return n.eql(o,a)}if(!R(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const _=n.mul(n.pow(i.a,Qn),Tc),T=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(_,T)))throw new Error("bad curve params: a or b");function L(V,h,o=!1){if(!n.isValid(h)||o&&n.is0(h))throw new Error(`bad point coordinate ${V}`);return h}function z(V){if(!(V instanceof U))throw new Error("ProjectivePoint expected")}function Z(V){if(!l||!l.basises)throw new Error("no endo");return Uc(V,l.basises,s.ORDER)}const G=rr((V,h)=>{const{X:o,Y:a,Z:f}=V;if(n.eql(f,n.ONE))return{x:o,y:a};const p=V.is0();h==null&&(h=p?n.ONE:n.inv(f));const y=n.mul(o,h),w=n.mul(a,h),v=n.mul(f,h);if(p)return{x:n.ZERO,y:n.ZERO};if(!n.eql(v,n.ONE))throw new Error("invZ was invalid");return{x:y,y:w}}),J=rr(V=>{if(V.is0()){if(t.allowInfinityPoint&&!n.is0(V.Y))return;throw new Error("bad point: ZERO")}const{x:h,y:o}=V.toAffine();if(!n.isValid(h)||!n.isValid(o))throw new Error("bad point: x or y not field elements");if(!R(h,o))throw new Error("bad point: equation left != right");if(!V.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function Y(V,h,o,a,f){return o=new U(n.mul(o.X,V),o.Y,o.Z),h=ir(a,h),o=ir(f,o),h.add(o)}class U{constructor(h,o,a){this.X=L("x",h),this.Y=L("y",o,!0),this.Z=L("z",a),Object.freeze(this)}static CURVE(){return i}static fromAffine(h){const{x:o,y:a}=h||{};if(!h||!n.isValid(o)||!n.isValid(a))throw new Error("invalid affine point");if(h instanceof U)throw new Error("projective point not allowed");return n.is0(o)&&n.is0(a)?U.ZERO:new U(o,a,n.ONE)}static fromBytes(h){const o=U.fromAffine(M(Me(h,void 0,"point")));return o.assertValidity(),o}static fromHex(h){return U.fromBytes(dt("pointHex",h))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(h=8,o=!0){return F.createCache(this,h),o||this.multiply(Qn),this}assertValidity(){J(this)}hasEvenY(){const{y:h}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(h)}equals(h){z(h);const{X:o,Y:a,Z:f}=this,{X:p,Y:y,Z:w}=h,v=n.eql(n.mul(o,w),n.mul(p,f)),g=n.eql(n.mul(a,w),n.mul(y,f));return v&&g}negate(){return new U(this.X,n.neg(this.Y),this.Z)}double(){const{a:h,b:o}=i,a=n.mul(o,Qn),{X:f,Y:p,Z:y}=this;let w=n.ZERO,v=n.ZERO,g=n.ZERO,u=n.mul(f,f),m=n.mul(p,p),K=n.mul(y,y),N=n.mul(f,p);return N=n.add(N,N),g=n.mul(f,y),g=n.add(g,g),w=n.mul(h,g),v=n.mul(a,K),v=n.add(w,v),w=n.sub(m,v),v=n.add(m,v),v=n.mul(w,v),w=n.mul(N,w),g=n.mul(a,g),K=n.mul(h,K),N=n.sub(u,K),N=n.mul(h,N),N=n.add(N,g),g=n.add(u,u),u=n.add(g,u),u=n.add(u,K),u=n.mul(u,N),v=n.add(v,u),K=n.mul(p,y),K=n.add(K,K),u=n.mul(K,N),w=n.sub(w,u),g=n.mul(K,m),g=n.add(g,g),g=n.add(g,g),new U(w,v,g)}add(h){z(h);const{X:o,Y:a,Z:f}=this,{X:p,Y:y,Z:w}=h;let v=n.ZERO,g=n.ZERO,u=n.ZERO;const m=i.a,K=n.mul(i.b,Qn);let N=n.mul(o,p),P=n.mul(a,y),nt=n.mul(f,w),tt=n.add(o,a),X=n.add(p,y);tt=n.mul(tt,X),X=n.add(N,P),tt=n.sub(tt,X),X=n.add(o,f);let Xt=n.add(p,w);return X=n.mul(X,Xt),Xt=n.add(N,nt),X=n.sub(X,Xt),Xt=n.add(a,f),v=n.add(y,w),Xt=n.mul(Xt,v),v=n.add(P,nt),Xt=n.sub(Xt,v),u=n.mul(m,X),v=n.mul(K,nt),u=n.add(v,u),v=n.sub(P,u),u=n.add(P,u),g=n.mul(v,u),P=n.add(N,N),P=n.add(P,N),nt=n.mul(m,nt),X=n.mul(K,X),P=n.add(P,nt),nt=n.sub(N,nt),nt=n.mul(m,nt),X=n.add(X,nt),N=n.mul(P,X),g=n.add(g,N),N=n.mul(Xt,X),v=n.mul(tt,v),v=n.sub(v,N),N=n.mul(tt,P),u=n.mul(Xt,u),u=n.add(u,N),new U(v,g,u)}subtract(h){return this.add(h.negate())}is0(){return this.equals(U.ZERO)}multiply(h){const{endo:o}=t;if(!s.isValidNot0(h))throw new Error("invalid scalar: out of range");let a,f;const p=y=>F.cached(this,y,w=>en(U,w));if(o){const{k1neg:y,k1:w,k2neg:v,k2:g}=Z(h),{p:u,f:m}=p(w),{p:K,f:N}=p(g);f=m.add(N),a=Y(o.beta,u,K,y,v)}else{const{p:y,f:w}=p(h);a=y,f=w}return en(U,[a,f])[0]}multiplyUnsafe(h){const{endo:o}=t,a=this;if(!s.isValid(h))throw new Error("invalid scalar: out of range");if(h===qe||a.is0())return U.ZERO;if(h===xn)return a;if(F.hasCache(this))return this.multiply(h);if(o){const{k1neg:f,k1:p,k2neg:y,k2:w}=Z(h),{p1:v,p2:g}=Va(U,a,p,w);return Y(o.beta,v,g,f,y)}else return F.unsafe(a,h)}multiplyAndAddUnsafe(h,o,a){const f=this.multiplyUnsafe(o).add(h.multiplyUnsafe(a));return f.is0()?void 0:f}toAffine(h){return G(this,h)}isTorsionFree(){const{isTorsionFree:h}=t;return c===xn?!0:h?h(U,this):F.unsafe(this,d).is0()}clearCofactor(){const{clearCofactor:h}=t;return c===xn?this:h?h(U,this):this.multiplyUnsafe(c)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}toBytes(h=!0){return on(h,"isCompressed"),this.assertValidity(),E(U,this,h)}toHex(h=!0){return nn(this.toBytes(h))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(h=!0){return this.toBytes(h)}_setWindowSize(h){this.precompute(h)}static normalizeZ(h){return en(U,h)}static msm(h,o){return Xs(U,s,h,o)}static fromPrivateKey(h){return U.BASE.multiply(wn(s,h))}}U.BASE=new U(i.Gx,i.Gy,n.ONE),U.ZERO=new U(n.ZERO,n.ONE,n.ZERO),U.Fp=n,U.Fn=s;const H=s.BITS,F=new Ys(U,t.endo?Math.ceil(H/2):H);return U.BASE.precompute(8),U}function Do(r){return Uint8Array.of(r?2:3)}function qo(r,t){return{secretKey:t.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Nc(r,t={}){const{Fn:e}=r,n=t.randomBytes||yi,s=Object.assign(qo(r.Fp,e),{seed:Ws(e.ORDER)});function i(E){try{return!!wn(e,E)}catch{return!1}}function c(E,M){const{publicKey:k,publicKeyUncompressed:R}=s;try{const _=E.length;return M===!0&&_!==k||M===!1&&_!==R?!1:!!r.fromBytes(E)}catch{return!1}}function d(E=n(s.seed)){return Da(Me(E,s.seed,"seed"),e.ORDER)}function l(E,M=!0){return r.BASE.multiply(wn(e,E)).toBytes(M)}function b(E){const M=d(E);return{secretKey:M,publicKey:l(M)}}function S(E){if(typeof E=="bigint")return!1;if(E instanceof r)return!0;const{secretKey:M,publicKey:k,publicKeyUncompressed:R}=s;if(e.allowedLengths||M===k)return;const _=dt("key",E).length;return _===k||_===R}function B(E,M,k=!0){if(S(E)===!0)throw new Error("first arg must be private key");if(S(M)===!1)throw new Error("second arg must be public key");const R=wn(e,E);return r.fromHex(M).multiply(R).toBytes(k)}return Object.freeze({getPublicKey:l,getSharedSecret:B,keygen:b,Point:r,utils:{isValidSecretKey:i,isValidPublicKey:c,randomSecretKey:d,isValidPrivateKey:i,randomPrivateKey:d,normPrivateKeyToScalar:E=>wn(e,E),precompute(E=8,M=r.BASE){return M.precompute(E,!1)}},lengths:s})}function Kc(r,t,e={}){Is(t),Pn(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||yi,s=e.hmac||((o,...a)=>zo(t,o,Le(...a))),{Fp:i,Fn:c}=r,{ORDER:d,BITS:l}=c,{keygen:b,getPublicKey:S,getSharedSecret:B,utils:x,lengths:E}=Nc(r,e),M={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},k="compact";function R(o){const a=d>>xn;return o>a}function _(o,a){if(!c.isValidNot0(a))throw new Error(`invalid signature ${o}: out of range 1..Point.Fn.ORDER`);return a}function T(o,a){ci(a);const f=E.signature,p=a==="compact"?f:a==="recovered"?f+1:void 0;return Me(o,p,`${a} signature`)}class L{constructor(a,f,p){this.r=_("r",a),this.s=_("s",f),p!=null&&(this.recovery=p),Object.freeze(this)}static fromBytes(a,f=k){T(a,f);let p;if(f==="der"){const{r:g,s:u}=ze.toSig(Me(a));return new L(g,u)}f==="recovered"&&(p=a[0],f="compact",a=a.subarray(1));const y=c.BYTES,w=a.subarray(0,y),v=a.subarray(y,y*2);return new L(c.fromBytes(w),c.fromBytes(v),p)}static fromHex(a,f){return this.fromBytes(nr(a),f)}addRecoveryBit(a){return new L(this.r,this.s,a)}recoverPublicKey(a){const f=i.ORDER,{r:p,s:y,recovery:w}=this;if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");if(d*Fo<f&&w>1)throw new Error("recovery id is ambiguous for h>1 curve");const g=w===2||w===3?p+d:p;if(!i.isValid(g))throw new Error("recovery id 2 or 3 invalid");const u=i.toBytes(g),m=r.fromBytes(Le(Do((w&1)===0),u)),K=c.inv(g),N=Z(dt("msgHash",a)),P=c.create(-N*K),nt=c.create(y*K),tt=r.BASE.multiplyUnsafe(P).add(m.multiplyUnsafe(nt));if(tt.is0())throw new Error("point at infinify");return tt.assertValidity(),tt}hasHighS(){return R(this.s)}toBytes(a=k){if(ci(a),a==="der")return nr(ze.hexFromSig(this));const f=c.toBytes(this.r),p=c.toBytes(this.s);if(a==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Le(Uint8Array.of(this.recovery),f,p)}return Le(f,p)}toHex(a){return nn(this.toBytes(a))}assertValidity(){}static fromCompact(a){return L.fromBytes(dt("sig",a),"compact")}static fromDER(a){return L.fromBytes(dt("sig",a),"der")}normalizeS(){return this.hasHighS()?new L(this.r,c.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return nn(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return nn(this.toBytes("compact"))}}const z=e.bits2int||function(a){if(a.length>8192)throw new Error("input is too large");const f=dr(a),p=a.length*8-l;return p>0?f>>BigInt(p):f},Z=e.bits2int_modN||function(a){return c.create(z(a))},G=qn(l);function J(o){return oi("num < 2^"+l,o,qe,G),c.toBytes(o)}function Y(o,a){return Me(o,void 0,"message"),a?Me(t(o),void 0,"prehashed message"):o}function U(o,a,f){if(["recovered","canonical"].some(P=>P in f))throw new Error("sign() legacy options not supported");const{lowS:p,prehash:y,extraEntropy:w}=ri(f,M);o=Y(o,y);const v=Z(o),g=wn(c,a),u=[J(g),J(v)];if(w!=null&&w!==!1){const P=w===!0?n(E.secretKey):w;u.push(dt("extraEntropy",P))}const m=Le(...u),K=v;function N(P){const nt=z(P);if(!c.isValidNot0(nt))return;const tt=c.inv(nt),X=r.BASE.multiply(nt).toAffine(),Xt=c.create(X.x);if(Xt===qe)return;const ut=c.create(tt*c.create(K+Xt*g));if(ut===qe)return;let ft=(X.x===Xt?0:2)|Number(X.y&xn),Ln=ut;return p&&R(ut)&&(Ln=c.neg(ut),ft^=1),new L(Xt,Ln,ft)}return{seed:m,k2sig:N}}function H(o,a,f={}){o=dt("message",o);const{seed:p,k2sig:y}=U(o,a,f);return Ra(t.outputLen,c.BYTES,s)(p,y)}function F(o){let a;const f=typeof o=="string"||Dn(o),p=!f&&o!==null&&typeof o=="object"&&typeof o.r=="bigint"&&typeof o.s=="bigint";if(!f&&!p)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(p)a=new L(o.r,o.s);else if(f){try{a=L.fromBytes(dt("sig",o),"der")}catch(y){if(!(y instanceof ze.Err))throw y}if(!a)try{a=L.fromBytes(dt("sig",o),"compact")}catch{return!1}}return a||!1}function V(o,a,f,p={}){const{lowS:y,prehash:w,format:v}=ri(p,M);if(f=dt("publicKey",f),a=Y(dt("message",a),w),"strict"in p)throw new Error("options.strict was renamed to lowS");const g=v===void 0?F(o):L.fromBytes(dt("sig",o),v);if(g===!1)return!1;try{const u=r.fromBytes(f);if(y&&g.hasHighS())return!1;const{r:m,s:K}=g,N=Z(a),P=c.inv(K),nt=c.create(N*P),tt=c.create(m*P),X=r.BASE.multiplyUnsafe(nt).add(u.multiplyUnsafe(tt));return X.is0()?!1:c.create(X.x)===m}catch{return!1}}function h(o,a,f={}){const{prehash:p}=ri(f,M);return a=Y(a,p),L.fromBytes(o,"recovered").recoverPublicKey(a).toBytes()}return Object.freeze({keygen:b,getPublicKey:S,getSharedSecret:B,utils:x,lengths:E,Point:r,sign:H,verify:V,recoverPublicKey:h,Signature:L,hash:t})}function zc(r){const t={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(c=>Math.ceil(c/2)))):void 0;const s=un(t.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:t,curveOpts:i}}function Fc(r){const{CURVE:t,curveOpts:e}=zc(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:t,curveOpts:e,hash:r.hash,ecdsaOpts:n}}function Dc(r,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},r,$s(e.Fn.ORDER,e.Fn.BITS))})}function qc(r){const{CURVE:t,curveOpts:e,hash:n,ecdsaOpts:s}=Fc(r),i=Cc(t,e),c=Kc(i,n,s);return Dc(r,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Pc(r,t){const e=n=>qc({...r,hash:n});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ti={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Vc={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Es=BigInt(2);function Hc(r){const t=Ti.p,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),c=BigInt(23),d=BigInt(44),l=BigInt(88),b=r*r*r%t,S=b*b*r%t,B=ht(S,e,t)*S%t,x=ht(B,e,t)*S%t,E=ht(x,Es,t)*b%t,M=ht(E,s,t)*E%t,k=ht(M,i,t)*M%t,R=ht(k,d,t)*k%t,_=ht(R,l,t)*R%t,T=ht(_,d,t)*k%t,L=ht(T,e,t)*S%t,z=ht(L,c,t)*M%t,Z=ht(z,n,t)*b%t,G=ht(Z,Es,t);if(!fi.eql(fi.sqr(G),r))throw new Error("Cannot find square root");return G}const fi=un(Ti.p,{sqrt:Hc}),$c=Pc({...Ti,Fp:fi,lowS:!0,endo:Vc},Os);Vn.utils.randomPrivateKey;Vn.getPublicKey;function Ss(r){try{return Vn.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Po=(r,t)=>Vn.sign(r,t.slice(0,32)),Zc=Vn.verify,fe=r=>et.Buffer.isBuffer(r)?r:r instanceof Uint8Array?et.Buffer.from(r.buffer,r.byteOffset,r.byteLength):et.Buffer.from(r);class Vo{constructor(t){Object.assign(this,t)}encode(){return et.Buffer.from(uo(On,this))}static decode(t){return co(On,this,t)}static decodeUnchecked(t){return ro(On,this,t)}}const On=new Map;var Ho;const $o=32,Pe=32;function Wc(r){return r._bn!==void 0}let Bs=1;class Q extends Vo{constructor(t){if(super({}),this._bn=void 0,Wc(t))this._bn=t._bn;else{if(typeof t=="string"){const e=le.decode(t);if(e.length!=Pe)throw new Error("Invalid public key input");this._bn=new ms(e)}else this._bn=new ms(t);if(this._bn.byteLength()>Pe)throw new Error("Invalid public key input")}}static unique(){const t=new Q(Bs);return Bs+=1,new Q(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return le.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(et.Buffer);if(t.length===Pe)return t;const e=et.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=et.Buffer.concat([t.toBuffer(),et.Buffer.from(e),n.toBuffer()]),i=ws(s);return new Q(i)}static createProgramAddressSync(t,e){let n=et.Buffer.alloc(0);t.forEach(function(i){if(i.length>$o)throw new TypeError("Max seed length exceeded");n=et.Buffer.concat([n,fe(i)])}),n=et.Buffer.concat([n,e.toBuffer(),et.Buffer.from("ProgramDerivedAddress")]);const s=ws(n);if(Ss(s))throw new Error("Invalid seeds, address must fall off the curve");return new Q(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(et.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new Q(t);return Ss(e.toBytes())}}Ho=Q;Q.default=new Ho("11111111111111111111111111111111");On.set(Q,{kind:"struct",fields:[["_bn","u256"]]});new Q("BPFLoader1111111111111111111111111111111111");const sn=1232,vr=127,Nn=64;class Kn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,c)=>{n.set(i.toBase58(),c)});const s=i=>{const c=n.get(i.toBase58());if(c===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return c};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(c=>s(c.pubkey)),data:i.data}))}}const rt=(r="publicKey")=>ct(32,r),jc=(r="signature")=>ct(64,r),bn=(r="string")=>{const t=$([j("length"),j("lengthPadding"),ct(rn(j(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,c)=>e(i,c).chars.toString(),s.encode=(i,c,d)=>{const l={chars:et.Buffer.from(i,"utf8")};return n(l,c,d)},s.alloc=i=>j().span+j().span+et.Buffer.from(i,"utf8").length,s},Gc=(r="authorized")=>$([rt("staker"),rt("withdrawer")],r),Yc=(r="lockup")=>$([we("unixTimestamp"),we("epoch"),rt("custodian")],r),Xc=(r="voteInit")=>$([rt("nodePubkey"),rt("authorizedVoter"),rt("authorizedWithdrawer"),st("commission")],r),Jc=(r="voteAuthorizeWithSeedArgs")=>$([j("voteAuthorizationType"),rt("currentAuthorityDerivedKeyOwnerPubkey"),bn("currentAuthorityDerivedKeySeed"),rt("newAuthorized")],r);function Zo(r,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Zo({layout:s},t[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=e(s)}),n}function be(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function ve(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function gt(r,t){if(!r)throw new Error(t||"Assertion failed")}class xr{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=c=>{const d=c.toBase58();let l=n.get(d);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(d,l)),l},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const c of t){s(c.programId).isInvoked=!0;for(const d of c.keys){const l=s(d.pubkey);l.isSigner||(l.isSigner=d.isSigner),l.isWritable||(l.isWritable=d.isWritable)}}return new xr(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];gt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,l])=>l.isSigner&&l.isWritable),n=t.filter(([,l])=>l.isSigner&&!l.isWritable),s=t.filter(([,l])=>!l.isSigner&&l.isWritable),i=t.filter(([,l])=>!l.isSigner&&!l.isWritable),c={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{gt(e.length>0,"Expected at least one writable signer key");const[l]=e[0];gt(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const d=[...e.map(([l])=>new Q(l)),...n.map(([l])=>new Q(l)),...s.map(([l])=>new Q(l)),...i.map(([l])=>new Q(l))];return[c,d]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,c=>!c.isSigner&&!c.isInvoked&&c.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,c=>!c.isSigner&&!c.isInvoked&&!c.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,c]of this.keyMetaMap.entries())if(e(c)){const d=new Q(i),l=t.findIndex(b=>b.equals(d));l>=0&&(gt(l<256,"Max lookup table index exceeded"),n.push(l),s.push(d),this.keyMetaMap.delete(i))}return[n,s]}}const Wo="Reached end of buffer unexpectedly";function De(r){if(r.length===0)throw new Error(Wo);return r.shift()}function xe(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(Wo);return r.splice(...t)}class Ye{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new Q(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:le.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Kn(this.staticAccountKeys)}static compile(t){const e=xr.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),c=new Kn(s).compileInstructions(t.instructions).map(d=>({programIdIndex:d.programIdIndex,accounts:d.accountKeyIndexes,data:le.encode(d.data)}));return new Ye({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:c})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ve(e,t);const n=this.instructions.map(B=>{const{accounts:x,programIdIndex:E}=B,M=Array.from(le.decode(B.data));let k=[];ve(k,x.length);let R=[];return ve(R,M.length),{programIdIndex:E,keyIndicesCount:et.Buffer.from(k),keyIndices:x,dataLength:et.Buffer.from(R),data:M}});let s=[];ve(s,n.length);let i=et.Buffer.alloc(sn);et.Buffer.from(s).copy(i);let c=s.length;n.forEach(B=>{const E=$([st("programIdIndex"),ct(B.keyIndicesCount.length,"keyIndicesCount"),de(st("keyIndex"),B.keyIndices.length,"keyIndices"),ct(B.dataLength.length,"dataLength"),de(st("userdatum"),B.data.length,"data")]).encode(B,i,c);c+=E}),i=i.slice(0,c);const d=$([ct(1,"numRequiredSignatures"),ct(1,"numReadonlySignedAccounts"),ct(1,"numReadonlyUnsignedAccounts"),ct(e.length,"keyCount"),de(rt("key"),t,"keys"),rt("recentBlockhash")]),l={numRequiredSignatures:et.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:et.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:et.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:et.Buffer.from(e),keys:this.accountKeys.map(B=>fe(B.toBytes())),recentBlockhash:le.decode(this.recentBlockhash)};let b=et.Buffer.alloc(2048);const S=d.encode(l,b);return i.copy(b,S),b.slice(0,S+i.length)}static from(t){let e=[...t];const n=De(e);if(n!==(n&vr))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=De(e),i=De(e),c=be(e);let d=[];for(let x=0;x<c;x++){const E=xe(e,0,Pe);d.push(new Q(et.Buffer.from(E)))}const l=xe(e,0,Pe),b=be(e);let S=[];for(let x=0;x<b;x++){const E=De(e),M=be(e),k=xe(e,0,M),R=be(e),_=xe(e,0,R),T=le.encode(et.Buffer.from(_));S.push({programIdIndex:E,accounts:k,data:T})}const B={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:le.encode(et.Buffer.from(l)),accountKeys:d,instructions:S};return new Ye(B)}}class Mn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Kn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((c,d)=>c+d.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,c=n-e-this.header.numReadonlyUnsignedAccounts;return s<c}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=xr.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const S of i){const B=e.extractTableLookup(S);if(B!==void 0){const[x,{writable:E,readonly:M}]=B;n.push(x),s.writable.push(...E),s.readonly.push(...M)}}const[c,d]=e.getMessageComponents(),b=new Kn(d,s).compileInstructions(t.instructions);return new Mn({header:c,staticAccountKeys:d,recentBlockhash:t.recentBlockhash,compiledInstructions:b,addressTableLookups:n})}serialize(){const t=Array();ve(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();ve(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();ve(i,this.addressTableLookups.length);const c=$([st("prefix"),$([st("numRequiredSignatures"),st("numReadonlySignedAccounts"),st("numReadonlyUnsignedAccounts")],"header"),ct(t.length,"staticAccountKeysLength"),de(rt(),this.staticAccountKeys.length,"staticAccountKeys"),rt("recentBlockhash"),ct(n.length,"instructionsLength"),ct(e.length,"serializedInstructions"),ct(i.length,"addressTableLookupsLength"),ct(s.length,"serializedAddressTableLookups")]),d=new Uint8Array(sn),b=c.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(S=>S.toBytes()),recentBlockhash:le.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},d);return d.slice(0,b)}serializeInstructions(){let t=0;const e=new Uint8Array(sn);for(const n of this.compiledInstructions){const s=Array();ve(s,n.accountKeyIndexes.length);const i=Array();ve(i,n.data.length);const c=$([st("programIdIndex"),ct(s.length,"encodedAccountKeyIndexesLength"),de(st(),n.accountKeyIndexes.length,"accountKeyIndexes"),ct(i.length,"encodedDataLength"),ct(n.data.length,"data")]);t+=c.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(sn);for(const n of this.addressTableLookups){const s=Array();ve(s,n.writableIndexes.length);const i=Array();ve(i,n.readonlyIndexes.length);const c=$([rt("accountKey"),ct(s.length,"encodedWritableIndexesLength"),de(st(),n.writableIndexes.length,"writableIndexes"),ct(i.length,"encodedReadonlyIndexesLength"),de(st(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=c.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=De(e),s=n&vr;gt(n!==s,"Expected versioned message but received legacy message");const i=s;gt(i===0,`Expected versioned message with version 0 but found version ${i}`);const c={numRequiredSignatures:De(e),numReadonlySignedAccounts:De(e),numReadonlyUnsignedAccounts:De(e)},d=[],l=be(e);for(let M=0;M<l;M++)d.push(new Q(xe(e,0,Pe)));const b=le.encode(xe(e,0,Pe)),S=be(e),B=[];for(let M=0;M<S;M++){const k=De(e),R=be(e),_=xe(e,0,R),T=be(e),L=new Uint8Array(xe(e,0,T));B.push({programIdIndex:k,accountKeyIndexes:_,data:L})}const x=be(e),E=[];for(let M=0;M<x;M++){const k=new Q(xe(e,0,Pe)),R=be(e),_=xe(e,0,R),T=be(e),L=xe(e,0,T);E.push({accountKey:k,writableIndexes:_,readonlyIndexes:L})}return new Mn({header:c,staticAccountKeys:d,recentBlockhash:b,compiledInstructions:B,addressTableLookups:E})}}const Ci={deserializeMessageVersion(r){const t=r[0],e=t&vr;return e===t?"legacy":e},deserialize:r=>{const t=Ci.deserializeMessageVersion(r);if(t==="legacy")return Ye.from(r);if(t===0)return Mn.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}},Qc=et.Buffer.alloc(Nn).fill(0);class ee{constructor(t){this.keys=void 0,this.programId=void 0,this.data=et.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class zn{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new ee(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let k=0;k<e.length;k++)if(e[k].programId===void 0)throw new Error(`Transaction instruction index ${k} has undefined program id`);const s=[],i=[];e.forEach(k=>{k.keys.forEach(_=>{i.push({..._})});const R=k.programId.toString();s.includes(R)||s.push(R)}),s.forEach(k=>{i.push({pubkey:new Q(k),isSigner:!1,isWritable:!1})});const c=[];i.forEach(k=>{const R=k.pubkey.toString(),_=c.findIndex(T=>T.pubkey.toString()===R);_>-1?(c[_].isWritable=c[_].isWritable||k.isWritable,c[_].isSigner=c[_].isSigner||k.isSigner):c.push(k)}),c.sort(function(k,R){if(k.isSigner!==R.isSigner)return k.isSigner?-1:1;if(k.isWritable!==R.isWritable)return k.isWritable?-1:1;const _={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return k.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",_)});const d=c.findIndex(k=>k.pubkey.equals(n));if(d>-1){const[k]=c.splice(d,1);k.isSigner=!0,k.isWritable=!0,c.unshift(k)}else c.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const k of this.signatures){const R=c.findIndex(_=>_.pubkey.equals(k.publicKey));if(R>-1)c[R].isSigner||(c[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${k.publicKey.toString()}`)}let l=0,b=0,S=0;const B=[],x=[];c.forEach(({pubkey:k,isSigner:R,isWritable:_})=>{R?(B.push(k.toString()),l+=1,_||(b+=1)):(x.push(k.toString()),_||(S+=1))});const E=B.concat(x),M=e.map(k=>{const{data:R,programId:_}=k;return{programIdIndex:E.indexOf(_.toString()),accounts:k.keys.map(T=>E.indexOf(T.pubkey.toString())),data:le.encode(R)}});return M.forEach(k=>{gt(k.programIdIndex>=0),k.accounts.forEach(R=>gt(R>=0))}),new Ye({header:{numRequiredSignatures:l,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:S},accountKeys:E,recentBlockhash:t,instructions:M})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const c=i.publicKey.toString();e.has(c)||(e.add(c),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const c=i.publicKey.toString();e.has(c)||(e.add(c),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=Po(n,s.secretKey);this._addSignature(s.publicKey,fe(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){gt(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=et.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||(n.missing=[])).push(i):Zc(s,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let c="Signature verification failed.";throw i.invalid&&(c+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(d=>d.toBase58()).join("`, `")}\`].`),i.missing&&(c+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(d=>d.toBase58()).join("`, `")}\`].`),new Error(c)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];ve(n,e.length);const s=n.length+e.length*64+t.length,i=et.Buffer.alloc(s);return gt(e.length<256),et.Buffer.from(n).copy(i,0),e.forEach(({signature:c},d)=>{c!==null&&(gt(c.length===64,"signature has invalid length"),et.Buffer.from(c).copy(i,n.length+d*64))}),t.copy(i,n.length+e.length*64),gt(i.length<=sn,`Transaction too large: ${i.length} > ${sn}`),i}get keys(){return gt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return gt(this.instructions.length===1),this.instructions[0].programId}get data(){return gt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=be(e);let s=[];for(let i=0;i<n;i++){const c=xe(e,0,Nn);s.push(le.encode(et.Buffer.from(c)))}return zn.populate(Ye.from(e),s)}static populate(t,e=[]){const n=new zn;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const c={signature:s==le.encode(Qc)?null:le.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(c)}),t.instructions.forEach(s=>{const i=s.accounts.map(c=>{const d=t.accountKeys[c];return{pubkey:d,isSigner:n.signatures.some(l=>l.publicKey.toString()===d.toString())||t.isAccountSigner(c),isWritable:t.isAccountWritable(c)}});n.instructions.push(new ee({keys:i,programId:t.accountKeys[s.programIdIndex],data:le.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}class Ni{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:n,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:c,numReadonlySignedAccounts:d,numReadonlyUnsignedAccounts:l}=n,b=c-d;gt(b>0,"Message header is invalid");const S=t.staticAccountKeys.length-c-l;gt(S>=0,"Message header is invalid");const B=t.getAccountKeys(e),x=B.get(0);if(x===void 0)throw new Error("Failed to decompile message because no account keys were found");const E=[];for(const M of s){const k=[];for(const _ of M.accountKeyIndexes){const T=B.get(_);if(T===void 0)throw new Error(`Failed to find key for account key index ${_}`);const L=_<c;let z;L?z=_<b:_<B.staticAccountKeys.length?z=_-c<S:z=_-B.staticAccountKeys.length<B.accountKeysFromLookups.writable.length,k.push({pubkey:T,isSigner:_<n.numRequiredSignatures,isWritable:z})}const R=B.get(M.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${M.programIdIndex}`);E.push(new ee({programId:R,data:fe(M.data),keys:k}))}return new Ni({payerKey:x,instructions:E,recentBlockhash:i})}compileToLegacyMessage(){return Ye.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Mn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class Ki{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)gt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const n=[];for(let s=0;s<t.header.numRequiredSignatures;s++)n.push(new Uint8Array(Nn));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),e=Array();ve(e,this.signatures.length);const n=$([ct(e.length,"encodedSignaturesLength"),de(jc(),this.signatures.length,"signatures"),ct(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const n=[],s=be(e);for(let c=0;c<s;c++)n.push(new Uint8Array(xe(e,0,Nn)));const i=Ci.deserialize(new Uint8Array(e));return new Ki(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=n.findIndex(c=>c.equals(s.publicKey));gt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Po(e,s.secretKey)}}addSignature(t,e){gt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));gt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}new Q("SysvarC1ock11111111111111111111111111111111");new Q("SysvarEpochSchedu1e111111111111111111111111");new Q("Sysvar1nstructions1111111111111111111111111");const tr=new Q("SysvarRecentB1ockHashes11111111111111111111"),li=new Q("SysvarRent111111111111111111111111111111111");new Q("SysvarRewards111111111111111111111111111111");new Q("SysvarS1otHashes111111111111111111111111111");new Q("SysvarS1otHistory11111111111111111111111111");new Q("SysvarStakeHistory1111111111111111111111111");function ce(r,t){const e=r.layout.span>=0?r.layout.span:Zo(r,t),n=et.Buffer.alloc(e),s=Object.assign({instruction:r.index},t);return r.layout.encode(s,n),n}const jo=te("lamportsPerSignature"),tf=$([j("version"),j("state"),rt("authorizedPubkey"),rt("nonce"),$([jo],"feeCalculator")]),hi=tf.span;function An(r){const t=ct(8,r),e=t.decode.bind(t),n=t.encode.bind(t),s=t,i=Ju();return s.decode=(c,d)=>{const l=e(c,d);return i.decode(l)},s.encode=(c,d,l)=>{const b=i.encode(c);return n(b,d,l)},s}const me=Object.freeze({Create:{index:0,layout:$([j("instruction"),we("lamports"),we("space"),rt("programId")])},Assign:{index:1,layout:$([j("instruction"),rt("programId")])},Transfer:{index:2,layout:$([j("instruction"),An("lamports")])},CreateWithSeed:{index:3,layout:$([j("instruction"),rt("base"),bn("seed"),we("lamports"),we("space"),rt("programId")])},AdvanceNonceAccount:{index:4,layout:$([j("instruction")])},WithdrawNonceAccount:{index:5,layout:$([j("instruction"),we("lamports")])},InitializeNonceAccount:{index:6,layout:$([j("instruction"),rt("authorized")])},AuthorizeNonceAccount:{index:7,layout:$([j("instruction"),rt("authorized")])},Allocate:{index:8,layout:$([j("instruction"),we("space")])},AllocateWithSeed:{index:9,layout:$([j("instruction"),rt("base"),bn("seed"),we("space"),rt("programId")])},AssignWithSeed:{index:10,layout:$([j("instruction"),rt("base"),bn("seed"),rt("programId")])},TransferWithSeed:{index:11,layout:$([j("instruction"),An("lamports"),bn("seed"),rt("programId")])},UpgradeNonceAccount:{index:12,layout:$([j("instruction")])}});class Fn{constructor(){}static createAccount(t){const e=me.Create,n=ce(e,{lamports:t.lamports,space:t.space,programId:fe(t.programId.toBuffer())});return new ee({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const s=me.TransferWithSeed;e=ce(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:fe(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=me.Transfer;e=ce(s,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new ee({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const s=me.AssignWithSeed;e=ce(s,{base:fe(t.basePubkey.toBuffer()),seed:t.seed,programId:fe(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=me.Assign;e=ce(s,{programId:fe(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new ee({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=me.CreateWithSeed,n=ce(e,{base:fe(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:fe(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new ee({keys:s,programId:this.programId,data:n})}static createNonceAccount(t){const e=new zn;"basePubkey"in t&&"seed"in t?e.add(Fn.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:hi,programId:this.programId})):e.add(Fn.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:hi,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=me.InitializeNonceAccount,n=ce(e,{authorized:fe(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:tr,isSigner:!1,isWritable:!1},{pubkey:li,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new ee(s)}static nonceAdvance(t){const e=me.AdvanceNonceAccount,n=ce(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:tr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new ee(s)}static nonceWithdraw(t){const e=me.WithdrawNonceAccount,n=ce(e,{lamports:t.lamports});return new ee({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:tr,isSigner:!1,isWritable:!1},{pubkey:li,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=me.AuthorizeNonceAccount,n=ce(e,{authorized:fe(t.newAuthorizedPubkey.toBuffer())});return new ee({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const s=me.AllocateWithSeed;e=ce(s,{base:fe(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:fe(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=me.Allocate;e=ce(s,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new ee({keys:n,programId:this.programId,data:e})}}Fn.programId=new Q("11111111111111111111111111111111");new Q("BPFLoader2111111111111111111111111111111111");$([j("typeIndex"),An("deactivationSlot"),te("lastExtendedSlot"),st("lastExtendedStartIndex"),st(),de(rt(),rn(st(),-1),"authority")]);const pt=Zn(Ui(Q),C(),r=>new Q(r)),Go=Oi([C(),lt("base64")]),zi=Zn(Ui(et.Buffer),Go,r=>et.Buffer.from(r[0],"base64"));function Yo(r){return pe([O({jsonrpc:lt("2.0"),id:C(),result:r}),O({jsonrpc:lt("2.0"),id:C(),error:O({code:_n(),message:C(),data:W(sc())})})])}const ef=Yo(_n());function at(r){return Zn(Yo(r),ef,t=>"error"in t?t:{...t,result:Cn(t.result,r)})}function _e(r){return at(O({context:O({slot:A()}),value:r}))}function Er(r){return O({context:O({slot:A()}),value:r})}const nf=O({foundation:A(),foundationTerm:A(),initial:A(),taper:A(),terminal:A()});at(D(q(O({epoch:A(),effectiveSlot:A(),amount:A(),postBalance:A(),commission:W(q(A()))}))));const rf=D(O({slot:A(),prioritizationFee:A()})),sf=O({total:A(),validator:A(),foundation:A(),epoch:A()}),of=O({epoch:A(),slotIndex:A(),slotsInEpoch:A(),absoluteSlot:A(),blockHeight:W(A()),transactionCount:W(A())}),af=O({slotsPerEpoch:A(),leaderScheduleSlotOffset:A(),warmup:Ue(),firstNormalEpoch:A(),firstNormalSlot:A()}),uf=Lo(C(),D(A())),ln=q(pe([O({}),C()])),cf=O({err:ln}),ff=lt("receivedSignature");O({"solana-core":C(),"feature-set":W(A())});const lf=O({program:C(),programId:pt,parsed:_n()}),hf=O({programId:pt,accounts:D(pt),data:C()});_e(O({err:q(pe([O({}),C()])),logs:q(D(C())),accounts:W(q(D(q(O({executable:Ue(),owner:C(),lamports:A(),data:D(C()),rentEpoch:W(A())}))))),unitsConsumed:W(A()),returnData:W(q(O({programId:C(),data:Oi([C(),lt("base64")])}))),innerInstructions:W(q(D(O({index:A(),instructions:D(pe([lf,hf]))}))))}));_e(O({byIdentity:Lo(C(),D(A())),range:O({firstSlot:A(),lastSlot:A()})}));at(nf);at(sf);at(rf);at(of);at(af);at(uf);at(A());_e(O({total:A(),circulating:A(),nonCirculating:A(),nonCirculatingAccounts:D(pt)}));const df=O({amount:C(),uiAmount:q(A()),decimals:A(),uiAmountString:W(C())});_e(D(O({address:pt,amount:C(),uiAmount:q(A()),decimals:A(),uiAmountString:W(C())})));_e(D(O({pubkey:pt,account:O({executable:Ue(),owner:pt,lamports:A(),data:zi,rentEpoch:A()})})));const di=O({program:C(),parsed:_n(),space:A()});_e(D(O({pubkey:pt,account:O({executable:Ue(),owner:pt,lamports:A(),data:di,rentEpoch:A()})})));_e(D(O({lamports:A(),address:pt})));const Fi=O({executable:Ue(),owner:pt,lamports:A(),data:zi,rentEpoch:A()});O({pubkey:pt,account:Fi});const pf=Zn(pe([Ui(et.Buffer),di]),pe([Go,di]),r=>Array.isArray(r)?Cn(r,zi):r),gf=O({executable:Ue(),owner:pt,lamports:A(),data:pf,rentEpoch:A()});O({pubkey:pt,account:gf});O({state:pe([lt("active"),lt("inactive"),lt("activating"),lt("deactivating")]),active:A(),inactive:A()});at(D(O({signature:C(),slot:A(),err:ln,memo:q(C()),blockTime:W(q(A()))})));at(D(O({signature:C(),slot:A(),err:ln,memo:q(C()),blockTime:W(q(A()))})));O({subscription:A(),result:Er(Fi)});const yf=O({pubkey:pt,account:Fi});O({subscription:A(),result:Er(yf)});const mf=O({parent:A(),slot:A(),root:A()});O({subscription:A(),result:mf});const wf=pe([O({type:pe([lt("firstShredReceived"),lt("completed"),lt("optimisticConfirmation"),lt("root")]),slot:A(),timestamp:A()}),O({type:lt("createdBank"),parent:A(),slot:A(),timestamp:A()}),O({type:lt("frozen"),slot:A(),timestamp:A(),stats:O({numTransactionEntries:A(),numSuccessfulTransactions:A(),numFailedTransactions:A(),maxTransactionsPerEntry:A()})}),O({type:lt("dead"),slot:A(),timestamp:A(),err:C()})]);O({subscription:A(),result:wf});O({subscription:A(),result:Er(pe([cf,ff]))});O({subscription:A(),result:A()});O({pubkey:C(),gossip:q(C()),tpu:q(C()),rpc:q(C()),version:q(C())});const Ms=O({votePubkey:C(),nodePubkey:C(),activatedStake:A(),epochVoteAccount:Ue(),epochCredits:D(Oi([A(),A(),A()])),commission:A(),lastVote:A(),rootSlot:q(A())});at(O({current:D(Ms),delinquent:D(Ms)}));const bf=pe([lt("processed"),lt("confirmed"),lt("finalized")]),vf=O({slot:A(),confirmations:q(A()),err:ln,confirmationStatus:W(bf)});_e(D(q(vf)));at(A());const Xo=O({accountKey:pt,writableIndexes:D(A()),readonlyIndexes:D(A())}),Di=O({signatures:D(C()),message:O({accountKeys:D(C()),header:O({numRequiredSignatures:A(),numReadonlySignedAccounts:A(),numReadonlyUnsignedAccounts:A()}),instructions:D(O({accounts:D(A()),data:C(),programIdIndex:A()})),recentBlockhash:C(),addressTableLookups:W(D(Xo))})}),Jo=O({pubkey:pt,signer:Ue(),writable:Ue(),source:W(pe([lt("transaction"),lt("lookupTable")]))}),Qo=O({accountKeys:D(Jo),signatures:D(C())}),ta=O({parsed:_n(),program:C(),programId:pt}),ea=O({accounts:D(pt),data:C(),programId:pt}),xf=pe([ea,ta]),Ef=pe([O({parsed:_n(),program:C(),programId:C()}),O({accounts:D(C()),data:C(),programId:C()})]),na=Zn(xf,Ef,r=>"accounts"in r?Cn(r,ea):Cn(r,ta)),ra=O({signatures:D(C()),message:O({accountKeys:D(Jo),instructions:D(na),recentBlockhash:C(),addressTableLookups:W(q(D(Xo)))})}),hr=O({accountIndex:A(),mint:C(),owner:W(C()),programId:W(C()),uiTokenAmount:df}),ia=O({writable:D(pt),readonly:D(pt)}),Sr=O({err:ln,fee:A(),innerInstructions:W(q(D(O({index:A(),instructions:D(O({accounts:D(A()),data:C(),programIdIndex:A()}))})))),preBalances:D(A()),postBalances:D(A()),logMessages:W(q(D(C()))),preTokenBalances:W(q(D(hr))),postTokenBalances:W(q(D(hr))),loadedAddresses:W(ia),computeUnitsConsumed:W(A()),costUnits:W(A())}),qi=O({err:ln,fee:A(),innerInstructions:W(q(D(O({index:A(),instructions:D(na)})))),preBalances:D(A()),postBalances:D(A()),logMessages:W(q(D(C()))),preTokenBalances:W(q(D(hr))),postTokenBalances:W(q(D(hr))),loadedAddresses:W(ia),computeUnitsConsumed:W(A()),costUnits:W(A())}),Rn=pe([lt(0),lt("legacy")]),hn=O({pubkey:C(),lamports:A(),postBalance:q(A()),rewardType:q(C()),commission:W(q(A()))});at(q(O({blockhash:C(),previousBlockhash:C(),parentSlot:A(),transactions:D(O({transaction:Di,meta:q(Sr),version:W(Rn)})),rewards:W(D(hn)),blockTime:q(A()),blockHeight:q(A())})));at(q(O({blockhash:C(),previousBlockhash:C(),parentSlot:A(),rewards:W(D(hn)),blockTime:q(A()),blockHeight:q(A())})));at(q(O({blockhash:C(),previousBlockhash:C(),parentSlot:A(),transactions:D(O({transaction:Qo,meta:q(Sr),version:W(Rn)})),rewards:W(D(hn)),blockTime:q(A()),blockHeight:q(A())})));at(q(O({blockhash:C(),previousBlockhash:C(),parentSlot:A(),transactions:D(O({transaction:ra,meta:q(qi),version:W(Rn)})),rewards:W(D(hn)),blockTime:q(A()),blockHeight:q(A())})));at(q(O({blockhash:C(),previousBlockhash:C(),parentSlot:A(),transactions:D(O({transaction:Qo,meta:q(qi),version:W(Rn)})),rewards:W(D(hn)),blockTime:q(A()),blockHeight:q(A())})));at(q(O({blockhash:C(),previousBlockhash:C(),parentSlot:A(),rewards:W(D(hn)),blockTime:q(A()),blockHeight:q(A())})));at(q(O({blockhash:C(),previousBlockhash:C(),parentSlot:A(),transactions:D(O({transaction:Di,meta:q(Sr)})),rewards:W(D(hn)),blockTime:q(A())})));at(q(O({blockhash:C(),previousBlockhash:C(),parentSlot:A(),signatures:D(C()),blockTime:q(A())})));at(q(O({slot:A(),meta:q(Sr),blockTime:W(q(A())),transaction:Di,version:W(Rn)})));at(q(O({slot:A(),transaction:ra,meta:q(qi),blockTime:W(q(A())),version:W(Rn)})));_e(O({blockhash:C(),lastValidBlockHeight:A()}));_e(Ue());const Sf=O({slot:A(),numTransactions:A(),numSlots:A(),samplePeriodSecs:A()});at(D(Sf));_e(q(O({feeCalculator:O({lamportsPerSignature:A()})})));at(C());at(C());const Bf=O({err:ln,logs:D(C()),signature:C()});O({result:Er(Bf),subscription:A()});Object.freeze({CreateLookupTable:{index:0,layout:$([j("instruction"),An("recentSlot"),st("bumpSeed")])},FreezeLookupTable:{index:1,layout:$([j("instruction")])},ExtendLookupTable:{index:2,layout:$([j("instruction"),An(),de(rt(),rn(j(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:$([j("instruction")])},CloseLookupTable:{index:4,layout:$([j("instruction")])}});new Q("AddressLookupTab1e1111111111111111111111111");const Un=Object.freeze({RequestUnits:{index:0,layout:$([st("instruction"),j("units"),j("additionalFee")])},RequestHeapFrame:{index:1,layout:$([st("instruction"),j("bytes")])},SetComputeUnitLimit:{index:2,layout:$([st("instruction"),j("units")])},SetComputeUnitPrice:{index:3,layout:$([st("instruction"),An("microLamports")])}});class sa{constructor(){}static requestUnits(t){const e=Un.RequestUnits,n=ce(e,t);return new ee({keys:[],programId:this.programId,data:n})}static requestHeapFrame(t){const e=Un.RequestHeapFrame,n=ce(e,t);return new ee({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(t){const e=Un.SetComputeUnitLimit,n=ce(e,t);return new ee({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(t){const e=Un.SetComputeUnitPrice,n=ce(e,{microLamports:BigInt(t.microLamports)});return new ee({keys:[],programId:this.programId,data:n})}}sa.programId=new Q("ComputeBudget111111111111111111111111111111");$([st("numSignatures"),st("padding"),Se("signatureOffset"),Se("signatureInstructionIndex"),Se("publicKeyOffset"),Se("publicKeyInstructionIndex"),Se("messageDataOffset"),Se("messageDataSize"),Se("messageInstructionIndex")]);new Q("Ed25519SigVerify111111111111111111111111111");$c.utils.isValidPrivateKey;$([st("numSignatures"),Se("signatureOffset"),st("signatureInstructionIndex"),Se("ethAddressOffset"),st("ethAddressInstructionIndex"),Se("messageDataOffset"),Se("messageDataSize"),st("messageInstructionIndex"),ct(20,"ethAddress"),ct(64,"signature"),st("recoveryId")]);new Q("KeccakSecp256k11111111111111111111111111111");var oa;new Q("StakeConfig11111111111111111111111111111111");class Pi{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}oa=Pi;Pi.default=new oa(0,0,Q.default);Object.freeze({Initialize:{index:0,layout:$([j("instruction"),Gc(),Yc()])},Authorize:{index:1,layout:$([j("instruction"),rt("newAuthorized"),j("stakeAuthorizationType")])},Delegate:{index:2,layout:$([j("instruction")])},Split:{index:3,layout:$([j("instruction"),we("lamports")])},Withdraw:{index:4,layout:$([j("instruction"),we("lamports")])},Deactivate:{index:5,layout:$([j("instruction")])},Merge:{index:7,layout:$([j("instruction")])},AuthorizeWithSeed:{index:8,layout:$([j("instruction"),rt("newAuthorized"),j("stakeAuthorizationType"),bn("authoritySeed"),rt("authorityOwner")])}});new Q("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:$([j("instruction"),Xc()])},Authorize:{index:1,layout:$([j("instruction"),rt("newAuthorized"),j("voteAuthorizationType")])},Withdraw:{index:3,layout:$([j("instruction"),we("lamports")])},UpdateValidatorIdentity:{index:4,layout:$([j("instruction")])},AuthorizeWithSeed:{index:10,layout:$([j("instruction"),Jc()])}});new Q("Vote111111111111111111111111111111111111111");new Q("Va1idator1nfo111111111111111111111111111111");O({name:C(),website:W(C()),details:W(C()),iconUrl:W(C()),keybaseUsername:W(C())});new Q("Vote111111111111111111111111111111111111111");$([rt("nodePubkey"),rt("authorizedWithdrawer"),st("commission"),te(),de($([te("slot"),j("confirmationCount")]),rn(j(),-8),"votes"),st("rootSlotValid"),te("rootSlot"),te(),de($([te("epoch"),rt("authorizedVoter")]),rn(j(),-8),"authorizedVoters"),$([de($([rt("authorizedPubkey"),te("epochOfLastAuthorizedSwitch"),te("targetEpoch")]),32,"buf"),te("idx"),st("isEmpty")],"priorVoters"),te(),de($([te("epoch"),te("credits"),te("prevCredits")]),rn(j(),-8),"epochCredits"),$([te("slot"),te("timestamp")],"lastTimestamp")]);const _f=Object.freeze(Object.defineProperty({__proto__:null,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Un,ComputeBudgetProgram:sa,FeeCalculatorLayout:jo,Lockup:Pi,MAX_SEED_LENGTH:$o,Message:Ye,MessageAccountKeys:Kn,MessageV0:Mn,NONCE_ACCOUNT_LENGTH:hi,PACKET_DATA_SIZE:sn,PUBLIC_KEY_LENGTH:Pe,PublicKey:Q,SIGNATURE_LENGTH_IN_BYTES:Nn,SOLANA_SCHEMA:On,SYSTEM_INSTRUCTION_LAYOUTS:me,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:tr,SYSVAR_RENT_PUBKEY:li,Struct:Vo,SystemProgram:Fn,Transaction:zn,TransactionInstruction:ee,TransactionMessage:Ni,VERSION_PREFIX_MASK:vr,VersionedMessage:Ci,VersionedTransaction:Ki},Symbol.toStringTag,{value:"Module"}));export{Q as P,ee as T,_f as i,$ as s,st as u};
