name = "gor-incinerator-api"
main = "src/index.ts"
compatibility_date = "2024-11-01"
node_compat = true

# Workers AI binding (optional, for future enhancements)
# [ai]
# binding = "AI"

# D1 Database for transaction logging
[[d1_databases]]
binding = "DB"
database_name = "gor-incinerator-logs"
database_id = "54456de5-7083-46c2-a69b-4164d5de2dff" # Placeholder, will be created in Cloudflare dashboard

# Environment variables (non-secret)
[vars]
GOR_RPC_URL = "https://api.gorbagana.com" # Placeholder, will be set in Cloudflare dashboard
GOR_VAULT_ADDRESS_AETHER = "AETHER_VAULT_ADDRESS_PLACEHOLDER" # Placeholder
GOR_VAULT_ADDRESS_INCINERATOR = "INCINERATOR_VAULT_ADDRESS_PLACEHOLDER" # Placeholder
ADMIN_API_KEY = "ADMIN_API_KEY_PLACEHOLDER" # Placeholder

ENVIRONMENT = "production"

# Secrets (set via: wrangler secret put <KEY>)
# API_KEY - API key for Gorbag Wallet authentication
# ADMIN_API_KEY - API key for reconciliation endpoint
# GOR_RPC_URL - Gorbagana RPC endpoint URL
# GOR_VAULT_ADDRESS_AETHER - Aether Labs vault address (50% of fee)
# GOR_VAULT_ADDRESS_INCINERATOR - Gor-incinerator vault address (50% of fee)

# Development environment
[env.dev]
name = "gor-incinerator-api-dev"
vars = { ENVIRONMENT = "development" }

# Routes (configure after deployment)
# routes = [
#   { pattern = "api.gor-incinerator.fun/*", zone_name = "gor-incinerator.fun" }
# ]

# CORS configuration
[build]
command = ""

# Limits
[limits]
cpu_ms = 50
